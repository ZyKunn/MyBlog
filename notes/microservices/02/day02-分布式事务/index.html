<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.63">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="./img/logo.png"><title>day02-åˆ†å¸ƒå¼äº‹åŠ¡ | ZyKunã®Blog</title><meta name="description" content="">
    <link rel="preload" href="/MyBlog/assets/style-57272a59.css" as="style"><link rel="stylesheet" href="/MyBlog/assets/style-57272a59.css">
    <link rel="modulepreload" href="/MyBlog/assets/app-a153c100.js"><link rel="modulepreload" href="/MyBlog/assets/index.html-3f85e131.js"><link rel="modulepreload" href="/MyBlog/assets/index.html-d8c9612c.js"><link rel="prefetch" href="/MyBlog/assets/index.html-ab0151fa.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1249ab5a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4d02565e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1c68c797.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-93acf26d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2bc953d6.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0c526d7c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-636c9f52.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d4177c6b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7624decc.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d0b4a798.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-aa378d7b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ddd44d65.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-adbb7f41.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-34576599.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1079a374.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-88d4ebe7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5e927142.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9a6f13b8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4c85da23.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-69e813d7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-545062a2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bd7a4fcb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-910949e0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-459b0c71.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9a036060.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f62ffe74.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-841a86c0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b31c8bb6.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-85bae056.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-73555735.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6d5456cd.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d2dfbeec.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-746091c2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9cc627ff.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d411448a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4454f425.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-57aa84f4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2ce52087.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-76657200.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-90d9409e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4d6ba5e7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-41bc7856.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6140daf4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ea30461d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-00114784.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f3fa86cb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-386f0bd2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b46ac77e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-256a258e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4ebf55b3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7268161e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5a8852c0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-19373782.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4e33bb6b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-de5ff178.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fd5da14a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-dbee5a73.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-64025c89.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9bd15ac7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4812edff.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1f3f5c2b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1d66d048.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-67b1b38e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-17f10f72.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ad1b5dc8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b14e7669.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fa35810b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-acb9b7bf.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f2ba9a88.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-abdb28e5.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b3cc33e9.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ef13eee8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-73fa0dcc.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6f7449c7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-3857ef8d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e5af1d8f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d5d14c1f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-94a8b9a2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-3931e4d3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0978879b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-617bd5bf.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4fe008c8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0e33aa95.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-00725025.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8e05ec6e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-72ca6b4c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-427c5181.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-3b3baf42.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-40a790c3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9709e7c9.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8eb00d02.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0c849262.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-eda16f63.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-81242655.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2c9f6820.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-79188b74.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5775eee0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-eff0510c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-305de307.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e83a5de7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-761a9548.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c12ae66e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-87a73e5c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d720473a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b960b5b6.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bbd98f93.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-76195dca.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-3bd0cfa7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8c87d147.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bac2e853.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1ee6bc34.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ab7381d6.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5b97f6b8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fd33ca6f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-684189de.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-63731ad7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-895bfca1.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6d1ff4c2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b71bf26f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ce6f983b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c185f9a2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-29c62d64.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-52c91de2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-55aa1c06.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c87ef63a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ff1d9f51.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a12aedeb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-298f19f2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f881f599.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2c32406a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d4217479.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7edb7ce1.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8671126f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-da565d04.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f9deb3ec.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ee7cf1b5.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-270d6327.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ec786b75.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e98adf02.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7233a0e2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-79c193cf.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9714081e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d5dea51d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a235e4bb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e3209a23.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-cdce2101.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-389e66df.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-652ee4f6.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-025e6f4e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-60711e70.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6edc93de.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-11bd39b1.js" as="script"><link rel="prefetch" href="/MyBlog/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-53015219.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-74dcd8ae.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2dd727db.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-11b329fb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-3b6f3614.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-70ce719f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f6ca4d92.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5a6833de.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bf03220c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a2edab58.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f1e5cf7a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-21d4e18d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5235fca9.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2dc704c0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-57630906.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ff165209.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6ec253a3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f9e4f0c3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-664b232d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-adf015a3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4667c0e6.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-cc407710.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1752d212.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9b5d99c4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-43c48ae2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e8a616b7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-93e7405b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-22a72a56.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-42ce3023.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f8eeab22.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-dd50991a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-af520db8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5ab2bfac.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-965bc04f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-81ebef01.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-79d19f4d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9600bdfb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-560df48d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4fb22a4f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bd4caa82.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-370323f9.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f673ebfa.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-78d88460.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8b54347c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d30f0340.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e26bc4de.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7d37b036.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-3aa565ce.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4c69f238.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-76d60030.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7116a5e4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d8f649cc.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-adbbb7c9.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-90bb86fd.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e23936a3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-19ad952b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-07245162.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-038b3afd.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-084fe5c1.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-098421fe.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7baefce4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fffdfb9c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-05c42fda.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e1615934.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-da824146.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fa2d32f0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-545dbea7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f3ca58cb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b9e2188a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4fc5f1f7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1ec5c70d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-cbf2aa55.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8beb0c08.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ee54da9f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fd28b91d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-98aa51a1.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-03f9381a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2c9009c5.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-71b7cfbe.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1759170e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-aa84186f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-53160af7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-51b685b4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ecb8e229.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9c507901.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c6362722.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-faf67dd8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d7f20950.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a088985c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-93b7982c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b76e6179.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d976d39c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b16efd78.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1301757e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c3240cbe.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a2ddd21c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-74fb5e20.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-128f5026.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8fd9f38a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-82e84e23.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-007ef014.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f3dd860c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-382a2bae.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7b6beaec.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2eb17cfa.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c6f50213.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0c8aef39.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-133f4d38.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-cffd2be1.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a798219d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6b5fde77.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-13275b71.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4b6a02c3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7f179a12.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f45bc33f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0574e5e5.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0921816f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-631fbc02.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8586017d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c4dbf09b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-967486c0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-aad17dde.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ff644d77.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-78a4df64.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8d2180e8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-53fbcd20.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a3387e5e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-979f5ac4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0938c506.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-51707e22.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b1e917a0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6b56a071.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d15eb498.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7b0a97c0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fda196b5.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bcc5faac.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-490c208f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-dce28479.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-62825d3c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b5a4af15.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-eb40da96.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8d6d1c61.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-618cf3f0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f2a35430.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-64f564d2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bca2187b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-85181f96.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7f689b28.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-62aa623a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b0c39cc5.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-73b8fff0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5466ae58.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fbd0bcfa.js" as="script"><link rel="prefetch" href="/MyBlog/assets/404.html-5f041a2b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/MyBlog/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index-5161ad19.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/MyBlog/" class=""><!----><span class="site-name can-hide">ZyKunã®Blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/MyBlog/" class="" aria-label="ğŸŒ±Home"><!--[--><!--]--> ğŸŒ±Home <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¥Java"><span class="title">ğŸ¥Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¥Java"><span class="title">ğŸ¥Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/01/" class="" aria-label="åŸºç¡€è¯­æ³•"><!--[--><!--]--> åŸºç¡€è¯­æ³• <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/02/" class="" aria-label="é¢å‘å¯¹è±¡ç¼–ç¨‹"><!--[--><!--]--> é¢å‘å¯¹è±¡ç¼–ç¨‹ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/03/" class="" aria-label="å¸¸ç”¨ç±»&amp;é›†åˆæ¡†æ¶"><!--[--><!--]--> å¸¸ç”¨ç±»&amp;é›†åˆæ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/04/" class="" aria-label="JDBC"><!--[--><!--]--> JDBC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/05/" class="" aria-label="Javaé«˜çº§"><!--[--><!--]--> Javaé«˜çº§ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/06/" class="" aria-label="JavaWeb"><!--[--><!--]--> JavaWeb <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸPython"><span class="title">ğŸPython</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸPython"><span class="title">ğŸPython</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/python/01/" class="" aria-label="Pythonå…¥é—¨"><!--[--><!--]--> Pythonå…¥é—¨ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸŒ‹å¾®æœåŠ¡"><span class="title">ğŸŒ‹å¾®æœåŠ¡</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸŒ‹å¾®æœåŠ¡"><span class="title">ğŸŒ‹å¾®æœåŠ¡</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/microservices/01/" class="" aria-label="å®ç”¨ç¯‡"><!--[--><!--]--> å®ç”¨ç¯‡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/microservices/02/" class="router-link-active" aria-label="é«˜çº§ç¯‡"><!--[--><!--]--> é«˜çº§ç¯‡ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/MyBlog/notes/mysql/" class="" aria-label="ğŸ“Mysql"><!--[--><!--]--> ğŸ“Mysql <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¤å‰ç«¯"><span class="title">ğŸ¤å‰ç«¯</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¤å‰ç«¯"><span class="title">ğŸ¤å‰ç«¯</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/01/" class="" aria-label="HTML&amp;CSS"><!--[--><!--]--> HTML&amp;CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/02/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/03/" class="" aria-label="JQuery"><!--[--><!--]--> JQuery <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/04/" class="" aria-label="Layui"><!--[--><!--]--> Layui <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/05/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¢Project"><span class="title">ğŸ¢Project</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¢Project"><span class="title">ğŸ¢Project</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/project/01/" class="" aria-label="Reggie"><!--[--><!--]--> Reggie <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/project/02/" class="" aria-label="51XueCheng"><!--[--><!--]--> 51XueCheng <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/MyBlog/notes/record/" class="" aria-label="ğŸéšç¬”"><!--[--><!--]--> ğŸéšç¬” <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/ZyKunn" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/MyBlog/" class="" aria-label="ğŸŒ±Home"><!--[--><!--]--> ğŸŒ±Home <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¥Java"><span class="title">ğŸ¥Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¥Java"><span class="title">ğŸ¥Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/01/" class="" aria-label="åŸºç¡€è¯­æ³•"><!--[--><!--]--> åŸºç¡€è¯­æ³• <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/02/" class="" aria-label="é¢å‘å¯¹è±¡ç¼–ç¨‹"><!--[--><!--]--> é¢å‘å¯¹è±¡ç¼–ç¨‹ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/03/" class="" aria-label="å¸¸ç”¨ç±»&amp;é›†åˆæ¡†æ¶"><!--[--><!--]--> å¸¸ç”¨ç±»&amp;é›†åˆæ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/04/" class="" aria-label="JDBC"><!--[--><!--]--> JDBC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/05/" class="" aria-label="Javaé«˜çº§"><!--[--><!--]--> Javaé«˜çº§ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/06/" class="" aria-label="JavaWeb"><!--[--><!--]--> JavaWeb <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸPython"><span class="title">ğŸPython</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸPython"><span class="title">ğŸPython</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/python/01/" class="" aria-label="Pythonå…¥é—¨"><!--[--><!--]--> Pythonå…¥é—¨ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸŒ‹å¾®æœåŠ¡"><span class="title">ğŸŒ‹å¾®æœåŠ¡</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸŒ‹å¾®æœåŠ¡"><span class="title">ğŸŒ‹å¾®æœåŠ¡</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/microservices/01/" class="" aria-label="å®ç”¨ç¯‡"><!--[--><!--]--> å®ç”¨ç¯‡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/microservices/02/" class="router-link-active" aria-label="é«˜çº§ç¯‡"><!--[--><!--]--> é«˜çº§ç¯‡ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/MyBlog/notes/mysql/" class="" aria-label="ğŸ“Mysql"><!--[--><!--]--> ğŸ“Mysql <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¤å‰ç«¯"><span class="title">ğŸ¤å‰ç«¯</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¤å‰ç«¯"><span class="title">ğŸ¤å‰ç«¯</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/01/" class="" aria-label="HTML&amp;CSS"><!--[--><!--]--> HTML&amp;CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/02/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/03/" class="" aria-label="JQuery"><!--[--><!--]--> JQuery <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/04/" class="" aria-label="Layui"><!--[--><!--]--> Layui <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/05/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¢Project"><span class="title">ğŸ¢Project</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¢Project"><span class="title">ğŸ¢Project</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/project/01/" class="" aria-label="Reggie"><!--[--><!--]--> Reggie <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/project/02/" class="" aria-label="51XueCheng"><!--[--><!--]--> 51XueCheng <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/MyBlog/notes/record/" class="" aria-label="ğŸéšç¬”"><!--[--><!--]--> ğŸéšç¬” <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/ZyKunn" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/MyBlog/notes/microservices/02/" class="router-link-active sidebar-item sidebar-heading active" aria-label="é«˜ç´šç¯‡"><!--[--><!--]--> é«˜ç´šç¯‡ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/MyBlog/notes/microservices/02/day01-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4/" class="sidebar-item" aria-label="day01-å¾®æœåŠ¡ä¿æŠ¤"><!--[--><!--]--> day01-å¾®æœåŠ¡ä¿æŠ¤ <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/microservices/02/Jmeter%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" class="sidebar-item" aria-label="Jmeter å¿«é€Ÿå…¥é—¨ ğŸ§™"><!--[--><!--]--> Jmeter å¿«é€Ÿå…¥é—¨ ğŸ§™ <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/microservices/02/sentinel%E8%A7%84%E5%88%99%E6%8C%81%E4%B9%85%E5%8C%96/" class="sidebar-item" aria-label="Sentinel è§„åˆ™æŒä¹…åŒ– ğŸ§™"><!--[--><!--]--> Sentinel è§„åˆ™æŒä¹…åŒ– ğŸ§™ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="day02-åˆ†å¸ƒå¼äº‹åŠ¡"><!--[--><!--]--> day02-åˆ†å¸ƒå¼äº‹åŠ¡ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_1-1-æœ¬åœ°äº‹åŠ¡" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.1.æœ¬åœ°äº‹åŠ¡"><!--[--><!--]--> 1.1.æœ¬åœ°äº‹åŠ¡ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_1-2-åˆ†å¸ƒå¼äº‹åŠ¡" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2.åˆ†å¸ƒå¼äº‹åŠ¡"><!--[--><!--]--> 1.2.åˆ†å¸ƒå¼äº‹åŠ¡ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_1-3-æ¼”ç¤ºåˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.3.æ¼”ç¤ºåˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜"><!--[--><!--]--> 1.3.æ¼”ç¤ºåˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-1-cap-å®šç†" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1.CAP å®šç†"><!--[--><!--]--> 2.1.CAP å®šç† <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-1-1-ä¸€è‡´æ€§" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1.1.ä¸€è‡´æ€§"><!--[--><!--]--> 2.1.1.ä¸€è‡´æ€§ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-1-2-å¯ç”¨æ€§" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1.2.å¯ç”¨æ€§"><!--[--><!--]--> 2.1.2.å¯ç”¨æ€§ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-1-3-åˆ†åŒºå®¹é”™" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1.3.åˆ†åŒºå®¹é”™"><!--[--><!--]--> 2.1.3.åˆ†åŒºå®¹é”™ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-1-4-çŸ›ç›¾" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1.4.çŸ›ç›¾"><!--[--><!--]--> 2.1.4.çŸ›ç›¾ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-2-base-ç†è®º" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2.BASE ç†è®º"><!--[--><!--]--> 2.2.BASE ç†è®º <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-3-è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ€è·¯" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3.è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ€è·¯"><!--[--><!--]--> 2.3.è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ€è·¯ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_3-1-seata-çš„æ¶æ„" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1.Seata çš„æ¶æ„"><!--[--><!--]--> 3.1.Seata çš„æ¶æ„ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_3-2-éƒ¨ç½²-tc-æœåŠ¡" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2.éƒ¨ç½² TC æœåŠ¡"><!--[--><!--]--> 3.2.éƒ¨ç½² TC æœåŠ¡ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_3-3-å¾®æœåŠ¡é›†æˆ-seata" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.å¾®æœåŠ¡é›†æˆ Seata"><!--[--><!--]--> 3.3.å¾®æœåŠ¡é›†æˆ Seata <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_3-3-1-å¼•å…¥ä¾èµ–" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.1.å¼•å…¥ä¾èµ–"><!--[--><!--]--> 3.3.1.å¼•å…¥ä¾èµ– <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_3-3-2-é…ç½®-tc-åœ°å€" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.2.é…ç½® TC åœ°å€"><!--[--><!--]--> 3.3.2.é…ç½® TC åœ°å€ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_3-3-3-å…¶å®ƒæœåŠ¡" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.3.å…¶å®ƒæœåŠ¡"><!--[--><!--]--> 3.3.3.å…¶å®ƒæœåŠ¡ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-1-xa-æ¨¡å¼" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.1.XA æ¨¡å¼"><!--[--><!--]--> 4.1.XA æ¨¡å¼ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-1-1-ä¸¤é˜¶æ®µæäº¤" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.1.1.ä¸¤é˜¶æ®µæäº¤"><!--[--><!--]--> 4.1.1.ä¸¤é˜¶æ®µæäº¤ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-1-2-seata-çš„-xa-æ¨¡å‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.1.2.Seata çš„ XA æ¨¡å‹"><!--[--><!--]--> 4.1.2.Seata çš„ XA æ¨¡å‹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-1-3-ä¼˜ç¼ºç‚¹" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.1.3.ä¼˜ç¼ºç‚¹"><!--[--><!--]--> 4.1.3.ä¼˜ç¼ºç‚¹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-1-4-å®ç°-xa-æ¨¡å¼" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.1.4.å®ç° XA æ¨¡å¼"><!--[--><!--]--> 4.1.4.å®ç° XA æ¨¡å¼ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-at-æ¨¡å¼" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2.AT æ¨¡å¼"><!--[--><!--]--> 4.2.AT æ¨¡å¼ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-1-seata-çš„-at-æ¨¡å‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2.1.Seata çš„ AT æ¨¡å‹"><!--[--><!--]--> 4.2.1.Seata çš„ AT æ¨¡å‹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-2-æµç¨‹æ¢³ç†" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2.2.æµç¨‹æ¢³ç†"><!--[--><!--]--> 4.2.2.æµç¨‹æ¢³ç† <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-3-at-ä¸-xa-çš„åŒºåˆ«" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2.3.AT ä¸ XA çš„åŒºåˆ«"><!--[--><!--]--> 4.2.3.AT ä¸ XA çš„åŒºåˆ« <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-4-è„å†™é—®é¢˜" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2.4.è„å†™é—®é¢˜"><!--[--><!--]--> 4.2.4.è„å†™é—®é¢˜ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-5-ä¼˜ç¼ºç‚¹" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2.5.ä¼˜ç¼ºç‚¹"><!--[--><!--]--> 4.2.5.ä¼˜ç¼ºç‚¹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-6-å®ç°-at-æ¨¡å¼" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2.6.å®ç° AT æ¨¡å¼"><!--[--><!--]--> 4.2.6.å®ç° AT æ¨¡å¼ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-3-tcc-æ¨¡å¼" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.3.TCC æ¨¡å¼"><!--[--><!--]--> 4.3.TCC æ¨¡å¼ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-3-1-æµç¨‹åˆ†æ" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.3.1.æµç¨‹åˆ†æ"><!--[--><!--]--> 4.3.1.æµç¨‹åˆ†æ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-3-2-seata-çš„-tcc-æ¨¡å‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.3.2.Seata çš„ TCC æ¨¡å‹"><!--[--><!--]--> 4.3.2.Seata çš„ TCC æ¨¡å‹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-3-3-ä¼˜ç¼ºç‚¹" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.3.3.ä¼˜ç¼ºç‚¹"><!--[--><!--]--> 4.3.3.ä¼˜ç¼ºç‚¹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-3-4-äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»š" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.3.4.äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»š"><!--[--><!--]--> 4.3.4.äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»š <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_1-ç©ºå›æ»š" class="router-link-active router-link-exact-active sidebar-item" aria-label="1ï¼‰ç©ºå›æ»š"><!--[--><!--]--> 1ï¼‰ç©ºå›æ»š <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-ä¸šåŠ¡æ‚¬æŒ‚" class="router-link-active router-link-exact-active sidebar-item" aria-label="2ï¼‰ä¸šåŠ¡æ‚¬æŒ‚"><!--[--><!--]--> 2ï¼‰ä¸šåŠ¡æ‚¬æŒ‚ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-3-5-å®ç°-tcc-æ¨¡å¼" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.3.5.å®ç° TCC æ¨¡å¼"><!--[--><!--]--> 4.3.5.å®ç° TCC æ¨¡å¼ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_1-æ€è·¯åˆ†æ" class="router-link-active router-link-exact-active sidebar-item" aria-label="1ï¼‰æ€è·¯åˆ†æ"><!--[--><!--]--> 1ï¼‰æ€è·¯åˆ†æ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-å£°æ˜-tcc-æ¥å£" class="router-link-active router-link-exact-active sidebar-item" aria-label="2ï¼‰å£°æ˜ TCC æ¥å£"><!--[--><!--]--> 2ï¼‰å£°æ˜ TCC æ¥å£ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_3-ç¼–å†™å®ç°ç±»" class="router-link-active router-link-exact-active sidebar-item" aria-label="3ï¼‰ç¼–å†™å®ç°ç±»"><!--[--><!--]--> 3ï¼‰ç¼–å†™å®ç°ç±» <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-4-saga-æ¨¡å¼" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.4.SAGA æ¨¡å¼"><!--[--><!--]--> 4.4.SAGA æ¨¡å¼ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-4-1-åŸç†" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.4.1.åŸç†"><!--[--><!--]--> 4.4.1.åŸç† <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-4-2-ä¼˜ç¼ºç‚¹" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.4.2.ä¼˜ç¼ºç‚¹"><!--[--><!--]--> 4.4.2.ä¼˜ç¼ºç‚¹ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-5-å››ç§æ¨¡å¼å¯¹æ¯”" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.5.å››ç§æ¨¡å¼å¯¹æ¯”"><!--[--><!--]--> 4.5.å››ç§æ¨¡å¼å¯¹æ¯” <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_5-1-é«˜å¯ç”¨æ¶æ„æ¨¡å‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.1.é«˜å¯ç”¨æ¶æ„æ¨¡å‹"><!--[--><!--]--> 5.1.é«˜å¯ç”¨æ¶æ„æ¨¡å‹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_5-2-å®ç°é«˜å¯ç”¨" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.2.å®ç°é«˜å¯ç”¨"><!--[--><!--]--> 5.2.å®ç°é«˜å¯ç”¨ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/MyBlog/notes/microservices/02/seata%E7%9A%84%E9%83%A8%E7%BD%B2%E5%92%8C%E9%9B%86%E6%88%90/" class="sidebar-item" aria-label="seata çš„éƒ¨ç½²å’Œé›†æˆ ğŸ§™"><!--[--><!--]--> seata çš„éƒ¨ç½²å’Œé›†æˆ ğŸ§™ <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/microservices/02/day03-%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/" class="sidebar-item" aria-label="day03-åˆ†å¸ƒå¼ç¼“å­˜"><!--[--><!--]--> day03-åˆ†å¸ƒå¼ç¼“å­˜ <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/microservices/02/Redis%E9%9B%86%E7%BE%A4/" class="sidebar-item" aria-label="Redis é›†ç¾¤ ğŸ§™"><!--[--><!--]--> Redis é›†ç¾¤ ğŸ§™ <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/microservices/02/day05-MQ%E9%AB%98%E7%BA%A7/" class="sidebar-item" aria-label="day05-æœåŠ¡å¼‚æ­¥é€šä¿¡-é«˜çº§ç¯‡"><!--[--><!--]--> day05-æœåŠ¡å¼‚æ­¥é€šä¿¡-é«˜çº§ç¯‡ <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/microservices/02/RabbitMQ%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/" class="sidebar-item" aria-label="RabbitMQ éƒ¨ç½²æŒ‡å— ğŸ§™"><!--[--><!--]--> RabbitMQ éƒ¨ç½²æŒ‡å— ğŸ§™ <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="day02-åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#day02-åˆ†å¸ƒå¼äº‹åŠ¡" aria-hidden="true">#</a> day02-åˆ†å¸ƒå¼äº‹åŠ¡</h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_1-1-æœ¬åœ°äº‹åŠ¡" class="router-link-active router-link-exact-active">1.1.æœ¬åœ°äº‹åŠ¡</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_1-2-åˆ†å¸ƒå¼äº‹åŠ¡" class="router-link-active router-link-exact-active">1.2.åˆ†å¸ƒå¼äº‹åŠ¡</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_1-3-æ¼”ç¤ºåˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜" class="router-link-active router-link-exact-active">1.3.æ¼”ç¤ºåˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-1-cap-å®šç†" class="router-link-active router-link-exact-active">2.1.CAP å®šç†</a><ul><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-1-1-ä¸€è‡´æ€§" class="router-link-active router-link-exact-active">2.1.1.ä¸€è‡´æ€§</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-1-2-å¯ç”¨æ€§" class="router-link-active router-link-exact-active">2.1.2.å¯ç”¨æ€§</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-1-3-åˆ†åŒºå®¹é”™" class="router-link-active router-link-exact-active">2.1.3.åˆ†åŒºå®¹é”™</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-1-4-çŸ›ç›¾" class="router-link-active router-link-exact-active">2.1.4.çŸ›ç›¾</a></li></ul></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-2-base-ç†è®º" class="router-link-active router-link-exact-active">2.2.BASE ç†è®º</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_2-3-è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ€è·¯" class="router-link-active router-link-exact-active">2.3.è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ€è·¯</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_3-1-seata-çš„æ¶æ„" class="router-link-active router-link-exact-active">3.1.Seata çš„æ¶æ„</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_3-2-éƒ¨ç½²-tc-æœåŠ¡" class="router-link-active router-link-exact-active">3.2.éƒ¨ç½² TC æœåŠ¡</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_3-3-å¾®æœåŠ¡é›†æˆ-seata" class="router-link-active router-link-exact-active">3.3.å¾®æœåŠ¡é›†æˆ Seata</a><ul><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_3-3-1-å¼•å…¥ä¾èµ–" class="router-link-active router-link-exact-active">3.3.1.å¼•å…¥ä¾èµ–</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_3-3-2-é…ç½®-tc-åœ°å€" class="router-link-active router-link-exact-active">3.3.2.é…ç½® TC åœ°å€</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_3-3-3-å…¶å®ƒæœåŠ¡" class="router-link-active router-link-exact-active">3.3.3.å…¶å®ƒæœåŠ¡</a></li></ul></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-1-xa-æ¨¡å¼" class="router-link-active router-link-exact-active">4.1.XA æ¨¡å¼</a><ul><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-1-1-ä¸¤é˜¶æ®µæäº¤" class="router-link-active router-link-exact-active">4.1.1.ä¸¤é˜¶æ®µæäº¤</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-1-2-seata-çš„-xa-æ¨¡å‹" class="router-link-active router-link-exact-active">4.1.2.Seata çš„ XA æ¨¡å‹</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-1-3-ä¼˜ç¼ºç‚¹" class="router-link-active router-link-exact-active">4.1.3.ä¼˜ç¼ºç‚¹</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-1-4-å®ç°-xa-æ¨¡å¼" class="router-link-active router-link-exact-active">4.1.4.å®ç° XA æ¨¡å¼</a></li></ul></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-at-æ¨¡å¼" class="router-link-active router-link-exact-active">4.2.AT æ¨¡å¼</a><ul><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-1-seata-çš„-at-æ¨¡å‹" class="router-link-active router-link-exact-active">4.2.1.Seata çš„ AT æ¨¡å‹</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-2-æµç¨‹æ¢³ç†" class="router-link-active router-link-exact-active">4.2.2.æµç¨‹æ¢³ç†</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-3-at-ä¸-xa-çš„åŒºåˆ«" class="router-link-active router-link-exact-active">4.2.3.AT ä¸ XA çš„åŒºåˆ«</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-4-è„å†™é—®é¢˜" class="router-link-active router-link-exact-active">4.2.4.è„å†™é—®é¢˜</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-5-ä¼˜ç¼ºç‚¹" class="router-link-active router-link-exact-active">4.2.5.ä¼˜ç¼ºç‚¹</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-2-6-å®ç°-at-æ¨¡å¼" class="router-link-active router-link-exact-active">4.2.6.å®ç° AT æ¨¡å¼</a></li></ul></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-3-tcc-æ¨¡å¼" class="router-link-active router-link-exact-active">4.3.TCC æ¨¡å¼</a><ul><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-3-1-æµç¨‹åˆ†æ" class="router-link-active router-link-exact-active">4.3.1.æµç¨‹åˆ†æ</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-3-2-seata-çš„-tcc-æ¨¡å‹" class="router-link-active router-link-exact-active">4.3.2.Seata çš„ TCC æ¨¡å‹</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-3-3-ä¼˜ç¼ºç‚¹" class="router-link-active router-link-exact-active">4.3.3.ä¼˜ç¼ºç‚¹</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-3-4-äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»š" class="router-link-active router-link-exact-active">4.3.4.äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»š</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-3-5-å®ç°-tcc-æ¨¡å¼" class="router-link-active router-link-exact-active">4.3.5.å®ç° TCC æ¨¡å¼</a></li></ul></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-4-saga-æ¨¡å¼" class="router-link-active router-link-exact-active">4.4.SAGA æ¨¡å¼</a><ul><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-4-1-åŸç†" class="router-link-active router-link-exact-active">4.4.1.åŸç†</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-4-2-ä¼˜ç¼ºç‚¹" class="router-link-active router-link-exact-active">4.4.2.ä¼˜ç¼ºç‚¹</a></li></ul></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_4-5-å››ç§æ¨¡å¼å¯¹æ¯”" class="router-link-active router-link-exact-active">4.5.å››ç§æ¨¡å¼å¯¹æ¯”</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_5-1-é«˜å¯ç”¨æ¶æ„æ¨¡å‹" class="router-link-active router-link-exact-active">5.1.é«˜å¯ç”¨æ¶æ„æ¨¡å‹</a></li><li><a aria-current="page" href="/MyBlog/notes/microservices/02/day02-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/#_5-2-å®ç°é«˜å¯ç”¨" class="router-link-active router-link-exact-active">5.2.å®ç°é«˜å¯ç”¨</a></li></ul></nav><h1 id="_0-å­¦ä¹ ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#_0-å­¦ä¹ ç›®æ ‡" aria-hidden="true">#</a> 0.å­¦ä¹ ç›®æ ‡</h1><h1 id="_1-åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_1-åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜" aria-hidden="true">#</a> 1.åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜</h1><h2 id="_1-1-æœ¬åœ°äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#_1-1-æœ¬åœ°äº‹åŠ¡" aria-hidden="true">#</a> 1.1.æœ¬åœ°äº‹åŠ¡</h2><p>æœ¬åœ°äº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯ä¼ ç»Ÿçš„<strong>å•æœºäº‹åŠ¡</strong>ã€‚åœ¨ä¼ ç»Ÿæ•°æ®åº“äº‹åŠ¡ä¸­ï¼Œå¿…é¡»è¦æ»¡è¶³å››ä¸ªåŸåˆ™ï¼š</p><p><img src="/MyBlog/assets/image-20210724165045186-f18efcde.png" alt="image-20210724165045186"></p><h2 id="_1-2-åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#_1-2-åˆ†å¸ƒå¼äº‹åŠ¡" aria-hidden="true">#</a> 1.2.åˆ†å¸ƒå¼äº‹åŠ¡</h2><p><strong>åˆ†å¸ƒå¼äº‹åŠ¡</strong>ï¼Œå°±æ˜¯æŒ‡ä¸æ˜¯åœ¨å•ä¸ªæœåŠ¡æˆ–å•ä¸ªæ•°æ®åº“æ¶æ„ä¸‹ï¼Œäº§ç”Ÿçš„äº‹åŠ¡ï¼Œä¾‹å¦‚ï¼š</p><ul><li>è·¨æ•°æ®æºçš„åˆ†å¸ƒå¼äº‹åŠ¡</li><li>è·¨æœåŠ¡çš„åˆ†å¸ƒå¼äº‹åŠ¡</li><li>ç»¼åˆæƒ…å†µ</li></ul><p>åœ¨æ•°æ®åº“æ°´å¹³æ‹†åˆ†ã€æœåŠ¡å‚ç›´æ‹†åˆ†ä¹‹åï¼Œä¸€ä¸ªä¸šåŠ¡æ“ä½œé€šå¸¸è¦è·¨å¤šä¸ªæ•°æ®åº“ã€æœåŠ¡æ‰èƒ½å®Œæˆã€‚ä¾‹å¦‚ç”µå•†è¡Œä¸šä¸­æ¯”è¾ƒå¸¸è§çš„ä¸‹å•ä»˜æ¬¾æ¡ˆä¾‹ï¼ŒåŒ…æ‹¬ä¸‹é¢å‡ ä¸ªè¡Œä¸ºï¼š</p><ul><li>åˆ›å»ºæ–°è®¢å•</li><li>æ‰£å‡å•†å“åº“å­˜</li><li>ä»ç”¨æˆ·è´¦æˆ·ä½™é¢æ‰£é™¤é‡‘é¢</li></ul><p>å®Œæˆä¸Šé¢çš„æ“ä½œéœ€è¦è®¿é—®ä¸‰ä¸ªä¸åŒçš„å¾®æœåŠ¡å’Œä¸‰ä¸ªä¸åŒçš„æ•°æ®åº“ã€‚</p><p><img src="/MyBlog/assets/image-20210724165338958-a67810b1.png" alt="image-20210724165338958"></p><p>è®¢å•çš„åˆ›å»ºã€åº“å­˜çš„æ‰£å‡ã€è´¦æˆ·æ‰£æ¬¾åœ¨æ¯ä¸€ä¸ªæœåŠ¡å’Œæ•°æ®åº“å†…æ˜¯ä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ï¼Œå¯ä»¥ä¿è¯ ACID åŸåˆ™ã€‚</p><p>ä½†æ˜¯å½“æˆ‘ä»¬æŠŠä¸‰ä»¶äº‹æƒ…çœ‹åšä¸€ä¸ª&quot;ä¸šåŠ¡&quot;ï¼Œè¦æ»¡è¶³ä¿è¯â€œä¸šåŠ¡â€çš„åŸå­æ€§ï¼Œè¦ä¹ˆæ‰€æœ‰æ“ä½œå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œä¸å…è®¸å‡ºç°éƒ¨åˆ†æˆåŠŸéƒ¨åˆ†å¤±è´¥çš„ç°è±¡ï¼Œè¿™å°±æ˜¯<strong>åˆ†å¸ƒå¼ç³»ç»Ÿä¸‹çš„äº‹åŠ¡</strong>äº†ã€‚</p><p>æ­¤æ—¶ ACID éš¾ä»¥æ»¡è¶³ï¼Œè¿™æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡è¦è§£å†³çš„é—®é¢˜</p><h2 id="_1-3-æ¼”ç¤ºåˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_1-3-æ¼”ç¤ºåˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜" aria-hidden="true">#</a> 1.3.æ¼”ç¤ºåˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜</h2><p>æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥æ¼”ç¤ºåˆ†å¸ƒå¼äº‹åŠ¡çš„é—®é¢˜ï¼š</p><p>1ï¼‰<strong>åˆ›å»ºæ•°æ®åº“ï¼Œåä¸º seata_demoï¼Œç„¶åå¯¼å…¥è¯¾å‰èµ„æ–™æä¾›çš„ SQL æ–‡ä»¶ï¼š</strong></p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJUAAABICAYAAAD/Are+AAAL7klEQVR4nO2dz28cx5XHP6+6e36IFKWRKTmyfthJRCurCF7sboIEQ9gBdp2D7IvhBDnEEJAAMXnYXVj7h2RBAXuxjgaMBDosdDEJJEBuVva2cKLIQEjbSpz4h2SJsvhjyJnuejlU90zPL3IUtinS3V+hqZnq+vFe9Zf1Xr2qaoqqKgUKZAj/UQuwm1BVrLWICCKSab2qijEm03r3K3JFqunpaV5++WUajQZRFAExIdwH9z31OY0IIC6T5FMFtYpnhMO1w9RqNV599dUvWIu9j1yRqlar8eyzzzI5OUmlWgUcqUhxqJ9Ug8lmAQGiMGL5/jJrq6ssLy/z5ptv8sorr3yxiuxx5IpUzWaTKIqo1WrUarXOKAVdxHJ06dxQQLozuDQRojBERUGVWq3GzZs3eeONN7h48WJuTaF51ALsJqy1WGuBjh/Ue1lVrNrUlU6PL5u6VMEq1WqV48ePc/bsWSYmJrh69WrbxOYNuSJV4qgPI9ROLmstlUqFEydOcPr0acbGx7l48SIbm5uPWu1dR65IBT1WLqsKxBE2DEM8z+PEiROcOnWKn/z0p1y7do319cZOW91XyJVPpQwh1Y6Z5kIUnucBEAQBjx87hojw3z//OZ6B55//PrXakZ02tC+QK1JJfGnq6pv5jQBNfRIRWs0md+7cQUSczxb7Xs1mk3//j//k88/X+N3v/p/vfe/fslJlTyNXpHJxpXhu1ztsSfxD2l9Sk0DtfNF0kmKMRxhF3Lp1i/fee69vxtdstUDB857IXqE9ilyRChRV2x2GEgERFziwccxKLd2xhgHDWVJGhCeffJKjR48RqY2Z6yhojOEPN//A0uIivp+frs6Ppjg+WJxpUkCTUSWKiB6sY+8+wG40seubaGMDWhEaRn0Rdgk8KAfgeZhqCb82wZEjB5HxA4hnAEViP+uDWx/kLl6VK1KhCtZCPMIQRjT//CnNG+/T+uA20b0H2GYTXd9EG5uOVFFEr7clvg8lHzwfUy3hTYxhauP4T0xS/sZpymdPQhA438rmb70+X6RKQYzBrq3y4Be/ofnuLUekMAKrqLWOfIkn38sL40wmCGIEPIP4bvSqfPMpvJ+9SPDEZCeOtfvqPVLkk1Sx322bIc3fv094+x5SKcVmKiaK8btXawbVkdAlitAwxC6v0Cz5RKsNAmDrCr68yBeptO1Hd2AE8T0kjjGNjK5ZovtffA+MySuX2sh3RD3eujJoq8vOGsmbwetGvkaq3vCAEUylRNSKwLTcaNX2l0atMvbBIotuthyhjOnPk4n8+wM5I1UKqki1TPW5f0QqJew9F07QjSYaRYhsY8ZiokjgI+USplpCxipUnvk63sR4kmkXFNl7yC2p1CqmWmLiB89R/fY3aL57i9af7xB9eg+7uoZGFg3tYFNmjItHlQK8w+P4jx8hOHWU4KnHCU4dw0yMuUAq6Z2lu6reI0VuSYUAzZDWX+7gHz1EcPJbaLJM0wqJHqxhVxoDSSXVMma8ijlQQTyDqiJGsCvrhB/dxfcMcmg8d0HPBPkiVbyarLg4VbiyzvL//C8glM6eJHjyK5jaGN5YFRmrImMVF15Iise+kgK6sUm4so5dXiH85B7hh7fZvPEnpOJT+68f4h+ZiGebSt6GqlyRyi3TpNeJleizB0R37xN+fBdTuQm+50yb7ztCSSdsIIEPRtBWiLZCZ+LCEG2G6GaLaHkV/+TROGrfaTNvyBWp3IJx54E7oniIMWizSbSx2Qlk9Y4w8cIzQttfaqcbd4ln3Lpg2uzp0F1cX1rki1SDYAwaWRew87eLoqcI1ptuFRuGqFW3NijSNWLlCbkllVrFO3iAiR8/T+O3v2fz3Q+xyyuOCEbaSzZ9JNP4fE0yklkLvo8/eZjyv5yl+p1z+I8d6sz+yNs4lUNSaWLarCKVEuMvfIfyP5ym+f7HhB99hq6uYxubboG5FbnAZgpiBCkFLj5VLWPGK5iDY3iThwi+epzg1LH2nvWuPX45Qq5I1XUg1Ah2rUHj/97FHBqjfO405fNPQSty218aTYjibTLp4UpAgphUlRJSLbkNe6vrhB/fo/XBJ5Sf+aqb/eUUOSNV8s+NOLq2wYNf/gZVi//EY3iHxzEHxzDVMpQDpOQ7xztNKmvRVtRelrGr69jP14jur7oZZLWMf/Ixgscm2uWSffF5Qa5IZYnfiUDnQduVdaLb9wj/+pkzbYHvHG3PuH1SnqGLVMlan6qLuDdbaOygs9HEP/14fMJC2rPIEOUh90Dsa+SKVH1QUGtRXFQAVRdzaoadPMNmgz1Dj4gjbUK4dMYGUMpS7j2OnJEqYUjHrzIHKlg/MXHxXC19zmGA3ZKBX9y+LHOgDA+7N+tLhnyRKopcBDyOCHjjVQ7+8Dka128S3l52W1fCCI1C56THW1q6RqUk3OAZt1XGM+4ARKWEf/wI1e9+k+Ar8aHRvh2B+UCuSJUs0wBoZJFywNi//jOVf5oiuvs50b0V7EoDu9ZwW2A2WujmJhp1mCGBh/g+UgncgnK8uOxNHsI7ehjv0BhSCTpxKgEaQHm3tX10yBWpuuEeuhmrYMarBCcmnT8VxseyItvefNdlA42AGMQTt05o4qWZUuAWnFVd+balVYgkV3ts80WqxO6lvCIN4/mgCJR8TDl4+J2fcTBVo3DQbeeqa7BD4fcPckWqJJg+kDKqEGW/7dfV1yJPXZ0fTWOICL7n4ftuhvb3nlFIH6YZeh939D1v4c9ckUpECMMW9x/cd0FNTSLs7qEL0r1mJ8NJp72HTGPeJGVFBBVYX193+XN0wiZXpCoFAa1mk6WlJUrlckwYRa1iUQzi3rMgxJFM90IPoI9dyXJP+lb3aWRFLXx6+9P2m/byAsnTy/nfeecdfvXrXxN4Hl76GJUxBLglHAF8BfUUfI+tfu+S910lHwyCn7aJAaAGPyjz3Xqdr3/ta9krtQeRK1Il7zYAdvVQgqpm/gcB9jJyRaoCu4McheQK7BYKUhXIHAWpCmSOglQFMkdBqqFY4vK0INOXWXrUouwCFmaz03WfkWqBWRGmL+fhMe9f7C9SLf2RG49ahgLbYn+RqsC+QIakcqYpiRz3maily0yn7svsQl8NS5enO/d78izMCjJ1ievA9UtTfW1sVXY08We7yg8tvo0eC7OCyCwLPflctthP21LG7n7cUpYhZfr6vk+3L9hf1EwwrzOgzMy3Uxbn5nS+80XroPW5xaH5dX4mdX9QmSFpo5bdUvwZpSf//Ex8CqI+p+3UEfToL7eoc/XOn8NpZx0k4wA5BqZ1C79134+o2/xMj647QDakijsozZHUTdepvQLPzyjUdfhzH1BuZLIMaXOrvH3Cxw+rlxzb6OEeWI9e8YPtbqO3vmFyJHXO6ODuHaHvt9UtW1JlY/7OPM154MoLs/SN1EtvcfU61H/0ImfS6VPnqHOdm4uDKlxgVqa4dP3vEeYhyybynZvquTHFufqAfCPpcZ6nz/TmgZmXLqQSz/D0+VHkgAsvzQA3+OMgWzVK32+nW8bIyKe6wOuLc9S5wgsiiEzTa9YTP6h9xf5RG112/xovqTI/M2Lz25bt8WUk9ntSOc53sWA4ttVjhxgux7BfwO37flTdskJ2jvqZ13hbFV2co851Lk11KzczP/jPxL5+AWCB2ReuUJ9bjNNf58KwdvowStkzvPZ2b9sP08aoeuwcNwYORwB1BgxiDtv0/W4j+5DCmdd4O1bu6ltLcOZFflSHK9e2mMLE8afu36gFrl0Zob2dlIWO+eiVLzYdnXwj6LETxPVfHzAcLVy7Qp9JHVhHb9+PqFvWyMAvU12c05m+GUvKWR00g1mc03rbMRxlFjU43+hltxK/3j0zS8/Y0nVsq8cQp3qIM93nHG8x++uTLSm3Td+Pqtvem/1p6kEyYPbjMqTuD1Ag7vjkfn1ucbCiqXrqnZ4brewWSDq/I/9Ws73heuyIVAN06e/Lfrm26/tu3dCZ+SF1ZESqYudnLrHE5ekpLjHH4tuvkbUbXyzTFMgcBakKZI6CVAUyR+FTFcgcxUhVIHMUpCqQOQpSFcgcBakKZI6CVAUyR0GqApnjb/WF7prJtyDfAAAAAElFTkSuQmCC" alt="image-20210724165634571"></p><p>2ï¼‰<strong>å¯¼å…¥è¯¾å‰èµ„æ–™æä¾›çš„å¾®æœåŠ¡ï¼š</strong></p><p><img src="/MyBlog/assets/image-20210724165709994-b3465657.png" alt="image-20210724165709994"></p><p>å¾®æœåŠ¡ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/MyBlog/assets/image-20210724165729273-a0bf0383.png" alt="image-20210724165729273"></p><p>å…¶ä¸­ï¼š</p><p>seata-demoï¼šçˆ¶å·¥ç¨‹ï¼Œè´Ÿè´£ç®¡ç†é¡¹ç›®ä¾èµ–</p><ul><li>account-serviceï¼šè´¦æˆ·æœåŠ¡ï¼Œè´Ÿè´£ç®¡ç†ç”¨æˆ·çš„èµ„é‡‘è´¦æˆ·ã€‚æä¾›æ‰£å‡ä½™é¢çš„æ¥å£</li><li>storage-serviceï¼šåº“å­˜æœåŠ¡ï¼Œè´Ÿè´£ç®¡ç†å•†å“åº“å­˜ã€‚æä¾›æ‰£å‡åº“å­˜çš„æ¥å£</li><li>order-serviceï¼šè®¢å•æœåŠ¡ï¼Œè´Ÿè´£ç®¡ç†è®¢å•ã€‚åˆ›å»ºè®¢å•æ—¶ï¼Œéœ€è¦è°ƒç”¨ account-service å’Œ storage-service</li></ul><p><strong>3ï¼‰å¯åŠ¨ nacosã€æ‰€æœ‰å¾®æœåŠ¡</strong></p><p><strong>4ï¼‰æµ‹è¯•ä¸‹å•åŠŸèƒ½ï¼Œå‘å‡º Post è¯·æ±‚ï¼š</strong></p><p>è¯·æ±‚å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">--location</span> <span class="token parameter variable">--request</span> POST <span class="token string">&#39;http://localhost:8082/order?userId=user202103032042012&amp;commodityCode=100202003032041&amp;count=20&amp;money=200&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚å›¾ï¼š</p><p><img src="/MyBlog/assets/image-20210724170113404-53483dd0.png" alt="image-20210724170113404"></p><p>æµ‹è¯•å‘ç°ï¼Œå½“åº“å­˜ä¸è¶³æ—¶ï¼Œå¦‚æœä½™é¢å·²ç»æ‰£å‡ï¼Œå¹¶ä¸ä¼šå›æ»šï¼Œå‡ºç°äº†åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ã€‚</p><h1 id="_2-ç†è®ºåŸºç¡€" tabindex="-1"><a class="header-anchor" href="#_2-ç†è®ºåŸºç¡€" aria-hidden="true">#</a> 2.ç†è®ºåŸºç¡€</h1><p>è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œéœ€è¦ä¸€äº›åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºç¡€çŸ¥è¯†ä½œä¸ºç†è®ºæŒ‡å¯¼ã€‚</p><h2 id="_2-1-cap-å®šç†" tabindex="-1"><a class="header-anchor" href="#_2-1-cap-å®šç†" aria-hidden="true">#</a> 2.1.CAP å®šç†</h2><p>1998 å¹´ï¼ŒåŠ å·å¤§å­¦çš„è®¡ç®—æœºç§‘å­¦å®¶ Eric Brewer æå‡ºï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿæœ‰ä¸‰ä¸ªæŒ‡æ ‡ã€‚</p><blockquote><ul><li>Consistencyï¼ˆä¸€è‡´æ€§ï¼‰</li><li>Availabilityï¼ˆå¯ç”¨æ€§ï¼‰</li><li>Partition tolerance ï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰</li></ul></blockquote><p><img src="/MyBlog/assets/image-20210724170517944-d453e535.png" alt="image-20210724170517944"></p><p>å®ƒä»¬çš„ç¬¬ä¸€ä¸ªå­—æ¯åˆ†åˆ«æ˜¯ Cã€Aã€Pã€‚</p><p>Eric Brewer è¯´ï¼Œè¿™ä¸‰ä¸ªæŒ‡æ ‡ä¸å¯èƒ½åŒæ—¶åšåˆ°ã€‚è¿™ä¸ªç»“è®ºå°±å«åš CAP å®šç†ã€‚</p><h3 id="_2-1-1-ä¸€è‡´æ€§" tabindex="-1"><a class="header-anchor" href="#_2-1-1-ä¸€è‡´æ€§" aria-hidden="true">#</a> 2.1.1.ä¸€è‡´æ€§</h3><p>Consistencyï¼ˆä¸€è‡´æ€§ï¼‰ï¼šç”¨æˆ·è®¿é—®åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä»»æ„èŠ‚ç‚¹ï¼Œå¾—åˆ°çš„æ•°æ®å¿…é¡»ä¸€è‡´ã€‚</p><p>æ¯”å¦‚ç°åœ¨åŒ…å«ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­çš„åˆå§‹æ•°æ®æ˜¯ä¸€è‡´çš„ï¼š</p><p><img src="/MyBlog/assets/image-20210724170704694-390d631c.png" alt="image-20210724170704694"></p><p>å½“æˆ‘ä»¬ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®æ—¶ï¼Œä¸¤è€…çš„æ•°æ®äº§ç”Ÿäº†å·®å¼‚ï¼š</p><p><img src="/MyBlog/assets/image-20210724170735847-93d2f0f2.png" alt="image-20210724170735847"></p><p>è¦æƒ³ä¿ä½ä¸€è‡´æ€§ï¼Œå°±å¿…é¡»å®ç° node01 åˆ° node02 çš„æ•°æ® åŒæ­¥ï¼š</p><p><img src="/MyBlog/assets/image-20210724170834855-d6f4cc11.png" alt="image-20210724170834855"></p><h3 id="_2-1-2-å¯ç”¨æ€§" tabindex="-1"><a class="header-anchor" href="#_2-1-2-å¯ç”¨æ€§" aria-hidden="true">#</a> 2.1.2.å¯ç”¨æ€§</h3><p>Availability ï¼ˆå¯ç”¨æ€§ï¼‰ï¼šç”¨æˆ·è®¿é—®é›†ç¾¤ä¸­çš„ä»»æ„å¥åº·èŠ‚ç‚¹ï¼Œå¿…é¡»èƒ½å¾—åˆ°å“åº”ï¼Œè€Œä¸æ˜¯è¶…æ—¶æˆ–æ‹’ç»ã€‚</p><p>å¦‚å›¾ï¼Œæœ‰ä¸‰ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œè®¿é—®ä»»ä½•ä¸€ä¸ªéƒ½å¯ä»¥åŠæ—¶å¾—åˆ°å“åº”ï¼š</p><p><img src="/MyBlog/assets/image-20210724170932072-16f46965.png" alt="image-20210724170932072"></p><p>å½“æœ‰éƒ¨åˆ†èŠ‚ç‚¹å› ä¸ºç½‘ç»œæ•…éšœæˆ–å…¶å®ƒåŸå› æ— æ³•è®¿é—®æ—¶ï¼Œä»£è¡¨èŠ‚ç‚¹ä¸å¯ç”¨ï¼š</p><p><img src="/MyBlog/assets/image-20210724171007516-35e96a07.png" alt="image-20210724171007516"></p><h3 id="_2-1-3-åˆ†åŒºå®¹é”™" tabindex="-1"><a class="header-anchor" href="#_2-1-3-åˆ†åŒºå®¹é”™" aria-hidden="true">#</a> 2.1.3.åˆ†åŒºå®¹é”™</h3><p><strong>Partitionï¼ˆåˆ†åŒºï¼‰</strong>ï¼šå› ä¸ºç½‘ç»œæ•…éšœæˆ–å…¶å®ƒåŸå› å¯¼è‡´åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„éƒ¨åˆ†èŠ‚ç‚¹ä¸å…¶å®ƒèŠ‚ç‚¹å¤±å»è¿æ¥ï¼Œå½¢æˆç‹¬ç«‹åˆ†åŒºã€‚</p><p><img src="/MyBlog/assets/image-20210724171041210-fc814370.png" alt="image-20210724171041210"></p><p><strong>Toleranceï¼ˆå®¹é”™ï¼‰</strong>ï¼šåœ¨é›†ç¾¤å‡ºç°åˆ†åŒºæ—¶ï¼Œæ•´ä¸ªç³»ç»Ÿä¹Ÿè¦æŒç»­å¯¹å¤–æä¾›æœåŠ¡</p><h3 id="_2-1-4-çŸ›ç›¾" tabindex="-1"><a class="header-anchor" href="#_2-1-4-çŸ›ç›¾" aria-hidden="true">#</a> 2.1.4.çŸ›ç›¾</h3><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿé—´çš„ç½‘ç»œä¸èƒ½ 100%ä¿è¯å¥åº·ï¼Œä¸€å®šä¼šæœ‰æ•…éšœçš„æ—¶å€™ï¼Œè€ŒæœåŠ¡æœ‰å¿…é¡»å¯¹å¤–ä¿è¯æœåŠ¡ã€‚å› æ­¤ Partition Tolerance ä¸å¯é¿å…ã€‚</p><p>å½“èŠ‚ç‚¹æ¥æ”¶åˆ°æ–°çš„æ•°æ®å˜æ›´æ—¶ï¼Œå°±ä¼šå‡ºç°é—®é¢˜äº†ï¼š</p><p><img src="/MyBlog/assets/image-20210724171546472-3990aafe.png" alt="image-20210724171546472"></p><p>å¦‚æœæ­¤æ—¶è¦ä¿è¯<strong>ä¸€è‡´æ€§</strong>ï¼Œå°±å¿…é¡»ç­‰å¾…ç½‘ç»œæ¢å¤ï¼Œå®Œæˆæ•°æ®åŒæ­¥åï¼Œæ•´ä¸ªé›†ç¾¤æ‰å¯¹å¤–æä¾›æœåŠ¡ï¼ŒæœåŠ¡å¤„äºé˜»å¡çŠ¶æ€ï¼Œä¸å¯ç”¨ã€‚</p><p>å¦‚æœæ­¤æ—¶è¦ä¿è¯<strong>å¯ç”¨æ€§</strong>ï¼Œå°±ä¸èƒ½ç­‰å¾…ç½‘ç»œæ¢å¤ï¼Œé‚£ node01ã€node02 ä¸ node03 ä¹‹é—´å°±ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ P ä¸€å®šä¼šå‡ºç°çš„æƒ…å†µä¸‹ï¼ŒA å’Œ C ä¹‹é—´åªèƒ½å®ç°ä¸€ä¸ªã€‚</p><h2 id="_2-2-base-ç†è®º" tabindex="-1"><a class="header-anchor" href="#_2-2-base-ç†è®º" aria-hidden="true">#</a> 2.2.BASE ç†è®º</h2><p>BASE ç†è®ºæ˜¯å¯¹ CAP çš„ä¸€ç§è§£å†³æ€è·¯ï¼ŒåŒ…å«ä¸‰ä¸ªæ€æƒ³ï¼š</p><ul><li><strong>Basically Available</strong> <strong>ï¼ˆåŸºæœ¬å¯ç”¨ï¼‰</strong>ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿåœ¨å‡ºç°æ•…éšœæ—¶ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ï¼Œå³ä¿è¯æ ¸å¿ƒå¯ç”¨ã€‚</li><li>**Soft Stateï¼ˆè½¯çŠ¶æ€ï¼‰ï¼š**åœ¨ä¸€å®šæ—¶é—´å†…ï¼Œå…è®¸å‡ºç°ä¸­é—´çŠ¶æ€ï¼Œæ¯”å¦‚ä¸´æ—¶çš„ä¸ä¸€è‡´çŠ¶æ€ã€‚</li><li><strong>Eventually Consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰</strong>ï¼šè™½ç„¶æ— æ³•ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œä½†æ˜¯åœ¨è½¯çŠ¶æ€ç»“æŸåï¼Œæœ€ç»ˆè¾¾åˆ°æ•°æ®ä¸€è‡´ã€‚</li></ul><h2 id="_2-3-è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ€è·¯" tabindex="-1"><a class="header-anchor" href="#_2-3-è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ€è·¯" aria-hidden="true">#</a> 2.3.è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ€è·¯</h2><p>åˆ†å¸ƒå¼äº‹åŠ¡æœ€å¤§çš„é—®é¢˜æ˜¯å„ä¸ªå­äº‹åŠ¡çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œå› æ­¤å¯ä»¥å€Ÿé‰´ CAP å®šç†å’Œ BASE ç†è®ºï¼Œæœ‰ä¸¤ç§è§£å†³æ€è·¯ï¼š</p><ul><li><p>AP æ¨¡å¼ï¼šå„å­äº‹åŠ¡åˆ†åˆ«æ‰§è¡Œå’Œæäº¤ï¼Œå…è®¸å‡ºç°ç»“æœä¸ä¸€è‡´ï¼Œç„¶åé‡‡ç”¨å¼¥è¡¥æªæ–½æ¢å¤æ•°æ®å³å¯ï¼Œå®ç°æœ€ç»ˆä¸€è‡´ã€‚</p></li><li><p>CP æ¨¡å¼ï¼šå„ä¸ªå­äº‹åŠ¡æ‰§è¡Œåäº’ç›¸ç­‰å¾…ï¼ŒåŒæ—¶æäº¤ï¼ŒåŒæ—¶å›æ»šï¼Œè¾¾æˆå¼ºä¸€è‡´ã€‚ä½†äº‹åŠ¡ç­‰å¾…è¿‡ç¨‹ä¸­ï¼Œå¤„äºå¼±å¯ç”¨çŠ¶æ€ã€‚</p></li></ul><p>ä½†ä¸ç®¡æ˜¯å“ªä¸€ç§æ¨¡å¼ï¼Œéƒ½éœ€è¦åœ¨å­ç³»ç»Ÿäº‹åŠ¡ä¹‹é—´äº’ç›¸é€šè®¯ï¼Œåè°ƒäº‹åŠ¡çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯éœ€è¦ä¸€ä¸ª<strong>äº‹åŠ¡åè°ƒè€…(TC)</strong>ï¼š</p><p><img src="/MyBlog/assets/image-20210724172123567-3f101abf.png" alt="image-20210724172123567"></p><p>è¿™é‡Œçš„å­ç³»ç»Ÿäº‹åŠ¡ï¼Œç§°ä¸º<strong>åˆ†æ”¯äº‹åŠ¡</strong>ï¼›æœ‰å…³è”çš„å„ä¸ªåˆ†æ”¯äº‹åŠ¡åœ¨ä¸€èµ·ç§°ä¸º<strong>å…¨å±€äº‹åŠ¡</strong>ã€‚</p><h1 id="_3-åˆè¯†-seata" tabindex="-1"><a class="header-anchor" href="#_3-åˆè¯†-seata" aria-hidden="true">#</a> 3.åˆè¯† Seata</h1><p>Seata æ˜¯ 2019 å¹´ 1 æœˆä»½èš‚èšé‡‘æœå’Œé˜¿é‡Œå·´å·´å…±åŒå¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‚è‡´åŠ›äºæä¾›é«˜æ€§èƒ½å’Œç®€å•æ˜“ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡æœåŠ¡ï¼Œä¸ºç”¨æˆ·æ‰“é€ ä¸€ç«™å¼çš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆã€‚</p><p>å®˜ç½‘åœ°å€ï¼šhttp://seata.io/ï¼Œå…¶ä¸­çš„æ–‡æ¡£ã€æ’­å®¢ä¸­æä¾›äº†å¤§é‡çš„ä½¿ç”¨è¯´æ˜ã€æºç åˆ†æã€‚</p><p><img src="/MyBlog/assets/image-20210724172225817-67b38bf2.png" alt="image-20210724172225817"></p><h2 id="_3-1-seata-çš„æ¶æ„" tabindex="-1"><a class="header-anchor" href="#_3-1-seata-çš„æ¶æ„" aria-hidden="true">#</a> 3.1.Seata çš„æ¶æ„</h2><p>Seata äº‹åŠ¡ç®¡ç†ä¸­æœ‰ä¸‰ä¸ªé‡è¦çš„è§’è‰²ï¼š</p><ul><li><p><strong>TC (Transaction Coordinator) -</strong> **äº‹åŠ¡åè°ƒè€…ï¼š**ç»´æŠ¤å…¨å±€å’Œåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€ï¼Œåè°ƒå…¨å±€äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚</p></li><li><p><strong>TM (Transaction Manager) -</strong> **äº‹åŠ¡ç®¡ç†å™¨ï¼š**å®šä¹‰å…¨å±€äº‹åŠ¡çš„èŒƒå›´ã€å¼€å§‹å…¨å±€äº‹åŠ¡ã€æäº¤æˆ–å›æ»šå…¨å±€äº‹åŠ¡ã€‚</p></li><li><p><strong>RM (Resource Manager) -</strong> **èµ„æºç®¡ç†å™¨ï¼š**ç®¡ç†åˆ†æ”¯äº‹åŠ¡å¤„ç†çš„èµ„æºï¼Œä¸ TC äº¤è°ˆä»¥æ³¨å†Œåˆ†æ”¯äº‹åŠ¡å’ŒæŠ¥å‘Šåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€ï¼Œå¹¶é©±åŠ¨åˆ†æ”¯äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚</p></li></ul><p>æ•´ä½“çš„æ¶æ„å¦‚å›¾ï¼š</p><p><img src="/MyBlog/assets/image-20210724172326452-564025d5.png" alt="image-20210724172326452"></p><p>Seata åŸºäºä¸Šè¿°æ¶æ„æä¾›äº†å››ç§ä¸åŒçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>XA æ¨¡å¼ï¼šå¼ºä¸€è‡´æ€§åˆ†é˜¶æ®µäº‹åŠ¡æ¨¡å¼ï¼Œç‰ºç‰²äº†ä¸€å®šçš„å¯ç”¨æ€§ï¼Œæ— ä¸šåŠ¡ä¾µå…¥</li><li>TCC æ¨¡å¼ï¼šæœ€ç»ˆä¸€è‡´çš„åˆ†é˜¶æ®µäº‹åŠ¡æ¨¡å¼ï¼Œæœ‰ä¸šåŠ¡ä¾µå…¥</li><li>AT æ¨¡å¼ï¼šæœ€ç»ˆä¸€è‡´çš„åˆ†é˜¶æ®µäº‹åŠ¡æ¨¡å¼ï¼Œæ— ä¸šåŠ¡ä¾µå…¥ï¼Œä¹Ÿæ˜¯ Seata çš„é»˜è®¤æ¨¡å¼</li><li>SAGA æ¨¡å¼ï¼šé•¿äº‹åŠ¡æ¨¡å¼ï¼Œæœ‰ä¸šåŠ¡ä¾µå…¥</li></ul><p>æ— è®ºå“ªç§æ–¹æ¡ˆï¼Œéƒ½ç¦»ä¸å¼€ TCï¼Œä¹Ÿå°±æ˜¯äº‹åŠ¡çš„åè°ƒè€…ã€‚</p><h2 id="_3-2-éƒ¨ç½²-tc-æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_3-2-éƒ¨ç½²-tc-æœåŠ¡" aria-hidden="true">#</a> 3.2.éƒ¨ç½² TC æœåŠ¡</h2><p>å‚è€ƒè¯¾å‰èµ„æ–™æä¾›çš„æ–‡æ¡£ã€Š seata çš„éƒ¨ç½²å’Œé›†æˆ.md ã€‹ï¼š</p><p><img src="/MyBlog/assets/image-20210724172549013-d11aadfa.png" alt="image-20210724172549013"></p><h2 id="_3-3-å¾®æœåŠ¡é›†æˆ-seata" tabindex="-1"><a class="header-anchor" href="#_3-3-å¾®æœåŠ¡é›†æˆ-seata" aria-hidden="true">#</a> 3.3.å¾®æœåŠ¡é›†æˆ Seata</h2><p>æˆ‘ä»¬ä»¥ order-service ä¸ºä¾‹æ¥æ¼”ç¤ºã€‚</p><h3 id="_3-3-1-å¼•å…¥ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_3-3-1-å¼•å…¥ä¾èµ–" aria-hidden="true">#</a> 3.3.1.å¼•å…¥ä¾èµ–</h3><p>é¦–å…ˆï¼Œåœ¨ order-service ä¸­å¼•å…¥ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--seata--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-seata<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--ç‰ˆæœ¬è¾ƒä½ï¼Œ1.3.0ï¼Œå› æ­¤æ’é™¤--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>seata-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.seata<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.seata<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>seata-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--seata starter é‡‡ç”¨1.4.2ç‰ˆæœ¬--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${seata.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-2-é…ç½®-tc-åœ°å€" tabindex="-1"><a class="header-anchor" href="#_3-3-2-é…ç½®-tc-åœ°å€" aria-hidden="true">#</a> 3.3.2.é…ç½® TC åœ°å€</h3><p>åœ¨ order-service ä¸­çš„ application.yml ä¸­ï¼Œé…ç½® TC æœåŠ¡ä¿¡æ¯ï¼Œé€šè¿‡æ³¨å†Œä¸­å¿ƒ nacosï¼Œç»“åˆæœåŠ¡åç§°è·å– TC åœ°å€ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">seata</span><span class="token punctuation">:</span>
  <span class="token key atrule">registry</span><span class="token punctuation">:</span> <span class="token comment"># TCæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„é…ç½®ï¼Œå¾®æœåŠ¡æ ¹æ®è¿™äº›ä¿¡æ¯å»æ³¨å†Œä¸­å¿ƒè·å–tcæœåŠ¡åœ°å€</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> nacos <span class="token comment"># æ³¨å†Œä¸­å¿ƒç±»å‹ nacos</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment"># nacosåœ°å€</span>
      <span class="token key atrule">namespace</span><span class="token punctuation">:</span> <span class="token string">&#39;&#39;</span> <span class="token comment"># namespaceï¼Œé»˜è®¤ä¸ºç©º</span>
      <span class="token key atrule">group</span><span class="token punctuation">:</span> DEFAULT_GROUP <span class="token comment"># åˆ†ç»„ï¼Œé»˜è®¤æ˜¯DEFAULT_GROUP</span>
      <span class="token key atrule">application</span><span class="token punctuation">:</span> seata<span class="token punctuation">-</span>tc<span class="token punctuation">-</span>server <span class="token comment"># seataæœåŠ¡åç§°</span>
      <span class="token key atrule">username</span><span class="token punctuation">:</span> nacos
      <span class="token key atrule">password</span><span class="token punctuation">:</span> nacos
  <span class="token key atrule">tx-service-group</span><span class="token punctuation">:</span> seata<span class="token punctuation">-</span>demo <span class="token comment"># äº‹åŠ¡ç»„åç§°</span>
  <span class="token key atrule">service</span><span class="token punctuation">:</span>
    <span class="token key atrule">vgroup-mapping</span><span class="token punctuation">:</span> <span class="token comment"># äº‹åŠ¡ç»„ä¸clusterçš„æ˜ å°„å…³ç³»</span>
      <span class="token key atrule">seata-demo</span><span class="token punctuation">:</span> SH
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾®æœåŠ¡å¦‚ä½•æ ¹æ®è¿™äº›é…ç½®å¯»æ‰¾ TC çš„åœ°å€å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬çŸ¥é“æ³¨å†Œåˆ° Nacos ä¸­çš„å¾®æœåŠ¡ï¼Œç¡®å®šä¸€ä¸ªå…·ä½“å®ä¾‹éœ€è¦å››ä¸ªä¿¡æ¯ï¼š</p><ul><li>namespaceï¼šå‘½åç©ºé—´</li><li>groupï¼šåˆ†ç»„</li><li>applicationï¼šæœåŠ¡å</li><li>clusterï¼šé›†ç¾¤å</li></ul><p>ä»¥ä¸Šå››ä¸ªä¿¡æ¯ï¼Œåœ¨åˆšæ‰çš„ yaml æ–‡ä»¶ä¸­éƒ½èƒ½æ‰¾åˆ°ï¼š</p><p><img src="/MyBlog/assets/image-20210724173654258-76213eca.png" alt="image-20210724173654258"></p><p>namespace ä¸ºç©ºï¼Œå°±æ˜¯é»˜è®¤çš„ public</p><p>ç»“åˆèµ·æ¥ï¼ŒTC æœåŠ¡çš„ä¿¡æ¯å°±æ˜¯ï¼špublic@DEFAULT_GROUP@seata-tc-server@SHï¼Œè¿™æ ·å°±èƒ½ç¡®å®š TC æœåŠ¡é›†ç¾¤äº†ã€‚ç„¶åå°±å¯ä»¥å» Nacos æ‹‰å–å¯¹åº”çš„å®ä¾‹ä¿¡æ¯äº†ã€‚</p><h3 id="_3-3-3-å…¶å®ƒæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_3-3-3-å…¶å®ƒæœåŠ¡" aria-hidden="true">#</a> 3.3.3.å…¶å®ƒæœåŠ¡</h3><p>å…¶å®ƒä¸¤ä¸ªå¾®æœåŠ¡ä¹Ÿéƒ½å‚è€ƒ order-service çš„æ­¥éª¤æ¥åšï¼Œå®Œå…¨ä¸€æ ·ã€‚</p><h1 id="_4-åŠ¨æ‰‹å®è·µ" tabindex="-1"><a class="header-anchor" href="#_4-åŠ¨æ‰‹å®è·µ" aria-hidden="true">#</a> 4.åŠ¨æ‰‹å®è·µ</h1><p>ä¸‹é¢æˆ‘ä»¬å°±ä¸€èµ·å­¦ä¹ ä¸‹ Seata ä¸­çš„å››ç§ä¸åŒçš„äº‹åŠ¡æ¨¡å¼ã€‚</p><h2 id="_4-1-xa-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_4-1-xa-æ¨¡å¼" aria-hidden="true">#</a> 4.1.XA æ¨¡å¼</h2><p>XA è§„èŒƒ æ˜¯ X/Open ç»„ç»‡å®šä¹‰çš„åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†ï¼ˆDTPï¼ŒDistributed Transaction Processingï¼‰æ ‡å‡†ï¼ŒXA è§„èŒƒ æè¿°äº†å…¨å±€çš„ TM ä¸å±€éƒ¨çš„ RM ä¹‹é—´çš„æ¥å£ï¼Œå‡ ä¹æ‰€æœ‰ä¸»æµçš„æ•°æ®åº“éƒ½å¯¹ XA è§„èŒƒ æä¾›äº†æ”¯æŒã€‚</p><h3 id="_4-1-1-ä¸¤é˜¶æ®µæäº¤" tabindex="-1"><a class="header-anchor" href="#_4-1-1-ä¸¤é˜¶æ®µæäº¤" aria-hidden="true">#</a> 4.1.1.ä¸¤é˜¶æ®µæäº¤</h3><p>XA æ˜¯è§„èŒƒï¼Œç›®å‰ä¸»æµæ•°æ®åº“éƒ½å®ç°äº†è¿™ç§è§„èŒƒï¼Œå®ç°çš„åŸç†éƒ½æ˜¯åŸºäºä¸¤é˜¶æ®µæäº¤ã€‚</p><p>æ­£å¸¸æƒ…å†µï¼š</p><p><img src="/MyBlog/assets/image-20210724174102768-090f4f4e.png" alt="image-20210724174102768"></p><p>å¼‚å¸¸æƒ…å†µï¼š</p><p><img src="/MyBlog/assets/image-20210724174234987-85fb0cf4.png" alt="image-20210724174234987"></p><p>ä¸€é˜¶æ®µï¼š</p><ul><li>äº‹åŠ¡åè°ƒè€…é€šçŸ¥æ¯ä¸ªäº‹ç‰©å‚ä¸è€…æ‰§è¡Œæœ¬åœ°äº‹åŠ¡</li><li>æœ¬åœ°äº‹åŠ¡æ‰§è¡Œå®ŒæˆåæŠ¥å‘Šäº‹åŠ¡æ‰§è¡ŒçŠ¶æ€ç»™äº‹åŠ¡åè°ƒè€…ï¼Œæ­¤æ—¶äº‹åŠ¡ä¸æäº¤ï¼Œç»§ç»­æŒæœ‰æ•°æ®åº“é”</li></ul><p>äºŒé˜¶æ®µï¼š</p><ul><li>äº‹åŠ¡åè°ƒè€…åŸºäºä¸€é˜¶æ®µçš„æŠ¥å‘Šæ¥åˆ¤æ–­ä¸‹ä¸€æ­¥æ“ä½œ <ul><li>å¦‚æœä¸€é˜¶æ®µéƒ½æˆåŠŸï¼Œåˆ™é€šçŸ¥æ‰€æœ‰äº‹åŠ¡å‚ä¸è€…ï¼Œæäº¤äº‹åŠ¡</li><li>å¦‚æœä¸€é˜¶æ®µä»»æ„ä¸€ä¸ªå‚ä¸è€…å¤±è´¥ï¼Œåˆ™é€šçŸ¥æ‰€æœ‰äº‹åŠ¡å‚ä¸è€…å›æ»šäº‹åŠ¡</li></ul></li></ul><h3 id="_4-1-2-seata-çš„-xa-æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_4-1-2-seata-çš„-xa-æ¨¡å‹" aria-hidden="true">#</a> 4.1.2.Seata çš„ XA æ¨¡å‹</h3><p>Seata å¯¹åŸå§‹çš„ XA æ¨¡å¼åšäº†ç®€å•çš„å°è£…å’Œæ”¹é€ ï¼Œä»¥é€‚åº”è‡ªå·±çš„äº‹åŠ¡æ¨¡å‹ï¼ŒåŸºæœ¬æ¶æ„å¦‚å›¾ï¼š</p><p><img src="/MyBlog/assets/image-20210724174424070-7ce14b80.png" alt="image-20210724174424070"></p><p>RM ä¸€é˜¶æ®µçš„å·¥ä½œï¼š</p><p>â€‹ â‘  æ³¨å†Œåˆ†æ”¯äº‹åŠ¡åˆ° TC</p><p>â€‹ â‘¡ æ‰§è¡Œåˆ†æ”¯ä¸šåŠ¡ sql ä½†ä¸æäº¤</p><p>â€‹ â‘¢ æŠ¥å‘Šæ‰§è¡ŒçŠ¶æ€åˆ° TC</p><p>TC äºŒé˜¶æ®µçš„å·¥ä½œï¼š</p><ul><li><p>TC æ£€æµ‹å„åˆ†æ”¯äº‹åŠ¡æ‰§è¡ŒçŠ¶æ€</p><p>a.å¦‚æœéƒ½æˆåŠŸï¼Œé€šçŸ¥æ‰€æœ‰ RM æäº¤äº‹åŠ¡</p><p>b.å¦‚æœæœ‰å¤±è´¥ï¼Œé€šçŸ¥æ‰€æœ‰ RM å›æ»šäº‹åŠ¡</p></li></ul><p>RM äºŒé˜¶æ®µçš„å·¥ä½œï¼š</p><ul><li>æ¥æ”¶ TC æŒ‡ä»¤ï¼Œæäº¤æˆ–å›æ»šäº‹åŠ¡</li></ul><h3 id="_4-1-3-ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_4-1-3-ä¼˜ç¼ºç‚¹" aria-hidden="true">#</a> 4.1.3.ä¼˜ç¼ºç‚¹</h3><p>XA æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>äº‹åŠ¡çš„å¼ºä¸€è‡´æ€§ï¼Œæ»¡è¶³ ACID åŸåˆ™ã€‚</li><li>å¸¸ç”¨æ•°æ®åº“éƒ½æ”¯æŒï¼Œå®ç°ç®€å•ï¼Œå¹¶ä¸”æ²¡æœ‰ä»£ç ä¾µå…¥</li></ul><p>XA æ¨¡å¼çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>å› ä¸ºä¸€é˜¶æ®µéœ€è¦é”å®šæ•°æ®åº“èµ„æºï¼Œç­‰å¾…äºŒé˜¶æ®µç»“æŸæ‰é‡Šæ”¾ï¼Œæ€§èƒ½è¾ƒå·®</li><li>ä¾èµ–å…³ç³»å‹æ•°æ®åº“å®ç°äº‹åŠ¡</li></ul><h3 id="_4-1-4-å®ç°-xa-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_4-1-4-å®ç°-xa-æ¨¡å¼" aria-hidden="true">#</a> 4.1.4.å®ç° XA æ¨¡å¼</h3><p>Seata çš„ starter å·²ç»å®Œæˆäº† XA æ¨¡å¼çš„è‡ªåŠ¨è£…é…ï¼Œå®ç°éå¸¸ç®€å•ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1ï¼‰ä¿®æ”¹ application.yml æ–‡ä»¶ï¼ˆæ¯ä¸ªå‚ä¸äº‹åŠ¡çš„å¾®æœåŠ¡ï¼‰ï¼Œå¼€å¯ XA æ¨¡å¼ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">seata</span><span class="token punctuation">:</span>
  <span class="token key atrule">data-source-proxy-mode</span><span class="token punctuation">:</span> XA
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2ï¼‰ç»™å‘èµ·å…¨å±€äº‹åŠ¡çš„å…¥å£æ–¹æ³•æ·»åŠ @GlobalTransactional æ³¨è§£:</p><p>æœ¬ä¾‹ä¸­æ˜¯ OrderServiceImpl ä¸­çš„ create æ–¹æ³•.</p><p><img src="/MyBlog/assets/image-20210724174859556-255a3b69.png" alt="image-20210724174859556"></p><p>3ï¼‰é‡å¯æœåŠ¡å¹¶æµ‹è¯•</p><p>é‡å¯ order-serviceï¼Œå†æ¬¡æµ‹è¯•ï¼Œå‘ç°æ— è®ºæ€æ ·ï¼Œä¸‰ä¸ªå¾®æœåŠ¡éƒ½èƒ½æˆåŠŸå›æ»šã€‚</p><h2 id="_4-2-at-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_4-2-at-æ¨¡å¼" aria-hidden="true">#</a> 4.2.AT æ¨¡å¼</h2><p>AT æ¨¡å¼åŒæ ·æ˜¯åˆ†é˜¶æ®µæäº¤çš„äº‹åŠ¡æ¨¡å‹ï¼Œä¸è¿‡ç¼ºå¼¥è¡¥äº† XA æ¨¡å‹ä¸­èµ„æºé”å®šå‘¨æœŸè¿‡é•¿çš„ç¼ºé™·ã€‚</p><h3 id="_4-2-1-seata-çš„-at-æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_4-2-1-seata-çš„-at-æ¨¡å‹" aria-hidden="true">#</a> 4.2.1.Seata çš„ AT æ¨¡å‹</h3><p>åŸºæœ¬æµç¨‹å›¾ï¼š</p><p><img src="/MyBlog/assets/image-20210724175327511-02c80254.png" alt="image-20210724175327511"></p><p>é˜¶æ®µä¸€ RM çš„å·¥ä½œï¼š</p><ul><li>æ³¨å†Œåˆ†æ”¯äº‹åŠ¡</li><li>è®°å½• undo-logï¼ˆæ•°æ®å¿«ç…§ï¼‰</li><li>æ‰§è¡Œä¸šåŠ¡ sql å¹¶æäº¤</li><li>æŠ¥å‘Šäº‹åŠ¡çŠ¶æ€</li></ul><p>é˜¶æ®µäºŒæäº¤æ—¶ RM çš„å·¥ä½œï¼š</p><ul><li>åˆ é™¤ undo-log å³å¯</li></ul><p>é˜¶æ®µäºŒå›æ»šæ—¶ RM çš„å·¥ä½œï¼š</p><ul><li>æ ¹æ® undo-log æ¢å¤æ•°æ®åˆ°æ›´æ–°å‰</li></ul><h3 id="_4-2-2-æµç¨‹æ¢³ç†" tabindex="-1"><a class="header-anchor" href="#_4-2-2-æµç¨‹æ¢³ç†" aria-hidden="true">#</a> 4.2.2.æµç¨‹æ¢³ç†</h3><p>æˆ‘ä»¬ç”¨ä¸€ä¸ªçœŸå®çš„ä¸šåŠ¡æ¥æ¢³ç†ä¸‹ AT æ¨¡å¼çš„åŸç†ã€‚</p><p>æ¯”å¦‚ï¼Œç°åœ¨åˆä¸€ä¸ªæ•°æ®åº“è¡¨ï¼Œè®°å½•ç”¨æˆ·ä½™é¢ï¼š</p><table><thead><tr><th><strong>id</strong></th><th><strong>money</strong></th></tr></thead><tbody><tr><td>1</td><td>100</td></tr></tbody></table><p>å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯ä¸šåŠ¡è¦æ‰§è¡Œçš„ SQL ä¸ºï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">update</span> tb_account <span class="token keyword">set</span> money <span class="token operator">=</span> money <span class="token operator">-</span> <span class="token number">10</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>AT æ¨¡å¼ä¸‹ï¼Œå½“å‰åˆ†æ”¯äº‹åŠ¡æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p><p>ä¸€é˜¶æ®µï¼š</p><p>1ï¼‰TM å‘èµ·å¹¶æ³¨å†Œå…¨å±€äº‹åŠ¡åˆ° TC</p><p>2ï¼‰TM è°ƒç”¨åˆ†æ”¯äº‹åŠ¡</p><p>3ï¼‰åˆ†æ”¯äº‹åŠ¡å‡†å¤‡æ‰§è¡Œä¸šåŠ¡ SQL</p><p>4ï¼‰RM æ‹¦æˆªä¸šåŠ¡ SQLï¼Œæ ¹æ® where æ¡ä»¶æŸ¥è¯¢åŸå§‹æ•°æ®ï¼Œå½¢æˆå¿«ç…§ã€‚</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;money&quot;</span><span class="token operator">:</span> <span class="token number">100</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5ï¼‰RM æ‰§è¡Œä¸šåŠ¡ SQLï¼Œæäº¤æœ¬åœ°äº‹åŠ¡ï¼Œé‡Šæ”¾æ•°æ®åº“é”ã€‚æ­¤æ—¶ <code>money = 90</code></p><p>6ï¼‰RM æŠ¥å‘Šæœ¬åœ°äº‹åŠ¡çŠ¶æ€ç»™ TC</p><p>äºŒé˜¶æ®µï¼š</p><p>1ï¼‰TM é€šçŸ¥ TC äº‹åŠ¡ç»“æŸ</p><p>2ï¼‰TC æ£€æŸ¥åˆ†æ”¯äº‹åŠ¡çŠ¶æ€</p><p>â€‹ aï¼‰å¦‚æœéƒ½æˆåŠŸï¼Œåˆ™ç«‹å³åˆ é™¤å¿«ç…§</p><p>â€‹ bï¼‰å¦‚æœæœ‰åˆ†æ”¯äº‹åŠ¡å¤±è´¥ï¼Œéœ€è¦å›æ»šã€‚è¯»å–å¿«ç…§æ•°æ®ï¼ˆ<code>{&quot;id&quot;: 1, &quot;money&quot;: 100}</code>ï¼‰ï¼Œå°†å¿«ç…§æ¢å¤åˆ°æ•°æ®åº“ã€‚æ­¤æ—¶æ•°æ®åº“å†æ¬¡æ¢å¤ä¸º 100</p><p>æµç¨‹å›¾ï¼š</p><p><img src="/MyBlog/assets/image-20210724180722921-3c1b1269.png" alt="image-20210724180722921"></p><h3 id="_4-2-3-at-ä¸-xa-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_4-2-3-at-ä¸-xa-çš„åŒºåˆ«" aria-hidden="true">#</a> 4.2.3.AT ä¸ XA çš„åŒºåˆ«</h3><p>ç®€è¿° AT æ¨¡å¼ä¸ XA æ¨¡å¼æœ€å¤§çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>XA æ¨¡å¼ä¸€é˜¶æ®µä¸æäº¤äº‹åŠ¡ï¼Œé”å®šèµ„æºï¼›AT æ¨¡å¼ä¸€é˜¶æ®µç›´æ¥æäº¤ï¼Œä¸é”å®šèµ„æºã€‚</li><li>XA æ¨¡å¼ä¾èµ–æ•°æ®åº“æœºåˆ¶å®ç°å›æ»šï¼›AT æ¨¡å¼åˆ©ç”¨æ•°æ®å¿«ç…§å®ç°æ•°æ®å›æ»šã€‚</li><li>XA æ¨¡å¼å¼ºä¸€è‡´ï¼›AT æ¨¡å¼æœ€ç»ˆä¸€è‡´</li></ul><h3 id="_4-2-4-è„å†™é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_4-2-4-è„å†™é—®é¢˜" aria-hidden="true">#</a> 4.2.4.è„å†™é—®é¢˜</h3><p>åœ¨å¤šçº¿ç¨‹å¹¶å‘è®¿é—® AT æ¨¡å¼çš„åˆ†å¸ƒå¼äº‹åŠ¡æ—¶ï¼Œæœ‰å¯èƒ½å‡ºç°è„å†™é—®é¢˜ï¼Œå¦‚å›¾ï¼š</p><p><img src="/MyBlog/assets/image-20210724181541234-a564c86a.png" alt="image-20210724181541234"></p><p>è§£å†³æ€è·¯å°±æ˜¯å¼•å…¥äº†å…¨å±€é”çš„æ¦‚å¿µã€‚åœ¨é‡Šæ”¾ DB é”ä¹‹å‰ï¼Œå…ˆæ‹¿åˆ°å…¨å±€é”ã€‚é¿å…åŒä¸€æ—¶åˆ»æœ‰å¦å¤–ä¸€ä¸ªäº‹åŠ¡æ¥æ“ä½œå½“å‰æ•°æ®ã€‚</p><p><img src="/MyBlog/assets/image-20210724181843029-6c51a4e8.png" alt="image-20210724181843029"></p><h3 id="_4-2-5-ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_4-2-5-ä¼˜ç¼ºç‚¹" aria-hidden="true">#</a> 4.2.5.ä¼˜ç¼ºç‚¹</h3><p>AT æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</p><ul><li>ä¸€é˜¶æ®µå®Œæˆç›´æ¥æäº¤äº‹åŠ¡ï¼Œé‡Šæ”¾æ•°æ®åº“èµ„æºï¼Œæ€§èƒ½æ¯”è¾ƒå¥½</li><li>åˆ©ç”¨å…¨å±€é”å®ç°è¯»å†™éš”ç¦»</li><li>æ²¡æœ‰ä»£ç ä¾µå…¥ï¼Œæ¡†æ¶è‡ªåŠ¨å®Œæˆå›æ»šå’Œæäº¤</li></ul><p>AT æ¨¡å¼çš„ç¼ºç‚¹ï¼š</p><ul><li>ä¸¤é˜¶æ®µä¹‹é—´å±äºè½¯çŠ¶æ€ï¼Œå±äºæœ€ç»ˆä¸€è‡´</li><li>æ¡†æ¶çš„å¿«ç…§åŠŸèƒ½ä¼šå½±å“æ€§èƒ½ï¼Œä½†æ¯” XA æ¨¡å¼è¦å¥½å¾ˆå¤š</li></ul><h3 id="_4-2-6-å®ç°-at-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_4-2-6-å®ç°-at-æ¨¡å¼" aria-hidden="true">#</a> 4.2.6.å®ç° AT æ¨¡å¼</h3><p>AT æ¨¡å¼ä¸­çš„å¿«ç…§ç”Ÿæˆã€å›æ»šç­‰åŠ¨ä½œéƒ½æ˜¯ç”±æ¡†æ¶è‡ªåŠ¨å®Œæˆï¼Œæ²¡æœ‰ä»»ä½•ä»£ç ä¾µå…¥ï¼Œå› æ­¤å®ç°éå¸¸ç®€å•ã€‚</p><p>åªä¸è¿‡ï¼ŒAT æ¨¡å¼éœ€è¦ä¸€ä¸ªè¡¨æ¥è®°å½•å…¨å±€é”ã€å¦ä¸€å¼ è¡¨æ¥è®°å½•æ•°æ®å¿«ç…§ undo_logã€‚</p><p>1ï¼‰å¯¼å…¥æ•°æ®åº“è¡¨ï¼Œè®°å½•å…¨å±€é”</p><p>å¯¼å…¥è¯¾å‰èµ„æ–™æä¾›çš„ Sql æ–‡ä»¶ï¼šseata-at.sqlï¼Œå…¶ä¸­ lock_table å¯¼å…¥åˆ° TC æœåŠ¡å…³è”çš„æ•°æ®åº“ï¼Œundo_log è¡¨å¯¼å…¥åˆ°å¾®æœåŠ¡å…³è”çš„æ•°æ®åº“ï¼š</p><p><img src="/MyBlog/assets/image-20210724182217272-a4ba0714.png" alt="image-20210724182217272"></p><p>2ï¼‰ä¿®æ”¹ application.yml æ–‡ä»¶ï¼Œå°†äº‹åŠ¡æ¨¡å¼ä¿®æ”¹ä¸º AT æ¨¡å¼å³å¯ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">seata</span><span class="token punctuation">:</span>
  <span class="token key atrule">data-source-proxy-mode</span><span class="token punctuation">:</span> AT <span class="token comment"># é»˜è®¤å°±æ˜¯AT</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3ï¼‰é‡å¯æœåŠ¡å¹¶æµ‹è¯•</p><h2 id="_4-3-tcc-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_4-3-tcc-æ¨¡å¼" aria-hidden="true">#</a> 4.3.TCC æ¨¡å¼</h2><p>TCC æ¨¡å¼ä¸ AT æ¨¡å¼éå¸¸ç›¸ä¼¼ï¼Œæ¯é˜¶æ®µéƒ½æ˜¯ç‹¬ç«‹äº‹åŠ¡ï¼Œä¸åŒçš„æ˜¯ TCC é€šè¿‡äººå·¥ç¼–ç æ¥å®ç°æ•°æ®æ¢å¤ã€‚éœ€è¦å®ç°ä¸‰ä¸ªæ–¹æ³•ï¼š</p><ul><li><p>Tryï¼šèµ„æºçš„æ£€æµ‹å’Œé¢„ç•™ï¼›</p></li><li><p>Confirmï¼šå®Œæˆèµ„æºæ“ä½œä¸šåŠ¡ï¼›è¦æ±‚ Try æˆåŠŸ Confirm ä¸€å®šè¦èƒ½æˆåŠŸã€‚</p></li><li><p>Cancelï¼šé¢„ç•™èµ„æºé‡Šæ”¾ï¼Œå¯ä»¥ç†è§£ä¸º try çš„åå‘æ“ä½œã€‚</p></li></ul><h3 id="_4-3-1-æµç¨‹åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_4-3-1-æµç¨‹åˆ†æ" aria-hidden="true">#</a> 4.3.1.æµç¨‹åˆ†æ</h3><p>ä¸¾ä¾‹ï¼Œä¸€ä¸ªæ‰£å‡ç”¨æˆ·ä½™é¢çš„ä¸šåŠ¡ã€‚å‡è®¾è´¦æˆ· A åŸæ¥ä½™é¢æ˜¯ 100ï¼Œéœ€è¦ä½™é¢æ‰£å‡ 30 å…ƒã€‚</p><ul><li><strong>é˜¶æ®µä¸€ï¼ˆ Try ï¼‰</strong>ï¼šæ£€æŸ¥ä½™é¢æ˜¯å¦å……è¶³ï¼Œå¦‚æœå……è¶³åˆ™å†»ç»“é‡‘é¢å¢åŠ  30 å…ƒï¼Œå¯ç”¨ä½™é¢æ‰£é™¤ 30</li></ul><p>åˆè¯†ä½™é¢ï¼š</p><p><img src="/MyBlog/assets/image-20210724182424907-d11e5e40.png" alt="image-20210724182424907"></p><p>ä½™é¢å……è¶³ï¼Œå¯ä»¥å†»ç»“ï¼š</p><p><img src="/MyBlog/assets/image-20210724182457951-14454cc4.png" alt="image-20210724182457951"></p><p>æ­¤æ—¶ï¼Œæ€»é‡‘é¢ = å†»ç»“é‡‘é¢ + å¯ç”¨é‡‘é¢ï¼Œæ•°é‡ä¾ç„¶æ˜¯ 100 ä¸å˜ã€‚äº‹åŠ¡ç›´æ¥æäº¤æ— éœ€ç­‰å¾…å…¶å®ƒäº‹åŠ¡ã€‚</p><ul><li><strong>é˜¶æ®µäºŒï¼ˆConfirm)</strong>ï¼šå‡å¦‚è¦æäº¤ï¼ˆConfirmï¼‰ï¼Œåˆ™å†»ç»“é‡‘é¢æ‰£å‡ 30</li></ul><p>ç¡®è®¤å¯ä»¥æäº¤ï¼Œä¸è¿‡ä¹‹å‰å¯ç”¨é‡‘é¢å·²ç»æ‰£å‡è¿‡äº†ï¼Œè¿™é‡Œåªè¦æ¸…é™¤å†»ç»“é‡‘é¢å°±å¥½äº†ï¼š</p><p><img src="/MyBlog/assets/image-20210724182706011-52ddcac5.png" alt="image-20210724182706011"></p><p>æ­¤æ—¶ï¼Œæ€»é‡‘é¢ = å†»ç»“é‡‘é¢ + å¯ç”¨é‡‘é¢ = 0 + 70 = 70 å…ƒ</p><ul><li><strong>é˜¶æ®µäºŒ(Canncel)</strong>ï¼šå¦‚æœè¦å›æ»šï¼ˆCancelï¼‰ï¼Œåˆ™å†»ç»“é‡‘é¢æ‰£å‡ 30ï¼Œå¯ç”¨ä½™é¢å¢åŠ  30</li></ul><p>éœ€è¦å›æ»šï¼Œé‚£ä¹ˆå°±è¦é‡Šæ”¾å†»ç»“é‡‘é¢ï¼Œæ¢å¤å¯ç”¨é‡‘é¢ï¼š</p><p><img src="/MyBlog/assets/image-20210724182810734-873a7cf1.png" alt="image-20210724182810734"></p><h3 id="_4-3-2-seata-çš„-tcc-æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_4-3-2-seata-çš„-tcc-æ¨¡å‹" aria-hidden="true">#</a> 4.3.2.Seata çš„ TCC æ¨¡å‹</h3><p>Seata ä¸­çš„ TCC æ¨¡å‹ä¾ç„¶å»¶ç»­ä¹‹å‰çš„äº‹åŠ¡æ¶æ„ï¼Œå¦‚å›¾ï¼š</p><p><img src="/MyBlog/assets/image-20210724182937713-327c6aaf.png" alt="image-20210724182937713"></p><h3 id="_4-3-3-ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_4-3-3-ä¼˜ç¼ºç‚¹" aria-hidden="true">#</a> 4.3.3.ä¼˜ç¼ºç‚¹</h3><p>TCC æ¨¡å¼çš„æ¯ä¸ªé˜¶æ®µæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</p><ul><li>Tryï¼šèµ„æºæ£€æŸ¥å’Œé¢„ç•™</li><li>Confirmï¼šä¸šåŠ¡æ‰§è¡Œå’Œæäº¤</li><li>Cancelï¼šé¢„ç•™èµ„æºçš„é‡Šæ”¾</li></ul><p>TCC çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>ä¸€é˜¶æ®µå®Œæˆç›´æ¥æäº¤äº‹åŠ¡ï¼Œé‡Šæ”¾æ•°æ®åº“èµ„æºï¼Œæ€§èƒ½å¥½</li><li>ç›¸æ¯” AT æ¨¡å‹ï¼Œæ— éœ€ç”Ÿæˆå¿«ç…§ï¼Œæ— éœ€ä½¿ç”¨å…¨å±€é”ï¼Œæ€§èƒ½æœ€å¼º</li><li>ä¸ä¾èµ–æ•°æ®åº“äº‹åŠ¡ï¼Œè€Œæ˜¯ä¾èµ–è¡¥å¿æ“ä½œï¼Œå¯ä»¥ç”¨äºéäº‹åŠ¡å‹æ•°æ®åº“</li></ul><p>TCC çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>æœ‰ä»£ç ä¾µå…¥ï¼Œéœ€è¦äººä¸ºç¼–å†™ tryã€Confirm å’Œ Cancel æ¥å£ï¼Œå¤ªéº»çƒ¦</li><li>è½¯çŠ¶æ€ï¼Œäº‹åŠ¡æ˜¯æœ€ç»ˆä¸€è‡´</li><li>éœ€è¦è€ƒè™‘ Confirm å’Œ Cancel çš„å¤±è´¥æƒ…å†µï¼Œåšå¥½å¹‚ç­‰å¤„ç†</li></ul><h3 id="_4-3-4-äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»š" tabindex="-1"><a class="header-anchor" href="#_4-3-4-äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»š" aria-hidden="true">#</a> 4.3.4.äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»š</h3><h4 id="_1-ç©ºå›æ»š" tabindex="-1"><a class="header-anchor" href="#_1-ç©ºå›æ»š" aria-hidden="true">#</a> 1ï¼‰ç©ºå›æ»š</h4><p>å½“æŸåˆ†æ”¯äº‹åŠ¡çš„ try é˜¶æ®µ<strong>é˜»å¡</strong>æ—¶ï¼Œå¯èƒ½å¯¼è‡´å…¨å±€äº‹åŠ¡è¶…æ—¶è€Œè§¦å‘äºŒé˜¶æ®µçš„ cancel æ“ä½œã€‚åœ¨æœªæ‰§è¡Œ try æ“ä½œæ—¶å…ˆæ‰§è¡Œäº† cancel æ“ä½œï¼Œè¿™æ—¶ cancel ä¸èƒ½åšå›æ»šï¼Œå°±æ˜¯<strong>ç©ºå›æ»š</strong>ã€‚</p><p>å¦‚å›¾ï¼š</p><p><img src="/MyBlog/assets/image-20210724183426891-3d6b4def.png" alt="image-20210724183426891"></p><p>æ‰§è¡Œ cancel æ“ä½œæ—¶ï¼Œåº”å½“åˆ¤æ–­ try æ˜¯å¦å·²ç»æ‰§è¡Œï¼Œå¦‚æœå°šæœªæ‰§è¡Œï¼Œåˆ™åº”è¯¥ç©ºå›æ»šã€‚</p><h4 id="_2-ä¸šåŠ¡æ‚¬æŒ‚" tabindex="-1"><a class="header-anchor" href="#_2-ä¸šåŠ¡æ‚¬æŒ‚" aria-hidden="true">#</a> 2ï¼‰ä¸šåŠ¡æ‚¬æŒ‚</h4><p>å¯¹äºå·²ç»ç©ºå›æ»šçš„ä¸šåŠ¡ï¼Œä¹‹å‰è¢«é˜»å¡çš„ try æ“ä½œæ¢å¤ï¼Œç»§ç»­æ‰§è¡Œ tryï¼Œå°±æ°¸è¿œä¸å¯èƒ½ confirm æˆ– cancel ï¼Œäº‹åŠ¡ä¸€ç›´å¤„äºä¸­é—´çŠ¶æ€ï¼Œè¿™å°±æ˜¯<strong>ä¸šåŠ¡æ‚¬æŒ‚</strong>ã€‚</p><p>æ‰§è¡Œ try æ“ä½œæ—¶ï¼Œåº”å½“åˆ¤æ–­ cancel æ˜¯å¦å·²ç»æ‰§è¡Œè¿‡äº†ï¼Œå¦‚æœå·²ç»æ‰§è¡Œï¼Œåº”å½“é˜»æ­¢ç©ºå›æ»šåçš„ try æ“ä½œï¼Œé¿å…æ‚¬æŒ‚</p><h3 id="_4-3-5-å®ç°-tcc-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_4-3-5-å®ç°-tcc-æ¨¡å¼" aria-hidden="true">#</a> 4.3.5.å®ç° TCC æ¨¡å¼</h3><p>è§£å†³ç©ºå›æ»šå’Œä¸šåŠ¡æ‚¬æŒ‚é—®é¢˜ï¼Œå¿…é¡»è¦è®°å½•å½“å‰äº‹åŠ¡çŠ¶æ€ï¼Œæ˜¯åœ¨ tryã€è¿˜æ˜¯ cancelï¼Ÿ</p><h4 id="_1-æ€è·¯åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_1-æ€è·¯åˆ†æ" aria-hidden="true">#</a> 1ï¼‰æ€è·¯åˆ†æ</h4><p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰ä¸€å¼ è¡¨ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>account_freeze_tbl<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>xid<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç”¨æˆ·id&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>freeze_money<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;0&#39;</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;å†»ç»“é‡‘é¢&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>state<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;äº‹åŠ¡çŠ¶æ€ï¼Œ0:tryï¼Œ1:confirmï¼Œ2:cancel&#39;</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>xid<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">USING</span> <span class="token keyword">BTREE</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 ROW_FORMAT<span class="token operator">=</span>COMPACT<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­ï¼š</p><ul><li>xidï¼šæ˜¯å…¨å±€äº‹åŠ¡ id</li><li>freeze_moneyï¼šç”¨æ¥è®°å½•ç”¨æˆ·å†»ç»“é‡‘é¢</li><li>stateï¼šç”¨æ¥è®°å½•äº‹åŠ¡çŠ¶æ€</li></ul><p>é‚£æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡å¼€æ€ä¹ˆåšå‘¢ï¼Ÿ</p><ul><li>Try ä¸šåŠ¡ï¼š <ul><li>è®°å½•å†»ç»“é‡‘é¢å’Œäº‹åŠ¡çŠ¶æ€åˆ° account_freeze è¡¨</li><li>æ‰£å‡ account è¡¨å¯ç”¨é‡‘é¢</li></ul></li><li>Confirm ä¸šåŠ¡ <ul><li>æ ¹æ® xid åˆ é™¤ account_freeze è¡¨çš„å†»ç»“è®°å½•</li></ul></li><li>Cancel ä¸šåŠ¡ <ul><li>ä¿®æ”¹ account_freeze è¡¨ï¼Œå†»ç»“é‡‘é¢ä¸º 0ï¼Œstate ä¸º 2</li><li>ä¿®æ”¹ account è¡¨ï¼Œæ¢å¤å¯ç”¨é‡‘é¢</li></ul></li><li>å¦‚ä½•åˆ¤æ–­æ˜¯å¦ç©ºå›æ»šï¼Ÿ <ul><li>cancel ä¸šåŠ¡ä¸­ï¼Œæ ¹æ® xid æŸ¥è¯¢ account_freezeï¼Œå¦‚æœä¸º null åˆ™è¯´æ˜ try è¿˜æ²¡åšï¼Œéœ€è¦ç©ºå›æ»š</li></ul></li><li>å¦‚ä½•é¿å…ä¸šåŠ¡æ‚¬æŒ‚ï¼Ÿ <ul><li>try ä¸šåŠ¡ä¸­ï¼Œæ ¹æ® xid æŸ¥è¯¢ account_freeze ï¼Œå¦‚æœå·²ç»å­˜åœ¨åˆ™è¯æ˜ Cancel å·²ç»æ‰§è¡Œï¼Œæ‹’ç»æ‰§è¡Œ try ä¸šåŠ¡</li></ul></li></ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ”¹é€  account-serviceï¼Œåˆ©ç”¨ TCC å®ç°ä½™é¢æ‰£å‡åŠŸèƒ½ã€‚</p><h4 id="_2-å£°æ˜-tcc-æ¥å£" tabindex="-1"><a class="header-anchor" href="#_2-å£°æ˜-tcc-æ¥å£" aria-hidden="true">#</a> 2ï¼‰å£°æ˜ TCC æ¥å£</h4><p>TCC çš„ Tryã€Confirmã€Cancel æ–¹æ³•éƒ½éœ€è¦åœ¨æ¥å£ä¸­åŸºäºæ³¨è§£æ¥å£°æ˜ï¼Œ</p><p>æˆ‘ä»¬åœ¨ account-service é¡¹ç›®ä¸­çš„<code>cn.itcast.account.service</code>åŒ…ä¸­æ–°å»ºä¸€ä¸ªæ¥å£ï¼Œå£°æ˜ TCC ä¸‰ä¸ªæ¥å£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>account<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>seata<span class="token punctuation">.</span>rm<span class="token punctuation">.</span>tcc<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">BusinessActionContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>seata<span class="token punctuation">.</span>rm<span class="token punctuation">.</span>tcc<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">BusinessActionContextParameter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>seata<span class="token punctuation">.</span>rm<span class="token punctuation">.</span>tcc<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">LocalTCC</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>seata<span class="token punctuation">.</span>rm<span class="token punctuation">.</span>tcc<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">TwoPhaseBusinessAction</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@LocalTCC</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AccountTCCService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@TwoPhaseBusinessAction</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;deduct&quot;</span><span class="token punctuation">,</span> commitMethod <span class="token operator">=</span> <span class="token string">&quot;confirm&quot;</span><span class="token punctuation">,</span> rollbackMethod <span class="token operator">=</span> <span class="token string">&quot;cancel&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">deduct</span><span class="token punctuation">(</span><span class="token annotation punctuation">@BusinessActionContextParameter</span><span class="token punctuation">(</span>paramName <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userId<span class="token punctuation">,</span>
                <span class="token annotation punctuation">@BusinessActionContextParameter</span><span class="token punctuation">(</span>paramName <span class="token operator">=</span> <span class="token string">&quot;money&quot;</span><span class="token punctuation">)</span><span class="token keyword">int</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">boolean</span> <span class="token function">confirm</span><span class="token punctuation">(</span><span class="token class-name">BusinessActionContext</span> ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">boolean</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token class-name">BusinessActionContext</span> ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-ç¼–å†™å®ç°ç±»" tabindex="-1"><a class="header-anchor" href="#_3-ç¼–å†™å®ç°ç±»" aria-hidden="true">#</a> 3ï¼‰ç¼–å†™å®ç°ç±»</h4><p>åœ¨ account-service æœåŠ¡ä¸­çš„<code>cn.itcast.account.service.impl</code>åŒ…ä¸‹æ–°å»ºä¸€ä¸ªç±»ï¼Œå®ç° TCC ä¸šåŠ¡ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>account<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>account<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">AccountFreeze</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>account<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">AccountFreezeMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>account<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">AccountMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>account<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">AccountTCCService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>seata<span class="token punctuation">.</span>core<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">RootContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>seata<span class="token punctuation">.</span>rm<span class="token punctuation">.</span>tcc<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">BusinessActionContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Transactional</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccountTCCServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">AccountTCCService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">AccountMapper</span> accountMapper<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">AccountFreezeMapper</span> freezeMapper<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token annotation punctuation">@Transactional</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deduct</span><span class="token punctuation">(</span><span class="token class-name">String</span> userId<span class="token punctuation">,</span> <span class="token keyword">int</span> money<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">//0.è·å–å…¨å±€äº‹åŠ¡Id</span>
        <span class="token class-name">String</span> xid <span class="token operator">=</span> <span class="token class-name">RootContext</span><span class="token punctuation">.</span><span class="token function">getXID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ¤æ–­freezsä¸­æ˜¯å¦æœ‰å†»ç»“è®°å½•ï¼Œå¦‚æœæœ‰ï¼Œä¸€å®šæ˜¯CANCELæ‰§è¡Œè¿‡ï¼Œæˆ‘è¦æ‹’ç»ä¸šåŠ¡</span>
        <span class="token class-name">AccountFreeze</span> oldFreeze <span class="token operator">=</span> freezeMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>xid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>oldFreeze <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// CANCELæ‰§è¡Œè¿‡ æˆ‘è¦æ‹’ç»ä¸šåŠ¡</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 1. ä½™é¢åˆ¤æ–­</span>

        <span class="token comment">// 2.æ‰£å‡å¯ç”¨ä½™é¢</span>
        accountMapper<span class="token punctuation">.</span><span class="token function">deduct</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3.è®°å½•å†»ç»“çŠ¶æ€</span>
        <span class="token class-name">AccountFreeze</span> freeze <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountFreeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        freeze<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        freeze<span class="token punctuation">.</span><span class="token function">setFreezeMoney</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
        freeze<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token class-name">AccountFreeze<span class="token punctuation">.</span>State</span><span class="token punctuation">.</span><span class="token constant">TRY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        freeze<span class="token punctuation">.</span><span class="token function">setXid</span><span class="token punctuation">(</span>xid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        freezeMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>freeze<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">confirm</span><span class="token punctuation">(</span><span class="token class-name">BusinessActionContext</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1.è·å–äº‹åŠ¡id</span>
        <span class="token class-name">String</span> xid <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getXid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.æ ¹æ®äº‹åŠ¡IDåˆ é™¤å†»ç»“ä¿¡æ¯</span>
        <span class="token keyword">int</span> count <span class="token operator">=</span> freezeMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>xid<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> count <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token class-name">BusinessActionContext</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1.æŸ¥è¯¢å†»ç»“è®°å½•</span>
        <span class="token class-name">String</span> xid <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getXid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> userId <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getActionContext</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AccountFreeze</span> freeze <span class="token operator">=</span> freezeMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>xid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1.ç©ºå›æ»šåˆ¤æ–­ï¼Œåˆ¤æ–­freeze æ˜¯å¦ä¸ºnullï¼Œä¸ºnullè¯æ˜tryæ²¡æ‰§è¡Œ éœ€è¦ç©ºå›æ»š</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>freeze <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// è¯æ˜try æ²¡æ‰§è¡Œ éœ€è¦ç©ºå›æ»š</span>
            freeze <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountFreeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            freeze<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            freeze<span class="token punctuation">.</span><span class="token function">setFreezeMoney</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            freeze<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token class-name">AccountFreeze<span class="token punctuation">.</span>State</span><span class="token punctuation">.</span><span class="token constant">CANCEL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            freeze<span class="token punctuation">.</span><span class="token function">setXid</span><span class="token punctuation">(</span>xid<span class="token punctuation">)</span><span class="token punctuation">;</span>
            freezeMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>freeze<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 2.å¹‚ç­‰åˆ¤æ–­</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>freeze<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">AccountFreeze<span class="token punctuation">.</span>State</span><span class="token punctuation">.</span><span class="token constant">CANCEL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// å·²ç»å¤„ç†è¿‡ä¸€æ¬¡CANCELäº† æ— éœ€é‡å¤å¤„ç†</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 1.æ¢å¤å†»ç»“ä½™é¢</span>
        accountMapper<span class="token punctuation">.</span><span class="token function">refund</span><span class="token punctuation">(</span>freeze<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> freeze<span class="token punctuation">.</span><span class="token function">getFreezeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2.å°†å†»ç»“é‡‘é¢æ¸…é›¶,çŠ¶æ€æ”¹ä¸ºCancel</span>
        freeze<span class="token punctuation">.</span><span class="token function">setFreezeMoney</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        freeze<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token class-name">AccountFreeze<span class="token punctuation">.</span>State</span><span class="token punctuation">.</span><span class="token constant">CANCEL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> count <span class="token operator">=</span> freezeMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>freeze<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> count <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-4-saga-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_4-4-saga-æ¨¡å¼" aria-hidden="true">#</a> 4.4.SAGA æ¨¡å¼</h2><p>Saga æ¨¡å¼æ˜¯ Seata å³å°†å¼€æºçš„é•¿äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œå°†ç”±èš‚èšé‡‘æœä¸»è¦è´¡çŒ®ã€‚</p><p>å…¶ç†è®ºåŸºç¡€æ˜¯ Hector &amp; Kenneth åœ¨ 1987 å¹´å‘è¡¨çš„è®ºæ–‡<a href="https://microservices.io/patterns/data/saga.html" target="_blank" rel="noopener noreferrer">Sagas<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><p>Seata å®˜ç½‘å¯¹äº Saga çš„æŒ‡å—ï¼šhttps://seata.io/zh-cn/docs/user/saga.html</p><h3 id="_4-4-1-åŸç†" tabindex="-1"><a class="header-anchor" href="#_4-4-1-åŸç†" aria-hidden="true">#</a> 4.4.1.åŸç†</h3><p>åœ¨ Saga æ¨¡å¼ä¸‹ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡å†…æœ‰å¤šä¸ªå‚ä¸è€…ï¼Œæ¯ä¸€ä¸ªå‚ä¸è€…éƒ½æ˜¯ä¸€ä¸ªå†²æ­£è¡¥å¿æœåŠ¡ï¼Œéœ€è¦ç”¨æˆ·æ ¹æ®ä¸šåŠ¡åœºæ™¯å®ç°å…¶æ­£å‘æ“ä½œå’Œé€†å‘å›æ»šæ“ä½œã€‚</p><p>åˆ†å¸ƒå¼äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¾æ¬¡æ‰§è¡Œå„å‚ä¸è€…çš„æ­£å‘æ“ä½œï¼Œå¦‚æœæ‰€æœ‰æ­£å‘æ“ä½œå‡æ‰§è¡ŒæˆåŠŸï¼Œé‚£ä¹ˆåˆ†å¸ƒå¼äº‹åŠ¡æäº¤ã€‚å¦‚æœä»»ä½•ä¸€ä¸ªæ­£å‘æ“ä½œæ‰§è¡Œå¤±è´¥ï¼Œé‚£ä¹ˆåˆ†å¸ƒå¼äº‹åŠ¡ä¼šå»é€€å›å»æ‰§è¡Œå‰é¢å„å‚ä¸è€…çš„é€†å‘å›æ»šæ“ä½œï¼Œå›æ»šå·²æäº¤çš„å‚ä¸è€…ï¼Œä½¿åˆ†å¸ƒå¼äº‹åŠ¡å›åˆ°åˆå§‹çŠ¶æ€ã€‚</p><p><img src="/MyBlog/assets/image-20210724184846396-37f6ce15.png" alt="image-20210724184846396"></p><p>Saga ä¹Ÿåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p><ul><li>ä¸€é˜¶æ®µï¼šç›´æ¥æäº¤æœ¬åœ°äº‹åŠ¡</li><li>äºŒé˜¶æ®µï¼šæˆåŠŸåˆ™ä»€ä¹ˆéƒ½ä¸åšï¼›å¤±è´¥åˆ™é€šè¿‡ç¼–å†™è¡¥å¿ä¸šåŠ¡æ¥å›æ»š</li></ul><h3 id="_4-4-2-ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_4-4-2-ä¼˜ç¼ºç‚¹" aria-hidden="true">#</a> 4.4.2.ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼š</p><ul><li>äº‹åŠ¡å‚ä¸è€…å¯ä»¥åŸºäºäº‹ä»¶é©±åŠ¨å®ç°å¼‚æ­¥è°ƒç”¨ï¼Œååé«˜</li><li>ä¸€é˜¶æ®µç›´æ¥æäº¤äº‹åŠ¡ï¼Œæ— é”ï¼Œæ€§èƒ½å¥½</li><li>ä¸ç”¨ç¼–å†™ TCC ä¸­çš„ä¸‰ä¸ªé˜¶æ®µï¼Œå®ç°ç®€å•</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>è½¯çŠ¶æ€æŒç»­æ—¶é—´ä¸ç¡®å®šï¼Œæ—¶æ•ˆæ€§å·®</li><li>æ²¡æœ‰é”ï¼Œæ²¡æœ‰äº‹åŠ¡éš”ç¦»ï¼Œä¼šæœ‰è„å†™</li></ul><h2 id="_4-5-å››ç§æ¨¡å¼å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#_4-5-å››ç§æ¨¡å¼å¯¹æ¯”" aria-hidden="true">#</a> 4.5.å››ç§æ¨¡å¼å¯¹æ¯”</h2><p>æˆ‘ä»¬ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥å¯¹æ¯”å››ç§å®ç°ï¼š</p><ul><li>ä¸€è‡´æ€§ï¼šèƒ½å¦ä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ï¼Ÿå¼ºä¸€è‡´è¿˜æ˜¯æœ€ç»ˆä¸€è‡´ï¼Ÿ</li><li>éš”ç¦»æ€§ï¼šäº‹åŠ¡ä¹‹é—´çš„éš”ç¦»æ€§å¦‚ä½•ï¼Ÿ</li><li>ä»£ç ä¾µå…¥ï¼šæ˜¯å¦éœ€è¦å¯¹ä¸šåŠ¡ä»£ç æ”¹é€ ï¼Ÿ</li><li>æ€§èƒ½ï¼šæœ‰æ— æ€§èƒ½æŸè€—ï¼Ÿ</li><li>åœºæ™¯ï¼šå¸¸è§çš„ä¸šåŠ¡åœºæ™¯</li></ul><p>å¦‚å›¾ï¼š</p><p><img src="/MyBlog/assets/image-20210724185021819-98463c0c.png" alt="image-20210724185021819"></p><h1 id="_5-é«˜å¯ç”¨" tabindex="-1"><a class="header-anchor" href="#_5-é«˜å¯ç”¨" aria-hidden="true">#</a> 5.é«˜å¯ç”¨</h1><p>Seata çš„ TC æœåŠ¡ä½œä¸ºåˆ†å¸ƒå¼äº‹åŠ¡æ ¸å¿ƒï¼Œä¸€å®šè¦ä¿è¯é›†ç¾¤çš„é«˜å¯ç”¨æ€§ã€‚</p><h2 id="_5-1-é«˜å¯ç”¨æ¶æ„æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_5-1-é«˜å¯ç”¨æ¶æ„æ¨¡å‹" aria-hidden="true">#</a> 5.1.é«˜å¯ç”¨æ¶æ„æ¨¡å‹</h2><p>æ­å»º TC æœåŠ¡é›†ç¾¤éå¸¸ç®€å•ï¼Œå¯åŠ¨å¤šä¸ª TC æœåŠ¡ï¼Œæ³¨å†Œåˆ° nacos å³å¯ã€‚</p><p>ä½†é›†ç¾¤å¹¶ä¸èƒ½ç¡®ä¿ 100%å®‰å…¨ï¼Œä¸‡ä¸€é›†ç¾¤æ‰€åœ¨æœºæˆ¿æ•…éšœæ€ä¹ˆåŠï¼Ÿæ‰€ä»¥å¦‚æœè¦æ±‚è¾ƒé«˜ï¼Œä¸€èˆ¬éƒ½ä¼šåšå¼‚åœ°å¤šæœºæˆ¿å®¹ç¾ã€‚</p><p>æ¯”å¦‚ä¸€ä¸ª TC é›†ç¾¤åœ¨ä¸Šæµ·ï¼Œå¦ä¸€ä¸ª TC é›†ç¾¤åœ¨æ­å·ï¼š</p><p><img src="/MyBlog/assets/image-20210724185240957-57d2a062.png" alt="image-20210724185240957"></p><p>å¾®æœåŠ¡åŸºäºäº‹åŠ¡ç»„ï¼ˆtx-service-group)ä¸ TC é›†ç¾¤çš„æ˜ å°„å…³ç³»ï¼Œæ¥æŸ¥æ‰¾å½“å‰åº”è¯¥ä½¿ç”¨å“ªä¸ª TC é›†ç¾¤ã€‚å½“ SH é›†ç¾¤æ•…éšœæ—¶ï¼Œåªéœ€è¦å°† vgroup-mapping ä¸­çš„æ˜ å°„å…³ç³»æ”¹æˆ HZã€‚åˆ™æ‰€æœ‰å¾®æœåŠ¡å°±ä¼šåˆ‡æ¢åˆ° HZ çš„ TC é›†ç¾¤äº†ã€‚</p><h2 id="_5-2-å®ç°é«˜å¯ç”¨" tabindex="-1"><a class="header-anchor" href="#_5-2-å®ç°é«˜å¯ç”¨" aria-hidden="true">#</a> 5.2.å®ç°é«˜å¯ç”¨</h2><p>å…·ä½“å®ç°è¯·å‚è€ƒè¯¾å‰èµ„æ–™æä¾›çš„æ–‡æ¡£ã€Šseata çš„éƒ¨ç½²å’Œé›†æˆ.mdã€‹ï¼š</p><p><img src="/MyBlog/assets/image-20210724172549013-d11aadfa.png" alt="image-20210724172549013"></p><p>ç¬¬ä¸‰ç« èŠ‚ï¼š</p><p><img src="/MyBlog/assets/image-20210724185638729-bc0b36a7.png" alt="image-20210724185638729"></p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/ZyKunn/edit/main/notes/microservices/02/day02-åˆ†å¸ƒå¼äº‹åŠ¡/README.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">ä¸Šæ¬¡æ›´æ–°: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">è´¡çŒ®è€…: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 814342838@qq.com">ZyKun</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/MyBlog/notes/microservices/02/sentinel%E8%A7%84%E5%88%99%E6%8C%81%E4%B9%85%E5%8C%96/" class="" aria-label="Sentinel è§„åˆ™æŒä¹…åŒ– ğŸ§™"><!--[--><!--]--> Sentinel è§„åˆ™æŒä¹…åŒ– ğŸ§™ <!--[--><!--]--></a></span><span class="next"><a href="/MyBlog/notes/microservices/02/seata%E7%9A%84%E9%83%A8%E7%BD%B2%E5%92%8C%E9%9B%86%E6%88%90/" class="" aria-label="seata çš„éƒ¨ç½²å’Œé›†æˆ ğŸ§™"><!--[--><!--]--> seata çš„éƒ¨ç½²å’Œé›†æˆ ğŸ§™ <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/MyBlog/assets/app-a153c100.js" defer></script>
  </body>
</html>
