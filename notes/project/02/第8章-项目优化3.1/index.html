<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.63">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="./img/logo.png"><title>ç¬¬ 8 ç«  é¡¹ç›®ä¼˜åŒ– 3.1 | ZyKunã®Blog</title><meta name="description" content="">
    <link rel="preload" href="/MyBlog/assets/style-57272a59.css" as="style"><link rel="stylesheet" href="/MyBlog/assets/style-57272a59.css">
    <link rel="modulepreload" href="/MyBlog/assets/app-a153c100.js"><link rel="modulepreload" href="/MyBlog/assets/index.html-025e6f4e.js"><link rel="modulepreload" href="/MyBlog/assets/index.html-b0c39cc5.js"><link rel="prefetch" href="/MyBlog/assets/index.html-ab0151fa.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1249ab5a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4d02565e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1c68c797.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-93acf26d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2bc953d6.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0c526d7c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-636c9f52.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d4177c6b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7624decc.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d0b4a798.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-aa378d7b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ddd44d65.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-adbb7f41.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-34576599.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1079a374.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-88d4ebe7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5e927142.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9a6f13b8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4c85da23.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-69e813d7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-545062a2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bd7a4fcb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-910949e0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-459b0c71.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9a036060.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f62ffe74.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-841a86c0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b31c8bb6.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-85bae056.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-73555735.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6d5456cd.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d2dfbeec.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-746091c2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9cc627ff.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d411448a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4454f425.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-57aa84f4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2ce52087.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-76657200.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-90d9409e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4d6ba5e7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-41bc7856.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6140daf4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ea30461d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-00114784.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f3fa86cb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-386f0bd2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b46ac77e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-256a258e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4ebf55b3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7268161e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5a8852c0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-19373782.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4e33bb6b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-de5ff178.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fd5da14a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-dbee5a73.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-64025c89.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9bd15ac7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4812edff.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1f3f5c2b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-3f85e131.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1d66d048.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-67b1b38e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-17f10f72.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ad1b5dc8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b14e7669.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fa35810b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-acb9b7bf.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f2ba9a88.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-abdb28e5.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b3cc33e9.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ef13eee8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-73fa0dcc.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6f7449c7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-3857ef8d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e5af1d8f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d5d14c1f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-94a8b9a2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-3931e4d3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0978879b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-617bd5bf.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4fe008c8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0e33aa95.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-00725025.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8e05ec6e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-72ca6b4c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-427c5181.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-3b3baf42.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-40a790c3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9709e7c9.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8eb00d02.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0c849262.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-eda16f63.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-81242655.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2c9f6820.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-79188b74.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5775eee0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-eff0510c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-305de307.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e83a5de7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-761a9548.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c12ae66e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-87a73e5c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d720473a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b960b5b6.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bbd98f93.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-76195dca.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-3bd0cfa7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8c87d147.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bac2e853.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1ee6bc34.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ab7381d6.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5b97f6b8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fd33ca6f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-684189de.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-63731ad7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-895bfca1.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6d1ff4c2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b71bf26f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ce6f983b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c185f9a2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-29c62d64.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-52c91de2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-55aa1c06.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c87ef63a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ff1d9f51.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a12aedeb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-298f19f2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f881f599.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2c32406a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d4217479.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7edb7ce1.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8671126f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-da565d04.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f9deb3ec.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ee7cf1b5.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-270d6327.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ec786b75.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e98adf02.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7233a0e2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-79c193cf.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9714081e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d5dea51d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a235e4bb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e3209a23.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-cdce2101.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-389e66df.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-652ee4f6.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-60711e70.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6edc93de.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-11bd39b1.js" as="script"><link rel="prefetch" href="/MyBlog/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-53015219.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-74dcd8ae.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2dd727db.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-11b329fb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-3b6f3614.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-70ce719f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f6ca4d92.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5a6833de.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bf03220c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a2edab58.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f1e5cf7a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-21d4e18d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5235fca9.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2dc704c0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-57630906.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ff165209.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6ec253a3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f9e4f0c3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-664b232d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-adf015a3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4667c0e6.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-cc407710.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1752d212.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9b5d99c4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-43c48ae2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e8a616b7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-93e7405b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-22a72a56.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-42ce3023.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f8eeab22.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-dd50991a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-af520db8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5ab2bfac.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-965bc04f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-81ebef01.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-79d19f4d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9600bdfb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-560df48d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4fb22a4f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bd4caa82.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-370323f9.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f673ebfa.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-78d88460.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8b54347c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d30f0340.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e26bc4de.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7d37b036.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-3aa565ce.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4c69f238.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-76d60030.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7116a5e4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d8f649cc.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-adbbb7c9.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-90bb86fd.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e23936a3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-19ad952b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-07245162.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-038b3afd.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-084fe5c1.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-098421fe.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7baefce4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fffdfb9c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d8c9612c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-05c42fda.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-e1615934.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-da824146.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fa2d32f0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-545dbea7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f3ca58cb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b9e2188a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4fc5f1f7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1ec5c70d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-cbf2aa55.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8beb0c08.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ee54da9f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fd28b91d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-98aa51a1.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-03f9381a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2c9009c5.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-71b7cfbe.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1759170e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-aa84186f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-53160af7.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-51b685b4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ecb8e229.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-9c507901.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c6362722.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-faf67dd8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d7f20950.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a088985c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-93b7982c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b76e6179.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d976d39c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b16efd78.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-1301757e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c3240cbe.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a2ddd21c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-74fb5e20.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-128f5026.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8fd9f38a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-82e84e23.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-007ef014.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f3dd860c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-382a2bae.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7b6beaec.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-2eb17cfa.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c6f50213.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0c8aef39.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-133f4d38.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-cffd2be1.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a798219d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6b5fde77.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-13275b71.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-4b6a02c3.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7f179a12.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f45bc33f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0574e5e5.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0921816f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-631fbc02.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8586017d.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-c4dbf09b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-967486c0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-aad17dde.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-ff644d77.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-78a4df64.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8d2180e8.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-53fbcd20.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-a3387e5e.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-979f5ac4.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-0938c506.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-51707e22.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b1e917a0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-6b56a071.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-d15eb498.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7b0a97c0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fda196b5.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bcc5faac.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-490c208f.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-dce28479.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-62825d3c.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-b5a4af15.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-eb40da96.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-8d6d1c61.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-618cf3f0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-f2a35430.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-64f564d2.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-bca2187b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-85181f96.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-7f689b28.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-62aa623a.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-73b8fff0.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-5466ae58.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index.html-fbd0bcfa.js" as="script"><link rel="prefetch" href="/MyBlog/assets/404.html-5f041a2b.js" as="script"><link rel="prefetch" href="/MyBlog/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/MyBlog/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/MyBlog/assets/index-5161ad19.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/MyBlog/" class=""><!----><span class="site-name can-hide">ZyKunã®Blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/MyBlog/" class="" aria-label="ğŸŒ±Home"><!--[--><!--]--> ğŸŒ±Home <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¥Java"><span class="title">ğŸ¥Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¥Java"><span class="title">ğŸ¥Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/01/" class="" aria-label="åŸºç¡€è¯­æ³•"><!--[--><!--]--> åŸºç¡€è¯­æ³• <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/02/" class="" aria-label="é¢å‘å¯¹è±¡ç¼–ç¨‹"><!--[--><!--]--> é¢å‘å¯¹è±¡ç¼–ç¨‹ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/03/" class="" aria-label="å¸¸ç”¨ç±»&amp;é›†åˆæ¡†æ¶"><!--[--><!--]--> å¸¸ç”¨ç±»&amp;é›†åˆæ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/04/" class="" aria-label="JDBC"><!--[--><!--]--> JDBC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/05/" class="" aria-label="Javaé«˜çº§"><!--[--><!--]--> Javaé«˜çº§ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/06/" class="" aria-label="JavaWeb"><!--[--><!--]--> JavaWeb <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸPython"><span class="title">ğŸPython</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸPython"><span class="title">ğŸPython</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/python/01/" class="" aria-label="Pythonå…¥é—¨"><!--[--><!--]--> Pythonå…¥é—¨ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸŒ‹å¾®æœåŠ¡"><span class="title">ğŸŒ‹å¾®æœåŠ¡</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸŒ‹å¾®æœåŠ¡"><span class="title">ğŸŒ‹å¾®æœåŠ¡</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/microservices/01/" class="" aria-label="å®ç”¨ç¯‡"><!--[--><!--]--> å®ç”¨ç¯‡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/microservices/02/" class="" aria-label="é«˜çº§ç¯‡"><!--[--><!--]--> é«˜çº§ç¯‡ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/MyBlog/notes/mysql/" class="" aria-label="ğŸ“Mysql"><!--[--><!--]--> ğŸ“Mysql <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¤å‰ç«¯"><span class="title">ğŸ¤å‰ç«¯</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¤å‰ç«¯"><span class="title">ğŸ¤å‰ç«¯</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/01/" class="" aria-label="HTML&amp;CSS"><!--[--><!--]--> HTML&amp;CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/02/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/03/" class="" aria-label="JQuery"><!--[--><!--]--> JQuery <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/04/" class="" aria-label="Layui"><!--[--><!--]--> Layui <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/05/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¢Project"><span class="title">ğŸ¢Project</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¢Project"><span class="title">ğŸ¢Project</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/project/01/" class="" aria-label="Reggie"><!--[--><!--]--> Reggie <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/project/02/" class="router-link-active" aria-label="51XueCheng"><!--[--><!--]--> 51XueCheng <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/MyBlog/notes/record/" class="" aria-label="ğŸéšç¬”"><!--[--><!--]--> ğŸéšç¬” <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/ZyKunn" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/MyBlog/" class="" aria-label="ğŸŒ±Home"><!--[--><!--]--> ğŸŒ±Home <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¥Java"><span class="title">ğŸ¥Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¥Java"><span class="title">ğŸ¥Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/01/" class="" aria-label="åŸºç¡€è¯­æ³•"><!--[--><!--]--> åŸºç¡€è¯­æ³• <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/02/" class="" aria-label="é¢å‘å¯¹è±¡ç¼–ç¨‹"><!--[--><!--]--> é¢å‘å¯¹è±¡ç¼–ç¨‹ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/03/" class="" aria-label="å¸¸ç”¨ç±»&amp;é›†åˆæ¡†æ¶"><!--[--><!--]--> å¸¸ç”¨ç±»&amp;é›†åˆæ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/04/" class="" aria-label="JDBC"><!--[--><!--]--> JDBC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/05/" class="" aria-label="Javaé«˜çº§"><!--[--><!--]--> Javaé«˜çº§ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/java/06/" class="" aria-label="JavaWeb"><!--[--><!--]--> JavaWeb <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸPython"><span class="title">ğŸPython</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸPython"><span class="title">ğŸPython</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/python/01/" class="" aria-label="Pythonå…¥é—¨"><!--[--><!--]--> Pythonå…¥é—¨ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸŒ‹å¾®æœåŠ¡"><span class="title">ğŸŒ‹å¾®æœåŠ¡</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸŒ‹å¾®æœåŠ¡"><span class="title">ğŸŒ‹å¾®æœåŠ¡</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/microservices/01/" class="" aria-label="å®ç”¨ç¯‡"><!--[--><!--]--> å®ç”¨ç¯‡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/microservices/02/" class="" aria-label="é«˜çº§ç¯‡"><!--[--><!--]--> é«˜çº§ç¯‡ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/MyBlog/notes/mysql/" class="" aria-label="ğŸ“Mysql"><!--[--><!--]--> ğŸ“Mysql <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¤å‰ç«¯"><span class="title">ğŸ¤å‰ç«¯</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¤å‰ç«¯"><span class="title">ğŸ¤å‰ç«¯</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/01/" class="" aria-label="HTML&amp;CSS"><!--[--><!--]--> HTML&amp;CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/02/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/03/" class="" aria-label="JQuery"><!--[--><!--]--> JQuery <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/04/" class="" aria-label="Layui"><!--[--><!--]--> Layui <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/front-end/05/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¢Project"><span class="title">ğŸ¢Project</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¢Project"><span class="title">ğŸ¢Project</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MyBlog/notes/project/01/" class="" aria-label="Reggie"><!--[--><!--]--> Reggie <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/MyBlog/notes/project/02/" class="router-link-active" aria-label="51XueCheng"><!--[--><!--]--> 51XueCheng <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/MyBlog/notes/record/" class="" aria-label="ğŸéšç¬”"><!--[--><!--]--> ğŸéšç¬” <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/ZyKunn" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/MyBlog/notes/project/02/" class="router-link-active sidebar-item sidebar-heading active" aria-label="51XueCheng"><!--[--><!--]--> 51XueCheng <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/MyBlog/notes/project/02/%E7%AC%AC1%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D_%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BAv3.1/" class="sidebar-item" aria-label="ç¬¬ 1 ç«  é¡¹ç›®ä»‹ç»&amp;ç¯å¢ƒæ­å»º v3.1"><!--[--><!--]--> ç¬¬ 1 ç«  é¡¹ç›®ä»‹ç»&amp;ç¯å¢ƒæ­å»º v3.1 <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/project/02/%E7%AC%AC2%E7%AB%A0-%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97v3.1/" class="sidebar-item" aria-label="ç¬¬ 2 ç«  å†…å®¹ç®¡ç†æ¨¡å— v3.1"><!--[--><!--]--> ç¬¬ 2 ç«  å†…å®¹ç®¡ç†æ¨¡å— v3.1 <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/project/02/%E7%AC%AC3%E7%AB%A0-%E5%AA%92%E8%B5%84%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97v3.1/" class="sidebar-item" aria-label="ç¬¬ 3 ç« åª’èµ„ç®¡ç†æ¨¡å— v3.1"><!--[--><!--]--> ç¬¬ 3 ç« åª’èµ„ç®¡ç†æ¨¡å— v3.1 <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/project/02/%E7%AC%AC4%E7%AB%A0-%E8%AF%BE%E7%A8%8B%E5%8F%91%E5%B8%83v3.1/" class="sidebar-item" aria-label="ç¬¬ 4 ç«  è¯¾ç¨‹å‘å¸ƒ v3.1"><!--[--><!--]--> ç¬¬ 4 ç«  è¯¾ç¨‹å‘å¸ƒ v3.1 <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/project/02/%E7%AC%AC5%E7%AB%A0-%E8%AE%A4%E8%AF%81%E6%8E%88%E6%9D%83v3.1/" class="sidebar-item" aria-label="ç¬¬ 5 ç«  è®¤è¯æˆæƒ v3.1"><!--[--><!--]--> ç¬¬ 5 ç«  è®¤è¯æˆæƒ v3.1 <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/project/02/%E7%AC%AC6%E7%AB%A0-%E9%80%89%E8%AF%BE%E5%AD%A6%E4%B9%A0v3.1/" class="sidebar-item" aria-label="ç¬¬ 6 ç«  é€‰è¯¾å­¦ä¹  v3.1"><!--[--><!--]--> ç¬¬ 6 ç«  é€‰è¯¾å­¦ä¹  v3.1 <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/project/02/%E7%AC%AC7%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2v3.1/" class="sidebar-item" aria-label="ç¬¬ 7 ç«  é¡¹ç›®éƒ¨ç½² v3.1"><!--[--><!--]--> ç¬¬ 7 ç«  é¡¹ç›®éƒ¨ç½² v3.1 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="ç¬¬ 8 ç«  é¡¹ç›®ä¼˜åŒ– 3.1"><!--[--><!--]--> ç¬¬ 8 ç«  é¡¹ç›®ä¼˜åŒ– 3.1 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_1-ä¼˜åŒ–éœ€æ±‚" class="router-link-active router-link-exact-active sidebar-item" aria-label="1 ä¼˜åŒ–éœ€æ±‚"><!--[--><!--]--> 1 ä¼˜åŒ–éœ€æ±‚ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_2-å‹åŠ›æµ‹è¯•" class="router-link-active router-link-exact-active sidebar-item" aria-label="2 å‹åŠ›æµ‹è¯•"><!--[--><!--]--> 2 å‹åŠ›æµ‹è¯• <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_2-1-æ€§èƒ½æŒ‡æ ‡" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1 æ€§èƒ½æŒ‡æ ‡"><!--[--><!--]--> 2.1 æ€§èƒ½æŒ‡æ ‡ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_2-2-å®‰è£…-jmeter" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2 å®‰è£… Jmeter"><!--[--><!--]--> 2.2 å®‰è£… Jmeter <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_2-3-å‹åŠ›æµ‹è¯•æ ·æœ¬æ•°-200-ä¸ªçº¿ç¨‹-æ¯ä¸ªçº¿ç¨‹è¯·æ±‚-100-æ¬¡-å…±-20000-æ¬¡" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3 å‹åŠ›æµ‹è¯•æ ·æœ¬æ•°ï¼š200 ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹è¯·æ±‚ 100 æ¬¡ï¼Œå…± 20000 æ¬¡"><!--[--><!--]--> 2.3 å‹åŠ›æµ‹è¯•æ ·æœ¬æ•°ï¼š200 ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹è¯·æ±‚ 100 æ¬¡ï¼Œå…± 20000 æ¬¡ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_2-4-ä¼˜åŒ–æ—¥å¿—" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.4 ä¼˜åŒ–æ—¥å¿—"><!--[--><!--]--> 2.4 ä¼˜åŒ–æ—¥å¿— <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-ç¼“å­˜ä¼˜åŒ–" class="router-link-active router-link-exact-active sidebar-item" aria-label="3 ç¼“å­˜ä¼˜åŒ–"><!--[--><!--]--> 3 ç¼“å­˜ä¼˜åŒ– <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-1-redis-ç¼“å­˜" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1 redis ç¼“å­˜"><!--[--><!--]--> 3.1 redis ç¼“å­˜ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-2-ç¼“å­˜ç©¿é€é—®é¢˜" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2 ç¼“å­˜ç©¿é€é—®é¢˜"><!--[--><!--]--> 3.2 ç¼“å­˜ç©¿é€é—®é¢˜ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-2-1-ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2.1 ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€"><!--[--><!--]--> 3.2.1 ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-2-2-è§£å†³ç¼“å­˜ç©¿é€" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2.2 è§£å†³ç¼“å­˜ç©¿é€"><!--[--><!--]--> 3.2.2 è§£å†³ç¼“å­˜ç©¿é€ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-3-ç¼“å­˜é›ªå´©" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3 ç¼“å­˜é›ªå´©"><!--[--><!--]--> 3.3 ç¼“å­˜é›ªå´© <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-3-1-ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.1 ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©"><!--[--><!--]--> 3.3.1 ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´© <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-3-2-è§£å†³ç¼“å­˜é›ªå´©" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.2 è§£å†³ç¼“å­˜é›ªå´©"><!--[--><!--]--> 3.3.2 è§£å†³ç¼“å­˜é›ªå´© <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-4-ç¼“å­˜å‡»ç©¿" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4 ç¼“å­˜å‡»ç©¿"><!--[--><!--]--> 3.4 ç¼“å­˜å‡»ç©¿ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-4-1-ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4.1 ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿"><!--[--><!--]--> 3.4.1 ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-4-2-è§£å†³ç¼“å­˜å‡»ç©¿" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4.2 è§£å†³ç¼“å­˜å‡»ç©¿"><!--[--><!--]--> 3.4.2 è§£å†³ç¼“å­˜å‡»ç©¿ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-4-3-å°ç»“" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4.3 å°ç»“"><!--[--><!--]--> 3.4.3 å°ç»“ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-5-åˆ†å¸ƒå¼é”" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5 åˆ†å¸ƒå¼é”"><!--[--><!--]--> 3.5 åˆ†å¸ƒå¼é” <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-5-1-æœ¬åœ°é”çš„é—®é¢˜" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.1 æœ¬åœ°é”çš„é—®é¢˜"><!--[--><!--]--> 3.5.1 æœ¬åœ°é”çš„é—®é¢˜ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-5-2-ä»€ä¹ˆæ˜¯åˆ†å¸ƒé”" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.2 ä»€ä¹ˆæ˜¯åˆ†å¸ƒé”"><!--[--><!--]--> 3.5.2 ä»€ä¹ˆæ˜¯åˆ†å¸ƒé” <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-5-3-åˆ†å¸ƒå¼é”çš„å®ç°æ–¹æ¡ˆ" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.3 åˆ†å¸ƒå¼é”çš„å®ç°æ–¹æ¡ˆ"><!--[--><!--]--> 3.5.3 åˆ†å¸ƒå¼é”çš„å®ç°æ–¹æ¡ˆ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-5-4-redis-nx-å®ç°åˆ†å¸ƒå¼é”" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.4 Redis NX å®ç°åˆ†å¸ƒå¼é”"><!--[--><!--]--> 3.5.4 Redis NX å®ç°åˆ†å¸ƒå¼é” <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-5-5-redisson-å®ç°åˆ†å¸ƒå¼é”" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.5 Redisson å®ç°åˆ†å¸ƒå¼é”"><!--[--><!--]--> 3.5.5 Redisson å®ç°åˆ†å¸ƒå¼é” <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-5-5-1-ä»€ä¹ˆæ˜¯-redisson" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.5.1 ä»€ä¹ˆæ˜¯ Redisson"><!--[--><!--]--> 3.5.5.1 ä»€ä¹ˆæ˜¯ Redisson <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-5-5-3-åˆ†å¸ƒå¼é”é¿å…ç¼“å­˜å‡»ç©¿" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.5.3 åˆ†å¸ƒå¼é”é¿å…ç¼“å­˜å‡»ç©¿"><!--[--><!--]--> 3.5.5.3 åˆ†å¸ƒå¼é”é¿å…ç¼“å­˜å‡»ç©¿ <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul></li><li><a href="/MyBlog/notes/project/02/%E8%AF%BE%E7%A8%8B%E5%8F%91%E5%B8%83-%E9%83%A8%E7%BD%B2%E9%97%A8%E6%88%B7%E6%96%87%E6%A1%A3/" class="sidebar-item" aria-label="è¯¾ç¨‹å‘å¸ƒ-éƒ¨ç½²é—¨æˆ·æ–‡æ¡£ v3.1"><!--[--><!--]--> è¯¾ç¨‹å‘å¸ƒ-éƒ¨ç½²é—¨æˆ·æ–‡æ¡£ v3.1 <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/project/02/%E5%BE%AE%E4%BF%A1%E6%89%AB%E7%A0%81%E7%99%BB%E5%BD%95%E9%85%8D%E7%BD%AE/" class="sidebar-item" aria-label="å¾®ä¿¡æ‰«ç ç™»å½•é…ç½®"><!--[--><!--]--> å¾®ä¿¡æ‰«ç ç™»å½•é…ç½® <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/project/02/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AEv3.1/" class="sidebar-item" aria-label="å­¦æˆåœ¨çº¿é¡¹ç›®å¼€å‘ç¯å¢ƒé…ç½® v3.1"><!--[--><!--]--> å­¦æˆåœ¨çº¿é¡¹ç›®å¼€å‘ç¯å¢ƒé…ç½® v3.1 <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/project/02/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%B2%99%E7%AE%B1%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" class="sidebar-item" aria-label="æ”¯ä»˜å®æ²™ç®±ç¯å¢ƒ"><!--[--><!--]--> æ”¯ä»˜å®æ²™ç®±ç¯å¢ƒ <!--[--><!--]--></a><!----></li><li><a href="/MyBlog/notes/project/02/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/" class="sidebar-item" aria-label="é¡¹ç›®æ€»ç»“"><!--[--><!--]--> é¡¹ç›®æ€»ç»“ <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="ç¬¬-8-ç« -é¡¹ç›®ä¼˜åŒ–-3-1" tabindex="-1"><a class="header-anchor" href="#ç¬¬-8-ç« -é¡¹ç›®ä¼˜åŒ–-3-1" aria-hidden="true">#</a> <strong>ç¬¬ 8 ç«  é¡¹ç›®ä¼˜åŒ– 3.1</strong></h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_1-ä¼˜åŒ–éœ€æ±‚" class="router-link-active router-link-exact-active">1 ä¼˜åŒ–éœ€æ±‚</a></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_2-å‹åŠ›æµ‹è¯•" class="router-link-active router-link-exact-active">2 å‹åŠ›æµ‹è¯•</a><ul><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_2-1-æ€§èƒ½æŒ‡æ ‡" class="router-link-active router-link-exact-active">2.1 æ€§èƒ½æŒ‡æ ‡</a></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_2-2-å®‰è£…-jmeter" class="router-link-active router-link-exact-active">2.2 å®‰è£… Jmeter</a></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_2-3-å‹åŠ›æµ‹è¯•æ ·æœ¬æ•°-200-ä¸ªçº¿ç¨‹-æ¯ä¸ªçº¿ç¨‹è¯·æ±‚-100-æ¬¡-å…±-20000-æ¬¡" class="router-link-active router-link-exact-active">2.3 å‹åŠ›æµ‹è¯•æ ·æœ¬æ•°ï¼š200 ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹è¯·æ±‚ 100 æ¬¡ï¼Œå…± 20000 æ¬¡</a></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_2-4-ä¼˜åŒ–æ—¥å¿—" class="router-link-active router-link-exact-active">2.4 ä¼˜åŒ–æ—¥å¿—</a></li></ul></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-ç¼“å­˜ä¼˜åŒ–" class="router-link-active router-link-exact-active">3 ç¼“å­˜ä¼˜åŒ–</a><ul><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-1-redis-ç¼“å­˜" class="router-link-active router-link-exact-active">3.1 redis ç¼“å­˜</a></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-2-ç¼“å­˜ç©¿é€é—®é¢˜" class="router-link-active router-link-exact-active">3.2 ç¼“å­˜ç©¿é€é—®é¢˜</a></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-3-ç¼“å­˜é›ªå´©" class="router-link-active router-link-exact-active">3.3 ç¼“å­˜é›ªå´©</a></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-4-ç¼“å­˜å‡»ç©¿" class="router-link-active router-link-exact-active">3.4 ç¼“å­˜å‡»ç©¿</a></li><li><a aria-current="page" href="/MyBlog/notes/project/02/%E7%AC%AC8%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%963.1/#_3-5-åˆ†å¸ƒå¼é”" class="router-link-active router-link-exact-active">3.5 åˆ†å¸ƒå¼é”</a></li></ul></li></ul></nav><h2 id="_1-ä¼˜åŒ–éœ€æ±‚" tabindex="-1"><a class="header-anchor" href="#_1-ä¼˜åŒ–éœ€æ±‚" aria-hidden="true">#</a> <strong>1 ä¼˜åŒ–éœ€æ±‚</strong></h2><p>è§†é¢‘æ’­æ”¾é¡µé¢ç”¨æˆ·æœªç™»å½•ä¹Ÿå¯ä»¥è®¿é—®ï¼Œå½“ç”¨æˆ·è§‚çœ‹è¯•å­¦è¯¾ç¨‹æ—¶éœ€è¦è¯·æ±‚æœåŠ¡ç«¯æŸ¥è¯¢æ•°æ®ï¼Œæ¥å£å¦‚ä¸‹ï¼š</p><p>1ã€æ ¹æ®è¯¾ç¨‹ id æŸ¥è¯¢è¯¾ç¨‹ä¿¡æ¯ã€‚</p><p>2ã€æ ¹æ®æ–‡ä»¶ id æŸ¥è¯¢è§†é¢‘ä¿¡æ¯ã€‚</p><p>è¿™äº›æ¥å£åœ¨ç”¨æˆ·æœªè®¤è¯çŠ¶æ€ä¸‹ä¹Ÿå¯ä»¥è®¿é—®ï¼Œå¦‚æœæ¥å£çš„æ€§èƒ½ä¸é«˜ï¼Œå½“é«˜å¹¶å‘åˆ°æ¥å¾ˆå¯èƒ½è€—å°½æ•´ä¸ªç³»ç»Ÿçš„èµ„æºï¼Œå°†æ•´ä¸ªç³»ç»Ÿå‹å®ï¼Œæ‰€ä»¥ç‰¹åˆ«éœ€è¦å¯¹è¿™äº›æš´éœ²åœ¨å¤–è¾¹çš„æ¥å£è¿›è¡Œä¼˜åŒ–ã€‚</p><p>ä¸‹è¾¹å¯¹ æ ¹æ®è¯¾ç¨‹ id æŸ¥è¯¢è¯¾ç¨‹ä¿¡æ¯ æ¥å£è¿›è¡Œä¼˜åŒ–ï¼Œä¸‹è¾¹çš„å†…å®¹å°†æ­¤æ¥å£ç®€ç§°ä¸ºè¯¾ç¨‹æŸ¥è¯¢æ¥å£ã€‚</p><p>æ¥å£åœ°å€ï¼šhttp://www.51xuecheng.cn/open/content/course/whole/{courseId}</p><p><img src="/MyBlog/assets/image-20230617144836682-a5ffcd5e.png" alt="image-20230617144836682"></p><h2 id="_2-å‹åŠ›æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_2-å‹åŠ›æµ‹è¯•" aria-hidden="true">#</a> <strong>2 å‹åŠ›æµ‹è¯•</strong></h2><h3 id="_2-1-æ€§èƒ½æŒ‡æ ‡" tabindex="-1"><a class="header-anchor" href="#_2-1-æ€§èƒ½æŒ‡æ ‡" aria-hidden="true">#</a> <strong>2.1 æ€§èƒ½æŒ‡æ ‡</strong></h3><p>å¯¹æ¥å£è¿›è¡Œä¼˜åŒ–ä¹‹å‰éœ€è¦å¯¹æ¥å£è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œä¸ä»…æ¥å£éœ€è¦å‹åŠ›æµ‹è¯•ï¼Œæ•´ä¸ªå¾®æœåŠ¡åœ¨å‘å¸ƒå‰ä¹Ÿæ˜¯éœ€è¦ç»å†å‹åŠ›æµ‹è¯•çš„ï¼Œå› ä¸ºå‹åŠ›æµ‹è¯•å¯ä»¥æš´éœ²åŠŸèƒ½æµ‹è¯•æ‰€å‘ç°ä¸äº†çš„é—®é¢˜ã€‚</p><p>åŠŸèƒ½æµ‹è¯•å³æ˜¯å¯¹ç³»ç»Ÿçš„åŠŸèƒ½æŒ‰ç”¨æˆ·éœ€æ±‚è¿›è¡Œæµ‹è¯•ï¼Œæ¯”å¦‚ï¼šæ·»åŠ ä¸€é—¨è¯¾ç¨‹ï¼Œæ ¹æ®éœ€æ±‚æ–‡æ¡£å…ˆå‡†å¤‡æµ‹è¯•æ•°æ®ï¼Œå†é€šè¿‡å‰ç«¯ç•Œé¢å°†ä¸€é—¨è¯¾ç¨‹æ·»åŠ åˆ°ç³»ç»Ÿï¼Œæµ‹è¯•æ˜¯å¦å¯ä»¥æ“ä½œæˆåŠŸã€‚æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯æµ‹è¯•è½¯ä»¶æ˜¯å¦å¯ä»¥å®ç°ç”¨æˆ·çš„éœ€æ±‚ã€‚</p><p>å‹åŠ›æµ‹è¯•æ˜¯é€šè¿‡æµ‹è¯•å·¥å…·åˆ¶é€ å¤§è§„æ¨¡çš„å¹¶å‘è¯·æ±‚å»è®¿é—®ç³»ç»Ÿï¼Œæµ‹è¯•ç³»ç»Ÿæ˜¯å¦ç»å—ä½å‹åŠ›ã€‚</p><p>æ¯”å¦‚ï¼šä¸€ä¸ªåœ¨çº¿å­¦ä¹ ç½‘ç«™ï¼Œä¸Šçº¿è¦æ±‚è¯¥ç½‘ç«™å¯ä»¥æ”¯æŒ 1 ä¸‡ç”¨æˆ·åŒæ—¶åœ¨çº¿ï¼Œæ­¤æ—¶å°±éœ€è¦æ¨¡æ‹Ÿ 1 ä¸‡å¹¶å‘è¯·æ±‚å»è®¿é—®ç½‘ç«™çš„å…³é”®ä¸šåŠ¡æµç¨‹ï¼Œæ¯”å¦‚ï¼šæµ‹è¯•ç‚¹æ’­å­¦ä¹ æµç¨‹ï¼Œæµ‹è¯•ç³»ç»Ÿæ˜¯å¦å¯ä»¥æŠ—ä½ 1 ä¸‡å¹¶å‘è¯·æ±‚ã€‚</p><p>ä¸€äº›åŠŸèƒ½æµ‹è¯•æ—¶æ— æ³•å‘ç°çš„é—®é¢˜åœ¨å‹åŠ›æµ‹è¯•æ—¶å°±ä¼šå‘ç°ï¼Œæ¯”å¦‚ï¼šå†…å­˜æ³„éœ²ã€çº¿ç¨‹å®‰å…¨ã€IO å¼‚å¸¸ç­‰é—®é¢˜ã€‚</p><p>å‹åŠ›æµ‹è¯•å¸¸ç”¨çš„æ€§èƒ½æŒ‡æ ‡å¦‚ä¸‹ï¼š</p><blockquote><p>1ã€ååé‡</p></blockquote><p>ååé‡æ˜¯ç³»ç»Ÿæ¯ç§’å¯ä»¥å¤„ç†çš„äº‹åŠ¡æ•°ï¼Œä¹Ÿç§°ä¸º TPSï¼ˆTransaction Per Secondï¼‰ã€‚</p><p>æ¯”å¦‚ï¼šä¸€æ¬¡ç‚¹æ’­æµç¨‹ï¼Œä»è¯·æ±‚è¿›å…¥ç³»ç»Ÿåˆ°è§†é¢‘ç”»å›¾æ˜¾ç¤ºå‡ºæ¥è¿™æ•´ä¸ªæµç¨‹å°±æ˜¯ä¸€æ¬¡äº‹åŠ¡ã€‚</p><p>æ‰€ä»¥ååé‡å¹¶ä¸æ˜¯ä¸€æ¬¡æ•°æ®åº“äº‹åŠ¡ï¼Œå®ƒæ˜¯å®Œæˆä¸€æ¬¡ä¸šåŠ¡çš„æ•´ä½“æµç¨‹ã€‚</p><blockquote><p>2ã€å“åº”æ—¶é—´</p></blockquote><p>å“åº”æ—¶é—´æ˜¯æŒ‡å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯ï¼Œä»è¯·æ±‚è¿›å…¥ç³»ç»Ÿåˆ°å®¢æˆ·ç«¯æ‹¿åˆ°å“åº”ç»“æœæ‰€ç»å†çš„æ—¶é—´ã€‚å“åº”æ—¶é—´åŒ…æ‹¬ï¼šæœ€å¤§å“åº”æ—¶é—´ã€æœ€å°å“åº”æ—¶é—´ã€å¹³å‡å“åº”æ—¶é—´ã€‚</p><blockquote><p>3ã€æ¯ç§’æŸ¥è¯¢æ•°</p></blockquote><p>æ¯ç§’æŸ¥è¯¢æ•°å³ QPSï¼ˆQueries-per-secondï¼‰ï¼Œå®ƒæ˜¯è¡¡é‡æŸ¥è¯¢æ¥å£çš„æ€§èƒ½æŒ‡æ ‡ï¼Œæ¯”å¦‚ï¼šå•†å“ä¿¡æ¯æŸ¥è¯¢ï¼Œ ä¸€ç§’å¯ä»¥è¯·æ±‚è¯¥æ¥å£æŸ¥è¯¢å•†å“ä¿¡æ¯çš„æ¬¡æ•°å°±æ˜¯ QPSã€‚</p><p>æ‹¿æŸ¥è¯¢æ¥å£ä¸¾ä¾‹ï¼Œä¸€æ¬¡æŸ¥è¯¢è¯·æ±‚å†…éƒ¨ä¸ä¼šå†å»è¯·æ±‚å…¶å®ƒæ¥å£ï¼Œæ­¤æ—¶ QPS=TPS</p><p>å¦‚æœä¸€æ¬¡æŸ¥è¯¢è¯·æ±‚å†…å®¹éœ€è¦è¿œç¨‹è°ƒç”¨å¦ä¸€ä¸ªæ¥å£æŸ¥è¯¢æ•°æ®ï¼Œæ­¤æ—¶ QPS=2 * TPS</p><blockquote><p>4ã€é”™è¯¯ç‡</p></blockquote><p>é”™è¯¯ç‡ æ˜¯ä¸€æ‰¹è¯·æ±‚å‘ç”Ÿé”™è¯¯çš„è¯·æ±‚å å…¨éƒ¨è¯·æ±‚çš„æ¯”ä¾‹ã€‚</p><p>ä¸åŒçš„æŒ‡æ ‡å…¶è¦æ±‚ä¸åŒï¼Œæ¯”å¦‚ç°åœ¨è¿›è¡Œæ¥å£ä¼˜åŒ–ï¼Œä¼˜åŒ–åçš„æ¥å£å“åº”æ—¶é—´åº”è¯¥è¶Šæ¥è¶Šå°ï¼Œååé‡è¶Šæ¥è¶Šå¤§ï¼Œä»¥åŠ QPS å€¼ä¹Ÿæ˜¯è¶Šå¤§è¶Šå¥½ï¼Œé”™è¯¯ç‡è¦ä¿æŒåœ¨ä¸€ä¸ªå¾ˆå°çš„èŒƒå›´ã€‚</p><p>å¦å¤–é™¤äº†å…³æ³¨è¿™äº›æ€§èƒ½æŒ‡æ ‡ä»¥å¤–è¿˜è¦å…³æ³¨ç³»ç»Ÿçš„è´Ÿè½½æƒ…å†µï¼š</p><p>1ã€CPU ä½¿ç”¨ç‡ï¼Œä¸é«˜äº 85%</p><p>2ã€å†…å­˜åˆ©ç”¨ç‡ï¼Œä¸é«˜äº 85%</p><p>3ã€ç½‘ç»œåˆ©ç”¨ç‡ï¼Œä¸é«˜äº 80%</p><p>4ã€ç£ç›˜ IO</p><p>ç£ç›˜ IO çš„æ€§èƒ½æŒ‡æ ‡æ˜¯ IOPS (Input/Output Per Second)å³æ¯ç§’çš„è¾“å…¥è¾“å‡ºé‡(æˆ–è¯»å†™æ¬¡æ•°)ã€‚</p><p>å¦‚æœè¿‡å¤§è¯´æ˜ IO æ“ä½œå¯†é›†ï¼ŒIO è¿‡å¤§ä¹Ÿä¼šå½±å“æ€§èƒ½æŒ‡æ ‡ã€‚</p><h3 id="_2-2-å®‰è£…-jmeter" tabindex="-1"><a class="header-anchor" href="#_2-2-å®‰è£…-jmeter" aria-hidden="true">#</a> <strong>2.2 å®‰è£… Jmeter</strong></h3><p>Apache JMeter æ˜¯ Apache ç»„ç»‡åŸºäº Java å¼€å‘çš„å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œç”¨äºå¯¹è½¯ä»¶åšå‹åŠ›æµ‹è¯•ã€‚</p><p>ä¸‹è½½ Jmeter</p><p>https://jmeter.apache.org/download_jmeter.cgi</p><p><img src="/MyBlog/assets/image-20230617144849718-00743e66.png" alt="image-20230617144849718"></p><p>ä¸‹è½½ï¼Œè§£å‹ï¼Œè¿›å…¥ bin ç›®å½•ä¿®æ”¹ jmeter.propertiesï¼Œè®¾ç½®ä¸­æ–‡å’Œå­—ä½“</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">language</span><span class="token punctuation">=</span><span class="token value attr-value">zh_CN</span>
<span class="token key attr-name">jmeter.hidpi.mode</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">jmeter.hidpi.scale.factor</span><span class="token punctuation">=</span><span class="token value attr-value">1.8</span>
<span class="token key attr-name">jsyntaxtextarea.font.family</span><span class="token punctuation">=</span> <span class="token value attr-value">Hack</span>
<span class="token key attr-name">jsyntaxtextarea.font.size</span><span class="token punctuation">=</span><span class="token value attr-value">25</span>
<span class="token key attr-name">jmeter.toolbar.icons.size</span><span class="token punctuation">=</span><span class="token value attr-value">32x32</span>
<span class="token key attr-name">jmeter.tree.icons.size</span><span class="token punctuation">=</span><span class="token value attr-value">24x24</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒå‡»è¿è¡Œ bin ç›®å½•ä¸‹çš„ jmeter.bat æ–‡ä»¶ã€‚</p><p><img src="/MyBlog/assets/image-20230617144912868-73382e7e.png" alt="image-20230617144912868"></p><p>ç•Œé¢å¦‚ä¸‹å›¾ï¼š</p><p><img src="/MyBlog/assets/image-20230617144917881-6a5ada58.png" alt="image-20230617144917881"></p><h3 id="_2-3-å‹åŠ›æµ‹è¯•æ ·æœ¬æ•°-200-ä¸ªçº¿ç¨‹-æ¯ä¸ªçº¿ç¨‹è¯·æ±‚-100-æ¬¡-å…±-20000-æ¬¡" tabindex="-1"><a class="header-anchor" href="#_2-3-å‹åŠ›æµ‹è¯•æ ·æœ¬æ•°-200-ä¸ªçº¿ç¨‹-æ¯ä¸ªçº¿ç¨‹è¯·æ±‚-100-æ¬¡-å…±-20000-æ¬¡" aria-hidden="true">#</a> 2.3 å‹åŠ›æµ‹è¯•æ ·æœ¬æ•°ï¼š200 ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹è¯·æ±‚ 100 æ¬¡ï¼Œå…± 20000 æ¬¡</h3><p>å‹åŠ›æœºï¼šé€šå¸¸å‹åŠ›æœºæ˜¯å•ç‹¬çš„å®¢æˆ·ç«¯ã€‚</p><p>æµ‹è¯• gateway+content</p><p>ååé‡ 180 å·¦å³</p><p><img src="/MyBlog/assets/image-20230617144923614-58ffc023.png" alt="image-20230617144923614"></p><p>æµ‹è¯• content</p><p>ååé‡ 300 å·¦å³</p><p><img src="/MyBlog/assets/image-20230617144927769-f1493c4c.png" alt="image-20230617144927769"></p><h3 id="_2-4-ä¼˜åŒ–æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#_2-4-ä¼˜åŒ–æ—¥å¿—" aria-hidden="true">#</a> <strong>2.4 ä¼˜åŒ–æ—¥å¿—</strong></h3><p>å†…å®¹ç®¡ç†æ—¥å¿—çº§åˆ«æ”¹ä¸º info çº§åˆ«.</p><p><img src="/MyBlog/assets/image-20230617144934693-53752939.png" alt="image-20230617144934693"></p><p>å•ç‹¬è¯·æ±‚å†…å®¹ç®¡ç†æµ‹è¯•ï¼Œååé‡è¾¾åˆ° 1500 å·¦å³</p><p><img src="/MyBlog/assets/image-20230617144937087-1d2d339c.png" alt="image-20230617144937087"></p><h2 id="_3-ç¼“å­˜ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_3-ç¼“å­˜ä¼˜åŒ–" aria-hidden="true">#</a> <strong>3 ç¼“å­˜ä¼˜åŒ–</strong></h2><h3 id="_3-1-redis-ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_3-1-redis-ç¼“å­˜" aria-hidden="true">#</a> <strong>3.1 redis ç¼“å­˜</strong></h3><p>æµ‹è¯•ç”¨ä¾‹æ˜¯æ ¹æ® id æŸ¥è¯¢è¯¾ç¨‹ä¿¡æ¯ï¼Œè¿™é‡Œä¸å­˜åœ¨å¤æ‚çš„ SQLï¼Œä¹Ÿä¸å­˜åœ¨æ•°æ®åº“è¿æ¥ä¸é‡Šæ”¾çš„é—®é¢˜ï¼Œæš‚æ—¶ä¸è€ƒè™‘æ•°æ®åº“æ–¹é¢çš„ä¼˜åŒ–ã€‚</p><p>è¯¾ç¨‹å‘å¸ƒä¿¡æ¯çš„ç‰¹ç‚¹çš„æ˜¯æŸ¥è¯¢è¾ƒå¤šï¼Œä¿®æ”¹å¾ˆå°‘ï¼Œè¿™é‡Œè€ƒè™‘å°†è¯¾ç¨‹å‘å¸ƒä¿¡æ¯è¿›è¡Œç¼“å­˜ã€‚</p><p>è¯¾ç¨‹ä¿¡æ¯ç¼“å­˜çš„æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="/MyBlog/assets/image-20230617144941280-182aa14a.png" alt="image-20230617144941280"></p><p>åœ¨ nacos é…ç½® redis-dev.yamlï¼ˆgroup=xuecheng-plus-commonï¼‰</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> 192.168.101.65
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">database</span><span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token key atrule">lettuce</span><span class="token punctuation">:</span>
      <span class="token key atrule">pool</span><span class="token punctuation">:</span>
        <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">20</span>
        <span class="token key atrule">max-idle</span><span class="token punctuation">:</span> <span class="token number">10</span>
        <span class="token key atrule">min-idle</span><span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token key atrule">timeout</span><span class="token punctuation">:</span> <span class="token number">10000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ content-api å¾®æœåŠ¡åŠ è½½ redis-dev.yaml</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">shared-configs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">data-id</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>$<span class="token punctuation">{</span>spring.profiles.active<span class="token punctuation">}</span>.yaml
    <span class="token key atrule">group</span><span class="token punctuation">:</span> xuecheng<span class="token punctuation">-</span>plus<span class="token punctuation">-</span>common
    <span class="token key atrule">refresh</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ content-service å¾®æœåŠ¡ä¸­æ·»åŠ ä¾èµ–</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-pool2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®šä¹‰æŸ¥è¯¢ç¼“å­˜æ¥å£ï¼š</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>
/**
 * @description æŸ¥è¯¢ç¼“å­˜ä¸­çš„è¯¾ç¨‹ä¿¡æ¯
 * @param courseId
 * @return com.xuecheng.content.model.po.CoursePublish
 * @author Mr.M
 * @date 2022/10/22 16:15
*/
public CoursePublish getCoursePublishCache(Long courseId);

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥å£å®ç°å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">CoursePublish</span> <span class="token function">getCoursePublishCache</span><span class="token punctuation">(</span><span class="token class-name">Long</span> courseId<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//æŸ¥è¯¢ç¼“å­˜</span>
   <span class="token class-name">Object</span>  jsonObj <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;course:&quot;</span> <span class="token operator">+</span> courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>jsonObj<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> jsonString <span class="token operator">=</span> jsonObj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=================ä»ç¼“å­˜æŸ¥=================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CoursePublish</span> coursePublish <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">,</span> <span class="token class-name">CoursePublish</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> coursePublish<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä»æ•°æ®åº“æŸ¥è¯¢...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ä»æ•°æ®åº“æŸ¥è¯¢</span>
        <span class="token class-name">CoursePublish</span> coursePublish <span class="token operator">=</span> <span class="token function">getCoursePublish</span><span class="token punctuation">(</span>courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>coursePublish<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;course:&quot;</span> <span class="token operator">+</span> courseId<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>coursePublish<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coursePublish<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿®æ”¹ controller æ¥å£è°ƒç”¨ä»£ç </p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">&quot;è·å–è¯¾ç¨‹å‘å¸ƒä¿¡æ¯&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/course/whole/{courseId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CoursePreviewDto</span> <span class="token function">getCoursePublish</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;courseId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> courseId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//æŸ¥è¯¢è¯¾ç¨‹å‘å¸ƒä¿¡æ¯</span>
        <span class="token class-name">CoursePublish</span> coursePublish <span class="token operator">=</span> coursePublishService<span class="token punctuation">.</span><span class="token function">getCoursePublishCache</span><span class="token punctuation">(</span>courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        CoursePublish coursePublish = coursePublishService.getCoursePublish(courseId);</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>coursePublish<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CoursePreviewDto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯</span>
        <span class="token class-name">CourseBaseInfoDto</span> courseBase <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CourseBaseInfoDto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>coursePublish<span class="token punctuation">,</span> courseBase<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è¯¾ç¨‹è®¡åˆ’</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TeachplanDto</span><span class="token punctuation">&gt;</span></span> teachplans <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseArray</span><span class="token punctuation">(</span>coursePublish<span class="token punctuation">.</span><span class="token function">getTeachplan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">TeachplanDto</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CoursePreviewDto</span> coursePreviewInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CoursePreviewDto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coursePreviewInfo<span class="token punctuation">.</span><span class="token function">setCourseBase</span><span class="token punctuation">(</span>courseBase<span class="token punctuation">)</span><span class="token punctuation">;</span>
        coursePreviewInfo<span class="token punctuation">.</span><span class="token function">setTeachplans</span><span class="token punctuation">(</span>teachplans<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> coursePreviewInfo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡æ–°æµ‹è¯•è¯·æ±‚å†…å®¹ç®¡ç†æœåŠ¡è¯¾ç¨‹æŸ¥è¯¢æ¥å£ã€‚</p><p>ååé‡è¾¾åˆ° 2700 å·¦å³ï¼Œå¢åŠ äº†è¿‘ä¸€å€ã€‚</p><p><img src="/MyBlog/assets/image-20230617145111147-1427d1fd.png" alt="image-20230617145111147"></p><h3 id="_3-2-ç¼“å­˜ç©¿é€é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_3-2-ç¼“å­˜ç©¿é€é—®é¢˜" aria-hidden="true">#</a> <strong>3.2 ç¼“å­˜ç©¿é€é—®é¢˜</strong></h3><h4 id="_3-2-1-ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€" tabindex="-1"><a class="header-anchor" href="#_3-2-1-ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€" aria-hidden="true">#</a> <strong>3.2.1 ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€</strong></h4><p>ä½¿ç”¨ç¼“å­˜åä»£ç çš„æ€§èƒ½æœ‰äº†å¾ˆå¤§çš„æé«˜ï¼Œè™½ç„¶æ€§èƒ½æœ‰å¾ˆå¤§çš„æå‡ä½†æ˜¯æ§åˆ¶å°æ‰“å‡ºäº†å¾ˆå¤šâ€œä»æ•°æ®åº“æŸ¥è¯¢â€çš„æ—¥å¿—ï¼Œæ˜æ˜åˆ¤æ–­äº†å¦‚æœç¼“å­˜å­˜åœ¨è¯¾ç¨‹ä¿¡æ¯åˆ™ä»ç¼“å­˜æŸ¥è¯¢ï¼Œä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¹ˆå¤šä»æ•°æ®åº“æŸ¥è¯¢çš„è¯·æ±‚çš„ï¼Ÿ</p><p><img src="/MyBlog/assets/image-20230617235024844-c6f0e50c.png" alt="image-20230617235024844"></p><p><strong>è¿™æ˜¯å› ä¸ºå¹¶å‘æ•°é«˜ï¼Œå¾ˆå¤šçº¿ç¨‹ä¼šåŒæ—¶åˆ°è¾¾æŸ¥è¯¢æ•°æ®åº“ä»£ç å¤„å»æ‰§è¡Œã€‚</strong></p><p>æˆ‘ä»¬åˆ†æä¸‹ä»£ç ï¼š</p><p><img src="/MyBlog/assets/image-20230617145115251-ff1d8523.png" alt="image-20230617145115251"></p><p>å¦‚æœå­˜åœ¨æ¶æ„æ”»å‡»çš„å¯èƒ½ï¼Œå¦‚æœæœ‰å¤§é‡å¹¶å‘å»æŸ¥è¯¢ä¸€ä¸ªä¸å­˜åœ¨çš„è¯¾ç¨‹ä¿¡æ¯ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</p><p>æ¯”å¦‚å»è¯·æ±‚/content/course/whole/181ï¼ŒæŸ¥è¯¢ 181 å·è¯¾ç¨‹ï¼Œè¯¥è¯¾ç¨‹å¹¶ä¸åœ¨è¯¾ç¨‹å‘å¸ƒè¡¨ä¸­ã€‚</p><p>è¿›è¡Œå‹åŠ›æµ‹è¯•å‘ç°ä¼šå»è¯·æ±‚æ•°æ®åº“ã€‚</p><p>å¤§é‡å¹¶å‘å»è®¿é—®ä¸€ä¸ªæ•°æ®åº“ä¸å­˜åœ¨çš„æ•°æ®ï¼Œç”±äºç¼“å­˜ä¸­æ²¡æœ‰è¯¥æ•°æ®å¯¼è‡´å¤§é‡å¹¶å‘æŸ¥è¯¢æ•°æ®åº“ï¼Œè¿™ä¸ªç°è±¡è¦ç¼“å­˜ç©¿é€ã€‚</p><p><img src="/MyBlog/assets/image-20230617145119822-03263054.png" alt="image-20230617145119822"></p><p>ç¼“å­˜ç©¿é€å¯ä»¥é€ æˆæ•°æ®åº“ç¬é—´å‹åŠ›è¿‡å¤§ï¼Œè¿æ¥æ•°ç­‰èµ„æºç”¨å®Œï¼Œæœ€ç»ˆæ•°æ®åº“æ‹’ç»è¿æ¥ä¸å¯ç”¨ã€‚</p><h4 id="_3-2-2-è§£å†³ç¼“å­˜ç©¿é€" tabindex="-1"><a class="header-anchor" href="#_3-2-2-è§£å†³ç¼“å­˜ç©¿é€" aria-hidden="true">#</a> <strong>3.2.2 è§£å†³ç¼“å­˜ç©¿é€</strong></h4><p>å¦‚ä½•è§£å†³ç¼“å­˜ç©¿é€?</p><p>1ã€å¯¹è¯·æ±‚å¢åŠ æ ¡éªŒæœºåˆ¶</p><p>æ¯”å¦‚ï¼šè¯¾ç¨‹ Id æ˜¯é•¿æ•´å‹ï¼Œå¦‚æœå‘æ¥çš„ä¸æ˜¯é•¿æ•´å‹åˆ™ç›´æ¥è¿”å›ã€‚</p><p>2ã€ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨</p><p>ä»€ä¹ˆæ˜¯å¸ƒéš†è¿‡æ»¤å™¨ï¼Œä»¥ä¸‹æ‘˜è‡ªç™¾åº¦ç™¾ç§‘ï¼š</p><p>å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥ç”¨äºæ£€ç´¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ã€‚å¦‚æœæƒ³è¦åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯ä¸æ˜¯åœ¨ä¸€ä¸ªé›†åˆé‡Œï¼Œä¸€èˆ¬æƒ³åˆ°çš„æ˜¯å°†æ‰€æœ‰å…ƒç´ ä¿å­˜èµ·æ¥ï¼Œç„¶åé€šè¿‡æ¯”è¾ƒç¡®å®šã€‚<a href="https://baike.baidu.com/item/%E9%93%BE%E8%A1%A8/9794473?fromModule=lemma_inlink" target="_blank" rel="noopener noreferrer">é“¾è¡¨<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œæ ‘ç­‰ç­‰æ•°æ®ç»“æ„éƒ½æ˜¯è¿™ç§æ€è·¯. ä½†æ˜¯éšç€é›†åˆä¸­å…ƒç´ çš„å¢åŠ ï¼Œæˆ‘ä»¬éœ€è¦çš„å­˜å‚¨ç©ºé—´è¶Šæ¥è¶Šå¤§ï¼Œ<a href="https://baike.baidu.com/item/%E6%A3%80%E7%B4%A2%E9%80%9F%E5%BA%A6/20807841?fromModule=lemma_inlink" target="_blank" rel="noopener noreferrer">æ£€ç´¢é€Ÿåº¦<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä¹Ÿè¶Šæ¥è¶Šæ…¢(O(n),O(logn))ã€‚ä¸è¿‡ä¸–ç•Œä¸Šè¿˜æœ‰ä¸€ç§å«ä½œæ•£åˆ—è¡¨ï¼ˆåˆå«<a href="https://baike.baidu.com/item/%E5%93%88%E5%B8%8C%E8%A1%A8/5981869?fromModule=lemma_inlink" target="_blank" rel="noopener noreferrer">å“ˆå¸Œè¡¨<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼ŒHash tableï¼‰çš„æ•°æ®ç»“æ„ã€‚å®ƒå¯ä»¥é€šè¿‡ä¸€ä¸ª Hash å‡½æ•°å°†ä¸€ä¸ªå…ƒç´ æ˜ å°„æˆä¸€ä¸ªä½é˜µåˆ—ï¼ˆBit arrayï¼‰ä¸­çš„ä¸€ä¸ªç‚¹ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬åªè¦çœ‹çœ‹è¿™ä¸ªç‚¹æ˜¯ä¸æ˜¯ 1 å°±å¯ä»¥çŸ¥é“é›†åˆä¸­æœ‰æ²¡æœ‰å®ƒäº†ã€‚è¿™å°±æ˜¯å¸ƒéš†è¿‡æ»¤å™¨çš„åŸºæœ¬æ€æƒ³ã€‚</p><p>å¸ƒéš†è¿‡æ»¤å™¨çš„ç‰¹ç‚¹æ˜¯ï¼Œé«˜æ•ˆåœ°æ’å…¥å’ŒæŸ¥è¯¢ï¼Œå ç”¨ç©ºé—´å°‘ï¼›æŸ¥è¯¢ç»“æœæœ‰ä¸ç¡®å®šæ€§ï¼Œå¦‚æœæŸ¥è¯¢ç»“æœæ˜¯å­˜åœ¨åˆ™å…ƒç´ ä¸ä¸€å®šå­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¸€å®šä¸å­˜åœ¨ï¼›å¦å¤–å®ƒåªèƒ½æ·»åŠ å…ƒç´ ä¸èƒ½åˆ é™¤å…ƒç´ ï¼Œå› ä¸ºåˆ é™¤å…ƒç´ ä¼šå¢åŠ è¯¯åˆ¤ç‡ã€‚</p><blockquote><p>æ¯”å¦‚ï¼šå°†å•†å“ id å†™å…¥å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå¦‚æœåˆ† 3 æ¬¡ hash æ­¤æ—¶åœ¨å¸ƒéš†è¿‡æ»¤å™¨æœ‰ 3 ä¸ªç‚¹ï¼Œå½“ä»å¸ƒéš†è¿‡æ»¤å™¨æŸ¥è¯¢è¯¥å•†å“ idï¼Œé€šè¿‡ hash æ‰¾åˆ°äº†è¯¥å•†å“ id åœ¨è¿‡æ»¤å™¨ä¸­çš„ç‚¹ï¼Œæ­¤æ—¶è¿”å› 1ï¼Œå¦‚æœæ‰¾ä¸åˆ°ä¸€å®šä¼šè¿”å› 0ã€‚</p></blockquote><p>æ‰€ä»¥ï¼Œä¸ºäº†é¿å…ç¼“å­˜ç©¿é€æˆ‘ä»¬éœ€è¦ç¼“å­˜é¢„çƒ­å°†è¦æŸ¥è¯¢çš„è¯¾ç¨‹æˆ–å•†å“ä¿¡æ¯çš„ id æå‰å­˜å…¥å¸ƒéš†è¿‡æ»¤å™¨ï¼Œæ·»åŠ æ•°æ®æ—¶å°†ä¿¡æ¯çš„ id ä¹Ÿå­˜å…¥è¿‡æ»¤å™¨ï¼Œå½“å»æŸ¥è¯¢ä¸€ä¸ªæ•°æ®æ—¶å…ˆåœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­æ‰¾ä¸€ä¸‹å¦‚æœæ²¡æœ‰åˆ°åˆ°å°±è¯´æ˜ä¸å­˜åœ¨ï¼Œæ­¤æ—¶ç›´æ¥è¿”å›ã€‚</p><p>å®ç°æ–¹æ³•æœ‰ï¼š</p><p>Google å·¥å…·åŒ… Guava å®ç°ã€‚</p><p>redisson ã€‚</p><p>2ã€ç¼“å­˜ç©ºå€¼æˆ–ç‰¹æ®Šå€¼</p><p>è¯·æ±‚é€šè¿‡äº†ç¬¬ä¸€æ­¥çš„æ ¡éªŒï¼ŒæŸ¥è¯¢æ•°æ®åº“å¾—åˆ°çš„æ•°æ®ä¸å­˜åœ¨ï¼Œæ­¤æ—¶æˆ‘ä»¬ä»ç„¶å»ç¼“å­˜æ•°æ®ï¼Œç¼“å­˜ä¸€ä¸ªç©ºå€¼æˆ–ä¸€ä¸ªç‰¹æ®Šå€¼çš„æ•°æ®ã€‚</p><p>ä½†æ˜¯è¦æ³¨æ„ï¼šå¦‚æœç¼“å­˜äº†ç©ºå€¼æˆ–ç‰¹æ®Šå€¼è¦è®¾ç½®ä¸€ä¸ªçŸ­æš‚çš„è¿‡æœŸæ—¶é—´ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">CoursePublish</span> <span class="token function">getCoursePublishCache</span><span class="token punctuation">(</span><span class="token class-name">Long</span> courseId<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">//æŸ¥è¯¢ç¼“å­˜</span>
   <span class="token class-name">Object</span>  jsonObj <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;course:&quot;</span> <span class="token operator">+</span> courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>jsonObj<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> jsonString <span class="token operator">=</span> jsonObj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">CoursePublish</span> coursePublish <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">,</span> <span class="token class-name">CoursePublish</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> coursePublish<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//ä»æ•°æ®åº“æŸ¥è¯¢</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CoursePublish</span> coursePublish <span class="token operator">=</span> <span class="token function">getCoursePublish</span><span class="token punctuation">(</span>courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¾ç½®è¿‡æœŸæ—¶é—´300ç§’</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;course:&quot;</span> <span class="token operator">+</span> courseId<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>coursePublish<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> coursePublish<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æµ‹è¯•ï¼Œè™½ç„¶è¿˜å­˜åœ¨ä¸ªåˆ«è¯·æ±‚å»æŸ¥è¯¢æ•°æ®åº“ï¼Œä½†ä¸æ˜¯æ‰€æœ‰è¯·æ±‚éƒ½å»æŸ¥è¯¢æ•°æ®åº“ï¼ŒåŸºæœ¬ä¸Šéƒ½å‘½ä¸­ç¼“å­˜ã€‚</p><h3 id="_3-3-ç¼“å­˜é›ªå´©" tabindex="-1"><a class="header-anchor" href="#_3-3-ç¼“å­˜é›ªå´©" aria-hidden="true">#</a> <strong>3.3 ç¼“å­˜é›ªå´©</strong></h3><h4 id="_3-3-1-ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©" tabindex="-1"><a class="header-anchor" href="#_3-3-1-ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©" aria-hidden="true">#</a> <strong>3.3.1 ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©</strong></h4><p>ç¼“å­˜é›ªå´©æ˜¯ç¼“å­˜ä¸­å¤§é‡ key å¤±æ•ˆåå½“é«˜å¹¶å‘åˆ°æ¥æ—¶å¯¼è‡´å¤§é‡è¯·æ±‚åˆ°æ•°æ®åº“ï¼Œç¬é—´è€—å°½æ•°æ®åº“èµ„æºï¼Œå¯¼è‡´æ•°æ®åº“æ— æ³•ä½¿ç”¨ã€‚</p><p>é€ æˆç¼“å­˜é›ªå´©é—®é¢˜çš„åŸå› æ˜¯æ˜¯å¤§é‡ key æ‹¥æœ‰äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œæ¯”å¦‚å¯¹è¯¾ç¨‹ä¿¡æ¯è®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´ä¸º 10 åˆ†é’Ÿï¼Œåœ¨å¤§é‡è¯·æ±‚åŒæ—¶æŸ¥è¯¢å¤§é‡çš„è¯¾ç¨‹ä¿¡æ¯æ—¶ï¼Œæ­¤æ—¶å°±ä¼šæœ‰å¤§é‡çš„è¯¾ç¨‹å­˜åœ¨ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œä¸€æ—¦å¤±æ•ˆå°†åŒæ—¶å¤±æ•ˆï¼Œé€ æˆé›ªå´©é—®é¢˜ã€‚</p><h4 id="_3-3-2-è§£å†³ç¼“å­˜é›ªå´©" tabindex="-1"><a class="header-anchor" href="#_3-3-2-è§£å†³ç¼“å­˜é›ªå´©" aria-hidden="true">#</a> <strong>3.3.2 è§£å†³ç¼“å­˜é›ªå´©</strong></h4><p>å¦‚ä½•è§£å†³ç¼“å­˜é›ªå´©ï¼Ÿ</p><p>1ã€ä½¿ç”¨åŒæ­¥é”æ§åˆ¶æŸ¥è¯¢æ•°æ®åº“çš„çº¿ç¨‹</p><p>ä½¿ç”¨åŒæ­¥é”æ§åˆ¶æŸ¥è¯¢æ•°æ®åº“çš„çº¿ç¨‹ï¼Œåªå…è®¸æœ‰ä¸€ä¸ªçº¿ç¨‹å»æŸ¥è¯¢æ•°æ®åº“ï¼ŒæŸ¥è¯¢å¾—åˆ°æ•°æ®åå­˜å…¥ç¼“å­˜ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">synchronized</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//æŸ¥è¯¢æ•°æ®åº“</span>
  <span class="token comment">//å­˜å…¥ç¼“å­˜</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ã€å¯¹åŒä¸€ç±»å‹ä¿¡æ¯çš„ key è®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´</p><p>é€šå¸¸å¯¹ä¸€ç±»ä¿¡æ¯çš„ key è®¾ç½®çš„è¿‡æœŸæ—¶é—´æ˜¯ç›¸åŒçš„ï¼Œè¿™é‡Œå¯ä»¥åœ¨åŸæœ‰å›ºå®šæ—¶é—´çš„åŸºç¡€ä¸ŠåŠ ä¸Šä¸€ä¸ªéšæœºæ—¶é—´ä½¿å®ƒä»¬çš„è¿‡æœŸæ—¶é—´éƒ½ä¸ç›¸åŒã€‚</p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>
//è®¾ç½®è¿‡æœŸæ—¶é—´300ç§’
redisTemplate.opsForValue().set(&quot;course:&quot; + courseId, JSON.toJSONString(coursePublish),300+new Random().nextInt(100), TimeUnit.SECONDS);

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ã€ç¼“å­˜é¢„çƒ­</p><p>ä¸ç”¨ç­‰åˆ°è¯·æ±‚åˆ°æ¥å†å»æŸ¥è¯¢æ•°æ®åº“å­˜å…¥ç¼“å­˜ï¼Œå¯ä»¥æå‰å°†æ•°æ®å­˜å…¥ç¼“å­˜ã€‚ä½¿ç”¨ç¼“å­˜é¢„çƒ­æœºåˆ¶é€šå¸¸æœ‰ä¸“é—¨çš„åå°ç¨‹åºå»å°†æ•°æ®åº“çš„æ•°æ®åŒæ­¥åˆ°ç¼“å­˜ã€‚</p><h3 id="_3-4-ç¼“å­˜å‡»ç©¿" tabindex="-1"><a class="header-anchor" href="#_3-4-ç¼“å­˜å‡»ç©¿" aria-hidden="true">#</a> <strong>3.4 ç¼“å­˜å‡»ç©¿</strong></h3><h4 id="_3-4-1-ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿" tabindex="-1"><a class="header-anchor" href="#_3-4-1-ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿" aria-hidden="true">#</a> <strong>3.4.1 ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿</strong></h4><p>ç¼“å­˜å‡»ç©¿æ˜¯æŒ‡å¤§é‡å¹¶å‘è®¿é—®åŒä¸€ä¸ªçƒ­ç‚¹æ•°æ®ï¼Œå½“çƒ­ç‚¹æ•°æ®å¤±æ•ˆååŒæ—¶å»è¯·æ±‚æ•°æ®åº“ï¼Œç¬é—´è€—å°½æ•°æ®åº“èµ„æºï¼Œå¯¼è‡´æ•°æ®åº“æ— æ³•ä½¿ç”¨ã€‚</p><p>æ¯”å¦‚æŸæ‰‹æœºæ–°å“å‘å¸ƒï¼Œå½“ç¼“å­˜å¤±æ•ˆæ—¶æœ‰å¤§é‡å¹¶å‘åˆ°æ¥å¯¼è‡´åŒæ—¶å»è®¿é—®æ•°æ®åº“ã€‚</p><p><img src="/MyBlog/assets/image-20230617145209041-9a983761.png" alt="image-20230617145209041"></p><h4 id="_3-4-2-è§£å†³ç¼“å­˜å‡»ç©¿" tabindex="-1"><a class="header-anchor" href="#_3-4-2-è§£å†³ç¼“å­˜å‡»ç©¿" aria-hidden="true">#</a> <strong>3.4.2 è§£å†³ç¼“å­˜å‡»ç©¿</strong></h4><p>å¦‚ä½•è§£å†³ç¼“å­˜å‡»ç©¿ï¼Ÿ</p><p>1ã€ä½¿ç”¨åŒæ­¥é”æ§åˆ¶æŸ¥è¯¢æ•°æ®åº“çš„çº¿ç¨‹</p><p>ä½¿ç”¨åŒæ­¥é”æ§åˆ¶æŸ¥è¯¢æ•°æ®åº“çš„ä»£ç ï¼Œåªå…è®¸æœ‰ä¸€ä¸ªçº¿ç¨‹å»æŸ¥è¯¢æ•°æ®åº“ï¼ŒæŸ¥è¯¢å¾—åˆ°æ•°æ®åº“å­˜å…¥ç¼“å­˜ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">synchronized</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//æŸ¥è¯¢æ•°æ®åº“</span>
  <span class="token comment">//å­˜å…¥ç¼“å­˜</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ã€çƒ­ç‚¹æ•°æ®ä¸è¿‡æœŸ</p><p>å¯ä»¥ç”±åå°ç¨‹åºæå‰å°†çƒ­ç‚¹æ•°æ®åŠ å…¥ç¼“å­˜ï¼Œç¼“å­˜è¿‡æœŸæ—¶é—´ä¸è¿‡æœŸï¼Œç”±åå°ç¨‹åºåšå¥½ç¼“å­˜åŒæ­¥ã€‚</p><p>ä¸‹è¾¹ä½¿ç”¨ synchronized å¯¹ä»£ç åŠ é”ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span>  <span class="token class-name">CoursePublish</span> <span class="token function">getCoursePublishCache</span><span class="token punctuation">(</span><span class="token class-name">Long</span> courseId<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">synchronized</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// è¿™é‡Œçš„thisæ˜¯å½“å‰å®ä¾‹ é»˜è®¤ä¸ºå•ä¾‹bean</span>
        <span class="token comment">//æŸ¥è¯¢ç¼“å­˜</span>
        <span class="token class-name">String</span> jsonString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;course:&quot;</span> <span class="token operator">+</span> courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token class-name">CoursePublish</span> coursePublish <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">,</span> <span class="token class-name">CoursePublish</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> coursePublish<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=========ä»æ•°æ®åº“æŸ¥è¯¢==========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//ä»æ•°æ®åº“æŸ¥è¯¢</span>
            <span class="token class-name">CoursePublish</span> coursePublish <span class="token operator">=</span> <span class="token function">getCoursePublish</span><span class="token punctuation">(</span>courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token comment">//è®¾ç½®è¿‡æœŸæ—¶é—´300ç§’</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;course:&quot;</span> <span class="token operator">+</span> courseId<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>coursePublish<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> coursePublish<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ï¼Œååé‡æœ‰ 1300 å·¦å³</p><p><img src="/MyBlog/assets/image-20230617145239557-4187c01c.png" alt="image-20230617145239557"></p><p>å¯¹ä¸Šè¾¹çš„ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œå¯¹æŸ¥è¯¢ç¼“å­˜çš„ä»£ç ä¸ç”¨ synchronized åŠ é”æ§åˆ¶ï¼Œåªå¯¹æŸ¥è¯¢æ•°æ®åº“è¿›è¡ŒåŠ é”ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span>  <span class="token class-name">CoursePublish</span> <span class="token function">getCoursePublishCache</span><span class="token punctuation">(</span><span class="token class-name">Long</span> courseId<span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token comment">//æŸ¥è¯¢ç¼“å­˜</span>
         <span class="token class-name">Object</span>  jsonObj <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;course:&quot;</span> <span class="token operator">+</span> courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span>jsonObj<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">String</span> jsonString <span class="token operator">=</span> jsonObj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">CoursePublish</span> coursePublish <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">,</span> <span class="token class-name">CoursePublish</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> coursePublish<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">Object</span>  jsonObj <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;course:&quot;</span> <span class="token operator">+</span> courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>jsonObj<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                   <span class="token class-name">String</span> jsonString <span class="token operator">=</span> jsonObj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">CoursePublish</span> coursePublish <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">,</span> <span class="token class-name">CoursePublish</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> coursePublish<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                 <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=========ä»æ•°æ®åº“æŸ¥è¯¢==========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//ä»æ•°æ®åº“æŸ¥è¯¢</span>
                <span class="token class-name">CoursePublish</span> coursePublish <span class="token operator">=</span> <span class="token function">getCoursePublish</span><span class="token punctuation">(</span>courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token comment">//è®¾ç½®è¿‡æœŸæ—¶é—´300ç§’</span>
                redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;course:&quot;</span> <span class="token operator">+</span> courseId<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>coursePublish<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> coursePublish<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>


<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ï¼ŒæŸ¥è¯¢æ•°æ®åº“åªå‘ç”Ÿä¸€æ¬¡ï¼Œæ•´ä¸ªæµ‹è¯•è¿‡ç¨‹çš„ååé‡åœ¨ 3800 å·¦å³ã€‚</p><p><img src="/MyBlog/assets/image-20230617145253990-161abec6.png" alt="image-20230617145253990"></p><h4 id="_3-4-3-å°ç»“" tabindex="-1"><a class="header-anchor" href="#_3-4-3-å°ç»“" aria-hidden="true">#</a> <strong>3.4.3 å°ç»“</strong></h4><p>1ï¼‰ç¼“å­˜ç©¿é€ï¼š</p><p>å»è®¿é—®ä¸€ä¸ªæ•°æ®åº“ä¸å­˜åœ¨çš„æ•°æ®æ— æ³•å°†æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œå¯¼è‡´æŸ¥è¯¢æ•°æ®åº“ï¼Œå½“å¹¶å‘è¾ƒå¤§å°±ä¼šå¯¹æ•°æ®åº“é€ æˆå‹åŠ›ã€‚ç¼“å­˜ç©¿é€å¯ä»¥é€ æˆæ•°æ®åº“ç¬é—´å‹åŠ›è¿‡å¤§ï¼Œè¿æ¥æ•°ç­‰èµ„æºç”¨å®Œï¼Œæœ€ç»ˆæ•°æ®åº“æ‹’ç»è¿æ¥ä¸å¯ç”¨ã€‚</p><p>è§£å†³çš„æ–¹æ³•ï¼š</p><p>ç¼“å­˜ä¸€ä¸ª null å€¼ã€‚</p><p>ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ã€‚</p><p>2ï¼‰ç¼“å­˜é›ªå´©ï¼š</p><p>ç¼“å­˜ä¸­å¤§é‡ key å¤±æ•ˆåå½“é«˜å¹¶å‘åˆ°æ¥æ—¶å¯¼è‡´å¤§é‡è¯·æ±‚åˆ°æ•°æ®åº“ï¼Œç¬é—´è€—å°½æ•°æ®åº“èµ„æºï¼Œå¯¼è‡´æ•°æ®åº“æ— æ³•ä½¿ç”¨ã€‚</p><p>é€ æˆç¼“å­˜é›ªå´©é—®é¢˜çš„åŸå› æ˜¯æ˜¯å¤§é‡ key æ‹¥æœ‰äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ã€‚</p><p>è§£å†³åŠæ³•ï¼š</p><p>ä½¿ç”¨åŒæ­¥é”æ§åˆ¶</p><p>å¯¹åŒä¸€ç±»å‹ä¿¡æ¯çš„ key è®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œæ¯”å¦‚ï¼šä½¿ç”¨å›ºå®šæ•°+éšæœºæ•°ä½œä¸ºè¿‡æœŸæ—¶é—´ã€‚</p><p>3ï¼‰ç¼“å­˜å‡»ç©¿</p><p>å¤§é‡å¹¶å‘è®¿é—®åŒä¸€ä¸ªçƒ­ç‚¹æ•°æ®ï¼Œå½“çƒ­ç‚¹æ•°æ®å¤±æ•ˆååŒæ—¶å»è¯·æ±‚æ•°æ®åº“ï¼Œç¬é—´è€—å°½æ•°æ®åº“èµ„æºï¼Œå¯¼è‡´æ•°æ®åº“æ— æ³•ä½¿ç”¨ã€‚</p><p>è§£å†³åŠæ³•ï¼š</p><p>ä½¿ç”¨åŒæ­¥é”æ§åˆ¶</p><p>è®¾ç½® key æ°¸ä¸è¿‡æœŸ</p><p>æ— ä¸­ç”Ÿæœ‰æ˜¯ç©¿é€ï¼Œå¸ƒéš†è¿‡æ»¤ null éš”ç¦»ã€‚<br> ç¼“å­˜å‡»ç©¿ key è¿‡æœŸï¼Œ é”ä¸éæœŸè§£éš¾é¢˜ã€‚<br> å¤§é‡è¿‡æœŸæˆé›ªå´©ï¼Œè¿‡æœŸæ—¶é—´è¦éšæœºã€‚<br> é¢è¯•å¿…è€ƒä¸‰å…„å¼Ÿï¼Œå¯ç”¨é™æµæ¥ä¿åº•ã€‚</p><p>é™æµæŠ€æœ¯æ–¹æ¡ˆï¼š</p><p>alibaba/Sentinel</p><p>nginx+Lua</p><h3 id="_3-5-åˆ†å¸ƒå¼é”" tabindex="-1"><a class="header-anchor" href="#_3-5-åˆ†å¸ƒå¼é”" aria-hidden="true">#</a> <strong>3.5 åˆ†å¸ƒå¼é”</strong></h3><h4 id="_3-5-1-æœ¬åœ°é”çš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_3-5-1-æœ¬åœ°é”çš„é—®é¢˜" aria-hidden="true">#</a> <strong>3.5.1 æœ¬åœ°é”çš„é—®é¢˜</strong></h4><p>ä¸Šè¾¹çš„ç¨‹åºä½¿ç”¨äº†åŒæ­¥é”è§£å†³äº†ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©çš„é—®é¢˜ï¼Œä¿è¯åŒä¸€ä¸ª key è¿‡æœŸååªä¼šæŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“ã€‚</p><p>å¦‚æœå°†åŒæ­¥é”çš„ç¨‹åºåˆ†å¸ƒå¼éƒ¨ç½²åœ¨å¤šä¸ªè™šæ‹Ÿæœºä¸Šåˆ™æ— æ³•ä¿è¯åŒä¸€ä¸ª key åªä¼šæŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="/MyBlog/assets/image-20230617145310286-c4ed12f0.png" alt="image-20230617145310286"></p><p>ä¸€ä¸ªåŒæ­¥é”ç¨‹åºåªèƒ½ä¿è¯åŒä¸€ä¸ªè™šæ‹Ÿæœºä¸­å¤šä¸ªçº¿ç¨‹åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ•°æ®åº“ï¼Œå¦‚æœé«˜å¹¶å‘é€šè¿‡ç½‘å…³è´Ÿè½½å‡è¡¡è½¬å‘ç»™å„ä¸ªè™šæ‹Ÿæœºï¼Œæ­¤æ—¶å°±ä¼šå­˜åœ¨å¤šä¸ªçº¿ç¨‹å»æŸ¥è¯¢æ•°æ®åº“æƒ…å†µï¼Œå› ä¸ºè™šæ‹Ÿæœºä¸­çš„é”åªèƒ½ä¿è¯è¯¥è™šæ‹Ÿæœºè‡ªå·±çš„çº¿ç¨‹å»åŒæ­¥æ‰§è¡Œï¼Œæ— æ³•è·¨è™šæ‹Ÿæœºä¿è¯åŒæ­¥æ‰§è¡Œã€‚</p><p>æˆ‘ä»¬å°†è™šæ‹Ÿæœºå†…éƒ¨çš„é”å«æœ¬åœ°é”ï¼Œæœ¬åœ°é”åªèƒ½ä¿è¯æ‰€åœ¨è™šæ‹Ÿæœºçš„çº¿ç¨‹åŒæ­¥æ‰§è¡Œã€‚</p><p>ä¸‹è¾¹è¿›è¡Œæµ‹è¯•ï¼š</p><p>å¯åŠ¨ä¸‰ä¸ªå†…å®¹ç®¡ç†æœåŠ¡ï¼š</p><p><img src="/MyBlog/assets/image-20230617145321574-f8b53c8a.png" alt="image-20230617145321574"></p><p>é€šè¿‡ç½‘å…³è®¿é—®è¯¾ç¨‹æŸ¥è¯¢ï¼Œç½‘å…³é€šè¿‡è´Ÿè½½å‡è¡¡å°†è¯·æ±‚è½¬å‘ç»™ä¸‰ä¸ªæœåŠ¡ã€‚</p><p>é€šè¿‡æµ‹è¯•å‘ç°ï¼Œæœ‰ä¸¤ä¸ªæœåŠ¡å„æœ‰ä¸€æ¬¡æ•°æ®åº“æŸ¥è¯¢ï¼Œè¿™è¯´æ˜æœ¬åœ°é”æ— æ³•è·¨è™šæ‹Ÿæœºä¿è¯åŒæ­¥æ‰§è¡Œã€‚</p><h4 id="_3-5-2-ä»€ä¹ˆæ˜¯åˆ†å¸ƒé”" tabindex="-1"><a class="header-anchor" href="#_3-5-2-ä»€ä¹ˆæ˜¯åˆ†å¸ƒé”" aria-hidden="true">#</a> <strong>3.5.2 ä»€ä¹ˆæ˜¯åˆ†å¸ƒé”</strong></h4><p>æœ¬åœ°é”åªèƒ½æ§åˆ¶æ‰€åœ¨è™šæ‹Ÿæœºä¸­çš„çº¿ç¨‹åŒæ­¥æ‰§è¡Œï¼Œç°åœ¨è¦å®ç°åˆ†å¸ƒå¼ç¯å¢ƒä¸‹æ‰€æœ‰è™šæ‹Ÿæœºä¸­çš„çº¿ç¨‹å»åŒæ­¥æ‰§è¡Œå°±éœ€è¦è®©å¤šä¸ªè™šæ‹Ÿæœºå»å…±ç”¨ä¸€ä¸ªé”ï¼Œè™šæ‹Ÿæœºå¯ä»¥åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œé”ä¹Ÿå¯ä»¥åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="/MyBlog/assets/image-20230617145326516-05d0a428.png" alt="image-20230617145326516"></p><p>è™šæ‹Ÿæœºéƒ½å»æŠ¢å åŒä¸€ä¸ªé”ï¼Œé”æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç¨‹åºæä¾›åŠ é”ã€è§£é”æœåŠ¡ï¼Œè°æŠ¢åˆ°é”è°å»æŸ¥è¯¢æ•°æ®åº“ã€‚</p><p>è¯¥é”å·²ä¸å±äºæŸä¸ªè™šæ‹Ÿæœºï¼Œè€Œæ˜¯åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œç”±å¤šä¸ªè™šæ‹Ÿæœºæ‰€å…±äº«ï¼Œè¿™ç§é”å«åˆ†å¸ƒå¼é”ã€‚</p><h4 id="_3-5-3-åˆ†å¸ƒå¼é”çš„å®ç°æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_3-5-3-åˆ†å¸ƒå¼é”çš„å®ç°æ–¹æ¡ˆ" aria-hidden="true">#</a> <strong>3.5.3 åˆ†å¸ƒå¼é”çš„å®ç°æ–¹æ¡ˆ</strong></h4><p>å®ç°åˆ†å¸ƒå¼é”çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œå¸¸ç”¨çš„å¦‚ä¸‹ï¼š</p><p>1ã€åŸºäºæ•°æ®åº“å®ç°åˆ†å¸ƒé”</p><p>åˆ©ç”¨æ•°æ®åº“ä¸»é”®å”¯ä¸€æ€§çš„ç‰¹ç‚¹ï¼Œæˆ–åˆ©ç”¨æ•°æ®åº“å”¯ä¸€ç´¢å¼•çš„ç‰¹ç‚¹ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶å»æ’å…¥ç›¸åŒçš„è®°å½•ï¼Œè°æ’å…¥æˆåŠŸè°å°±æŠ¢åˆ°é”ã€‚</p><p>2ã€åŸºäº redis å®ç°é”</p><p>redis æä¾›äº†åˆ†å¸ƒå¼é”çš„å®ç°æ–¹æ¡ˆï¼Œæ¯”å¦‚ï¼šSETNXã€set nxã€redisson ç­‰ã€‚</p><p>æ‹¿ SETNX ä¸¾ä¾‹è¯´æ˜ï¼ŒSETNX å‘½ä»¤çš„å·¥ä½œè¿‡ç¨‹æ˜¯å» set ä¸€ä¸ªä¸å­˜åœ¨çš„ keyï¼Œå¤šä¸ªçº¿ç¨‹å»è®¾ç½®åŒä¸€ä¸ª key åªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹è®¾ç½®æˆåŠŸï¼Œè®¾ç½®æˆåŠŸçš„çš„çº¿ç¨‹æ‹¿åˆ°é”ã€‚</p><p>3ã€ä½¿ç”¨ zookeeper å®ç°</p><p>zookeeper æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œä¸»è¦è§£å†³åˆ†å¸ƒå¼ç¨‹åºä¹‹é—´çš„åŒæ­¥çš„é—®é¢˜ã€‚zookeeper çš„ç»“æ„ç±»ä¼¼çš„æ–‡ä»¶ç›®å½•ï¼Œå¤šçº¿ç¨‹å‘ zookeeper åˆ›å»ºä¸€ä¸ªå­ç›®å½•(èŠ‚ç‚¹)åªä¼šæœ‰ä¸€ä¸ªåˆ›å»ºæˆåŠŸï¼Œåˆ©ç”¨æ­¤ç‰¹ç‚¹å¯ä»¥å®ç°åˆ†å¸ƒå¼é”ï¼Œè°åˆ›å»ºè¯¥ç»“ç‚¹æˆåŠŸè°å°±è·å¾—é”ã€‚</p><h4 id="_3-5-4-redis-nx-å®ç°åˆ†å¸ƒå¼é”" tabindex="-1"><a class="header-anchor" href="#_3-5-4-redis-nx-å®ç°åˆ†å¸ƒå¼é”" aria-hidden="true">#</a> <strong>3.5.4 Redis NX å®ç°åˆ†å¸ƒå¼é”</strong></h4><p>redis å®ç°åˆ†å¸ƒå¼é”çš„æ–¹æ¡ˆå¯ä»¥åœ¨ redis.cn ç½‘ç«™æŸ¥é˜…ï¼Œåœ°å€http://www.redis.cn/commands/set.html</p><p>ä½¿ç”¨å‘½ä»¤ï¼š SET resource-name anystring NX EX max-lock-time å³å¯å®ç°ã€‚</p><p>NXï¼šè¡¨ç¤º key ä¸å­˜åœ¨æ‰è®¾ç½®æˆåŠŸã€‚</p><p>EXï¼šè®¾ç½®è¿‡æœŸæ—¶é—´</p><p>è¿™é‡Œå¯åŠ¨ä¸‰ä¸ª ssh å®¢æˆ·ç«¯ï¼Œè¿æ¥ redis: docker exec -it redis redis-cli</p><p>å…ˆè®¤è¯: auth redis</p><p>åŒæ—¶å‘ä¸‰ä¸ªå®¢æˆ·ç«¯å‘é€æµ‹è¯•å‘½ä»¤å¦‚ä¸‹ï¼š</p><p>è¡¨ç¤ºè®¾ç½® lock001 é”ï¼Œvalue ä¸º 001ï¼Œè¿‡æœŸæ—¶é—´ä¸º 30 ç§’</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token constant">SET</span> lock001 <span class="token number">001</span> <span class="token constant">NX</span> <span class="token constant">EX</span> <span class="token number">30</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘½ä»¤å‘é€æˆåŠŸï¼Œè§‚å¯Ÿä¸‰ä¸ª ssh å®¢æˆ·ç«¯å‘ç°åªæœ‰ä¸€ä¸ªè®¾ç½®æˆåŠŸï¼Œå…¶å®ƒä¸¤ä¸ªè®¾ç½®å¤±è´¥ï¼Œè®¾ç½®æˆåŠŸçš„è¯·æ±‚è¡¨ç¤ºæŠ¢åˆ°äº† lock001 é”ã€‚</p><p>å¦‚ä½•åœ¨ä»£ç ä¸­ä½¿ç”¨ Set nx å»å®ç°åˆ†å¸ƒé”å‘¢ï¼Ÿ</p><p>ä½¿ç”¨ spring-boot-starter-data-redis æä¾›çš„ api å³å¯å®ç° set nxã€‚</p><p>æ·»åŠ ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-pool2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ·»åŠ ä¾èµ–åï¼Œåœ¨ bean ä¸­æ³¨å…¥ restTemplateã€‚</p><p>æˆ‘ä»¬å…ˆåˆ†æä¸€æ®µä¼ªä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">if</span><span class="token punctuation">(</span>ç¼“å­˜ä¸­æœ‰<span class="token punctuation">)</span><span class="token punctuation">{</span>

  è¿”å›ç¼“å­˜ä¸­çš„æ•°æ®
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>

  è·å–åˆ†å¸ƒå¼é”
  <span class="token keyword">if</span><span class="token punctuation">(</span>è·å–é”æˆåŠŸï¼‰<span class="token punctuation">{</span>
       <span class="token keyword">try</span><span class="token punctuation">{</span>
         æŸ¥è¯¢æ•°æ®åº“
      <span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>
         é‡Šæ”¾é”
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1ã€è·å–åˆ†å¸ƒå¼é”</p><p>ä½¿ç”¨ redisTemplate.opsForValue().setIfAbsent(key,vaue)è·å–é”</p><p>è¿™é‡Œè€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œå½“ set nx ä¸€ä¸ª key/value æˆåŠŸ 1 åï¼Œè¿™ä¸ª key(å°±æ˜¯é”)éœ€è¦è®¾ç½®è¿‡æœŸæ—¶é—´å—ï¼Ÿ</p><p>å¦‚æœä¸è®¾ç½®è¿‡æœŸæ—¶é—´å½“è·å–åˆ°äº†é”å´æ²¡æœ‰æ‰§è¡Œ finally è¿™ä¸ªé”å°†ä¼šä¸€ç›´å­˜åœ¨ï¼Œå…¶å®ƒçº¿ç¨‹æ— æ³•è·å–è¿™ä¸ªé”ã€‚</p><p>æ‰€ä»¥æ‰§è¡Œ set nx æ—¶è¦æŒ‡å®šè¿‡æœŸæ—¶é—´ï¼Œå³ä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤</p><p>SET resource-name anystring NX EX max-lock-time</p><blockquote><p>å…·ä½“è°ƒç”¨çš„æ–¹æ³•æ˜¯ï¼šredisTemplate.opsForValue().setIfAbsent(K var1, V var2, long var3, TimeUnit var5)</p></blockquote><p>2ã€å¦‚ä½•é‡Šæ”¾é”</p><p>é‡Šæ”¾é”åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼škey åˆ°æœŸè‡ªåŠ¨é‡Šæ”¾ï¼Œæ‰‹åŠ¨åˆ é™¤ã€‚</p><p>1ï¼‰key åˆ°æœŸè‡ªåŠ¨é‡Šæ”¾çš„æ–¹æ³•</p><p>å› ä¸ºé”è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œkey åˆ°æœŸä¼šè‡ªåŠ¨é‡Šæ”¾ï¼Œä½†æ˜¯ä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜å°±æ˜¯ æŸ¥è¯¢æ•°æ®åº“ç­‰æ“ä½œè¿˜æ²¡æœ‰æ‰§è¡Œå®Œæ—¶ key åˆ°æœŸäº†ï¼Œæ­¤æ—¶å…¶å®ƒçº¿ç¨‹å°±æŠ¢åˆ°é”äº†ï¼Œæœ€ç»ˆé‡å¤æŸ¥è¯¢æ•°æ®åº“æ‰§è¡Œäº†é‡å¤çš„ä¸šåŠ¡æ“ä½œã€‚</p><p>æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</p><p>å¯ä»¥å°† key çš„åˆ°æœŸæ—¶é—´è®¾ç½®çš„é•¿ä¸€äº›ï¼Œè¶³ä»¥æ‰§è¡Œå®ŒæˆæŸ¥è¯¢æ•°æ®åº“å¹¶è®¾ç½®ç¼“å­˜ç­‰ç›¸å…³æ“ä½œã€‚</p><p>å¦‚æœè¿™æ ·æ•ˆç‡ä¼šä½ä¸€äº›ï¼Œå¦å¤–è¿™ä¸ªæ—¶é—´å€¼ä¹Ÿä¸å¥½æŠŠæ§ã€‚</p><p>2ï¼‰æ‰‹åŠ¨åˆ é™¤é”</p><p>å¦‚æœæ˜¯é‡‡ç”¨æ‰‹åŠ¨åˆ é™¤é”å¯èƒ½å’Œ key åˆ°æœŸè‡ªåŠ¨åˆ é™¤æœ‰æ‰€å†²çªï¼Œé€ æˆåˆ é™¤äº†åˆ«äººçš„é”ã€‚</p><p>æ¯”å¦‚ï¼šå½“æŸ¥è¯¢æ•°æ®åº“ç­‰ä¸šåŠ¡è¿˜æ²¡æœ‰æ‰§è¡Œå®Œæ—¶ key è¿‡æœŸäº†ï¼Œæ­¤æ—¶å…¶å®ƒçº¿ç¨‹å ç”¨äº†é”ï¼Œå½“ä¸Šä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒæŸ¥è¯¢æ•°æ®åº“ç­‰ä¸šåŠ¡æ“ä½œå®Œæˆåæ‰‹åŠ¨åˆ é™¤é”å°±æŠŠå…¶å®ƒçº¿ç¨‹çš„é”ç»™åˆ é™¤äº†ã€‚</p><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜å¯ä»¥é‡‡ç”¨åˆ é™¤é”ä¹‹å‰åˆ¤æ–­æ˜¯ä¸æ˜¯è‡ªå·±è®¾ç½®çš„é”ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">if</span><span class="token punctuation">(</span>ç¼“å­˜ä¸­æœ‰<span class="token punctuation">)</span><span class="token punctuation">{</span>

  è¿”å›ç¼“å­˜ä¸­çš„æ•°æ®
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>

  è·å–åˆ†å¸ƒå¼é”<span class="token operator">:</span> set lock <span class="token number">01</span> <span class="token class-name">NX</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>è·å–é”æˆåŠŸï¼‰<span class="token punctuation">{</span>
       <span class="token keyword">try</span><span class="token punctuation">{</span>
         æŸ¥è¯¢æ•°æ®åº“
      <span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span>redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;lock&quot;</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">&quot;01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            é‡Šæ”¾é”<span class="token operator">:</span> redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;del&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;lock&quot;</span><span class="token punctuation">)</span>
         <span class="token punctuation">}</span>

      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šä»£ç ç¬¬ 11 è¡Œåˆ° 13 è¡ŒéåŸå­æ€§ï¼Œä¹Ÿä¼šå¯¼è‡´åˆ é™¤å…¶å®ƒçº¿ç¨‹çš„é”ã€‚</p><p>æŸ¥çœ‹æ–‡æ¡£ä¸Šçš„è¯´æ˜ï¼šhttp://www.redis.cn/commands/set.html</p><p><img src="/MyBlog/assets/image-20230617145442056-23b58e2a.png" alt="image-20230617145442056"></p><p>åœ¨è°ƒç”¨ setnx å‘½ä»¤è®¾ç½® key/value æ—¶ï¼Œæ¯ä¸ªçº¿ç¨‹è®¾ç½®ä¸ä¸€æ ·çš„ value å€¼ï¼Œè¿™æ ·å½“çº¿ç¨‹å»åˆ é™¤é”æ—¶å¯ä»¥å…ˆæ ¹æ® key æŸ¥è¯¢å‡ºæ¥åˆ¤æ–­æ˜¯ä¸æ˜¯è‡ªå·±å½“æ—¶è®¾ç½®çš„ vlaueï¼Œå¦‚æœæ˜¯åˆ™åˆ é™¤ã€‚</p><p>è¿™æ•´ä¸ªæ“ä½œæ˜¯åŸå­çš„ï¼Œå®ç°æ–¹æ³•å°±æ˜¯å»æ‰§è¡Œä¸Šè¾¹çš„ lua è„šæœ¬ã€‚</p><p><em>Lua</em> æ˜¯ä¸€ä¸ªå°å·§çš„è„šæœ¬è¯­è¨€ï¼Œredis åœ¨ 2.6 ç‰ˆæœ¬å°±æ”¯æŒé€šè¿‡æ‰§è¡Œ Lua è„šæœ¬ä¿è¯å¤šä¸ªå‘½ä»¤çš„åŸå­æ€§ã€‚</p><p>ä»€ä¹ˆæ˜¯åŸå­æ€§ï¼Ÿ</p><p>è¿™äº›æŒ‡ä»¤è¦ä¹ˆå…¨æˆåŠŸè¦ä¹ˆå…¨å¤±è´¥ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨ Redis Nx æ–¹å¼å®ç°åˆ†å¸ƒå¼é”ï¼Œä¸ºäº†é¿å…åˆ é™¤åˆ«çš„çº¿ç¨‹è®¾ç½®çš„é”éœ€è¦ä½¿ç”¨ redis å»æ‰§è¡Œ Lua è„šæœ¬çš„æ–¹å¼å»å®ç°ï¼Œè¿™æ ·å°±å…·æœ‰åŸå­æ€§ï¼Œä½†æ˜¯è¿‡æœŸæ—¶é—´çš„å€¼è®¾ç½®ä¸å­˜åœ¨ä¸ç²¾ç¡®çš„é—®é¢˜ã€‚</p><h4 id="_3-5-5-redisson-å®ç°åˆ†å¸ƒå¼é”" tabindex="-1"><a class="header-anchor" href="#_3-5-5-redisson-å®ç°åˆ†å¸ƒå¼é”" aria-hidden="true">#</a> <strong>3.5.5 Redisson å®ç°åˆ†å¸ƒå¼é”</strong></h4><h5 id="_3-5-5-1-ä»€ä¹ˆæ˜¯-redisson" tabindex="-1"><a class="header-anchor" href="#_3-5-5-1-ä»€ä¹ˆæ˜¯-redisson" aria-hidden="true">#</a> <strong>3.5.5.1 ä»€ä¹ˆæ˜¯ Redisson</strong></h5><p>å†æŸ¥é˜… æ–‡æ¡£http://www.redis.cn/commands/set.html</p><p><img src="/MyBlog/assets/image-20230617145452903-dbc114f0.png" alt="image-20230617145452903"></p><p>ç‚¹å‡»é“¾æ¥æŸ¥çœ‹</p><p><img src="/MyBlog/assets/image-20230617145457664-ec130adb.png" alt="image-20230617145457664"></p><p>æˆ‘ä»¬é€‰ç”¨ Java çš„å®ç°æ–¹æ¡ˆ https://github.com/redisson/redisson</p><p>Redisson çš„æ–‡æ¡£åœ°å€ï¼šhttps://github.com/redisson/redisson/wiki/Table-of-Content</p><p>Redisson åº•å±‚é‡‡ç”¨çš„æ˜¯<a href="http://netty.io/" target="_blank" rel="noopener noreferrer">Netty<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ¡†æ¶ã€‚æ”¯æŒ<a href="http://redis.cn/" target="_blank" rel="noopener noreferrer">Redis<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 2.8 ä»¥ä¸Šç‰ˆæœ¬ï¼Œæ”¯æŒ Java1.6+ä»¥ä¸Šç‰ˆæœ¬ã€‚Redisson æ˜¯ä¸€ä¸ªåœ¨ Redis çš„åŸºç¡€ä¸Šå®ç°çš„ Java é©»å†…å­˜æ•°æ®ç½‘æ ¼ï¼ˆIn-Memory Data Gridï¼‰ã€‚å®ƒä¸ä»…æä¾›äº†ä¸€ç³»åˆ—çš„åˆ†å¸ƒå¼çš„ Java å¸¸ç”¨å¯¹è±¡ï¼Œè¿˜æä¾›äº†è®¸å¤šåˆ†å¸ƒå¼æœåŠ¡ã€‚å…¶ä¸­åŒ…æ‹¬(BitSet, Set, Multimap, SortedSet, Map, List, Queue, BlockingQueue, Deque, BlockingDeque, Semaphore, Lock, AtomicLong, CountDownLatch, Publish / Subscribe, Bloom filter, Remote service, Spring cache, Executor service, Live Object service, Scheduler service) ã€‚</p><p><img src="/MyBlog/assets/image-20230617145503410-d673d7d0.png" alt="image-20230617145503410"></p><p>ä½¿ç”¨ Redisson å¯ä»¥éå¸¸æ–¹ä¾¿å°† Java æœ¬åœ°å†…å­˜ä¸­çš„å¸¸ç”¨æ•°æ®ç»“æ„çš„å¯¹è±¡æ¬åˆ°åˆ†å¸ƒå¼ç¼“å­˜ redis ä¸­ã€‚</p><p>ä¹Ÿå¯ä»¥å°†å¸¸ç”¨çš„å¹¶å‘ç¼–ç¨‹å·¥å…·å¦‚ï¼šAtomicLongã€CountDownLatchã€Semaphore ç­‰æ”¯æŒåˆ†å¸ƒå¼ã€‚</p><p>ä½¿ç”¨ RScheduledExecutorService å®ç°åˆ†å¸ƒå¼è°ƒåº¦æœåŠ¡ã€‚</p><p>æ”¯æŒæ•°æ®åˆ†ç‰‡ï¼Œå°†æ•°æ®åˆ†ç‰‡å­˜å‚¨åˆ°ä¸åŒçš„ redis å®ä¾‹ä¸­ã€‚</p><p>æ”¯æŒåˆ†å¸ƒå¼é”ï¼ŒåŸºäº Java çš„ Lock æ¥å£å®ç°åˆ†å¸ƒå¼é”ï¼Œæ–¹ä¾¿å¼€å‘ã€‚</p><p>ä¸‹è¾¹ä½¿ç”¨ Redisson å°† Queue é˜Ÿåˆ—çš„æ•°æ®å­˜å…¥ Redisï¼Œå®ç°ä¸€ä¸ªæ’é˜ŸåŠå‡ºé˜Ÿçš„æ¥å£ã€‚</p><p><img src="/MyBlog/assets/image-20230617145509114-6e89793f.png" alt="image-20230617145509114"></p><p>æ·»åŠ  redisson çš„ä¾èµ–</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.redisson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>redisson-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.11.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»è¯¾ç¨‹èµ„æ–™ç›®å½•æ‹·è´ singleServerConfig.yaml åˆ° config å·¥ç¨‹ä¸‹</p><p>åœ¨ redis é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">redisson</span><span class="token punctuation">:</span>
      <span class="token comment">#é…ç½®æ–‡ä»¶ç›®å½•</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>singleServerConfig.yaml
      <span class="token comment">#config: classpath:clusterServersConfig.yaml</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>redis é›†ç¾¤é…ç½® clusterServersConfig.yaml.</p><p>Redisson ç›¸æ¯” set nx å®ç°åˆ†å¸ƒå¼é”è¦ç®€å•çš„å¤šï¼Œå·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p><p><img src="/MyBlog/assets/image-20230617145538711-0f34005d.png" alt="image-20230617145538711"></p><p><strong>åŠ é”æœºåˆ¶</strong></p><p>çº¿ç¨‹å»è·å–é”ï¼Œè·å–æˆåŠŸ: æ‰§è¡Œ lua è„šæœ¬ï¼Œä¿å­˜æ•°æ®åˆ° redis æ•°æ®åº“ã€‚</p><p>çº¿ç¨‹å»è·å–é”ï¼Œè·å–å¤±è´¥: ä¸€ç›´é€šè¿‡ while å¾ªç¯å°è¯•è·å–é”ï¼Œè·å–æˆåŠŸåï¼Œæ‰§è¡Œ lua è„šæœ¬ï¼Œä¿å­˜æ•°æ®åˆ° redis</p><p><strong>WatchDog è‡ªåŠ¨å»¶æœŸçœ‹é—¨ç‹—æœºåˆ¶</strong></p><p>ç¬¬ä¸€ç§æƒ…å†µï¼šåœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œå‡å¦‚ä¸€ä¸ªçº¿ç¨‹è·å¾—é”åï¼Œçªç„¶æœåŠ¡å™¨å®•æœºäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™åœ¨ä¸€å®šæ—¶é—´åè¿™ä¸ªé”ä¼šè‡ªåŠ¨é‡Šæ”¾ï¼Œä½ ä¹Ÿå¯ä»¥è®¾ç½®é”çš„æœ‰æ•ˆæ—¶é—´(å½“ä¸è®¾ç½®é»˜è®¤ 30 ç§’æ—¶ï¼‰ï¼Œè¿™æ ·çš„ç›®çš„ä¸»è¦æ˜¯é˜²æ­¢æ­»é”çš„å‘ç”Ÿ</p><blockquote><p>ç¬¬äºŒç§æƒ…å†µï¼šçº¿ç¨‹ A ä¸šåŠ¡è¿˜æ²¡æœ‰æ‰§è¡Œå®Œï¼Œæ—¶é—´å°±è¿‡äº†ï¼Œçº¿ç¨‹ A è¿˜æƒ³æŒæœ‰é”çš„è¯ï¼Œå°±ä¼šå¯åŠ¨ä¸€ä¸ª watch dog åå°çº¿ç¨‹ï¼Œä¸æ–­çš„å»¶é•¿é” key çš„ç”Ÿå­˜æ—¶é—´ã€‚</p></blockquote><p><strong>lua è„šæœ¬-ä¿è¯åŸå­æ€§æ“ä½œ</strong></p><p>ä¸»è¦æ˜¯å¦‚æœä½ çš„ä¸šåŠ¡é€»è¾‘å¤æ‚çš„è¯ï¼Œé€šè¿‡å°è£…åœ¨ lua è„šæœ¬ä¸­å‘é€ç»™ redisï¼Œè€Œä¸” redis æ˜¯å•çº¿ç¨‹çš„ï¼Œè¿™æ ·å°±ä¿è¯è¿™æ®µå¤æ‚ä¸šåŠ¡é€»è¾‘æ‰§è¡Œçš„åŸå­æ€§</p><p>å…·ä½“ä½¿ç”¨ RLock æ“ä½œåˆ†å¸ƒé”ï¼ŒRLock ç»§æ‰¿ JDK çš„ Lock æ¥å£ï¼Œæ‰€ä»¥ä»–æœ‰ Lock æ¥å£çš„æ‰€æœ‰ç‰¹æ€§ï¼Œæ¯”å¦‚ lockã€unlockã€trylock ç­‰ç‰¹æ€§,åŒæ—¶å®ƒè¿˜æœ‰å¾ˆå¤šæ–°ç‰¹æ€§ï¼šå¼ºåˆ¶é”é‡Šæ”¾ï¼Œå¸¦æœ‰æ•ˆæœŸçš„é”,ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">RRLock</span> <span class="token punctuation">{</span>

   <span class="token comment">//----------------------Lockæ¥å£æ–¹æ³•-----------------------</span>
    <span class="token doc-comment comment">/**
     * åŠ é” é”çš„æœ‰æ•ˆæœŸé»˜è®¤30ç§’
     */</span>
    <span class="token keyword">void</span> <span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token doc-comment comment">/**
     * åŠ é” å¯ä»¥æ‰‹åŠ¨è®¾ç½®é”çš„æœ‰æ•ˆæ—¶é—´
     *
     * <span class="token keyword">@param</span> <span class="token parameter">leaseTime</span> é”æœ‰æ•ˆæ—¶é—´
     * <span class="token keyword">@param</span> <span class="token parameter">unit</span>      æ—¶é—´å•ä½ å°æ—¶ã€åˆ†ã€ç§’ã€æ¯«ç§’ç­‰
     */</span>
    <span class="token keyword">void</span> <span class="token function">lock</span><span class="token punctuation">(</span><span class="token keyword">long</span> leaseTime<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * tryLock()æ–¹æ³•æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œç”¨æ¥å°è¯•è·å–é”ï¼Œ
     * å¦‚æœè·å–æˆåŠŸï¼Œåˆ™è¿”å›trueï¼Œå¦‚æœè·å–å¤±è´¥ï¼ˆå³é”å·²è¢«å…¶ä»–çº¿ç¨‹è·å–ï¼‰ï¼Œåˆ™è¿”å›false .
     */</span>
    <span class="token keyword">boolean</span> <span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * tryLock(long time, TimeUnit unit)æ–¹æ³•å’ŒtryLock()æ–¹æ³•æ˜¯ç±»ä¼¼çš„ï¼Œ
     * åªä¸è¿‡åŒºåˆ«åœ¨äºè¿™ä¸ªæ–¹æ³•åœ¨æ‹¿ä¸åˆ°é”æ—¶ä¼šç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼Œ
     * åœ¨æ—¶é—´æœŸé™ä¹‹å†…å¦‚æœè¿˜æ‹¿ä¸åˆ°é”ï¼Œå°±è¿”å›falseã€‚å¦‚æœå¦‚æœä¸€å¼€å§‹æ‹¿åˆ°é”æˆ–è€…åœ¨ç­‰å¾…æœŸé—´å†…æ‹¿åˆ°äº†é”ï¼Œåˆ™è¿”å›trueã€‚
     *
     * <span class="token keyword">@param</span> <span class="token parameter">time</span> ç­‰å¾…æ—¶é—´
     * <span class="token keyword">@param</span> <span class="token parameter">unit</span> æ—¶é—´å•ä½ å°æ—¶ã€åˆ†ã€ç§’ã€æ¯«ç§’ç­‰
     */</span>
    <span class="token keyword">boolean</span> <span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token keyword">long</span> time<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * æ¯”ä¸Šé¢å¤šä¸€ä¸ªå‚æ•°ï¼Œå¤šæ·»åŠ ä¸€ä¸ªé”çš„æœ‰æ•ˆæ—¶é—´
     *
     * <span class="token keyword">@param</span> <span class="token parameter">waitTime</span>  ç­‰å¾…æ—¶é—´
     * <span class="token keyword">@param</span> <span class="token parameter">leaseTime</span> é”æœ‰æ•ˆæ—¶é—´
     * <span class="token keyword">@param</span> <span class="token parameter">unit</span>      æ—¶é—´å•ä½ å°æ—¶ã€åˆ†ã€ç§’ã€æ¯«ç§’ç­‰
     * waitTime å¤§äº leaseTime
     */</span>
    <span class="token keyword">boolean</span> <span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token keyword">long</span> waitTime<span class="token punctuation">,</span> <span class="token keyword">long</span> leaseTime<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * è§£é”
     */</span>
    <span class="token keyword">void</span> <span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>lock()</strong>ï¼š</p><p>æ­¤æ–¹æ³•ä¸ºåŠ é”ï¼Œä½†æ˜¯é”çš„æœ‰æ•ˆæœŸé‡‡ç”¨<strong>é»˜è®¤ 30 ç§’</strong></p><p>å¦‚æœä¸»çº¿ç¨‹æœªé‡Šæ”¾ï¼Œä¸”å½“å‰é”æœªè°ƒç”¨ unlock æ–¹æ³•ï¼Œåˆ™è¿›å…¥åˆ°<strong>watchDog æœºåˆ¶</strong></p><p>å¦‚æœä¸»çº¿ç¨‹æœªé‡Šæ”¾ï¼Œä¸”å½“å‰é”è°ƒç”¨ unlock æ–¹æ³•ï¼Œåˆ™ç›´æ¥é‡Šæ”¾é”</p><h5 id="_3-5-5-3-åˆ†å¸ƒå¼é”é¿å…ç¼“å­˜å‡»ç©¿" tabindex="-1"><a class="header-anchor" href="#_3-5-5-3-åˆ†å¸ƒå¼é”é¿å…ç¼“å­˜å‡»ç©¿" aria-hidden="true">#</a> <strong>3.5.5.3 åˆ†å¸ƒå¼é”é¿å…ç¼“å­˜å‡»ç©¿</strong></h5><p>ä¸‹è¾¹ä½¿ç”¨åˆ†å¸ƒå¼é”ä¿®æ”¹æŸ¥è¯¢è¯¾ç¨‹ä¿¡æ¯çš„æ¥å£ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//Redissonåˆ†å¸ƒå¼é”</span>
<span class="token keyword">public</span>  <span class="token class-name">CoursePublish</span> <span class="token function">getCoursePublishCache</span><span class="token punctuation">(</span><span class="token class-name">Long</span> courseId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//æŸ¥è¯¢ç¼“å­˜</span>
        <span class="token class-name">String</span> jsonString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;course:&quot;</span> <span class="token operator">+</span> courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">CoursePublish</span> coursePublish <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">,</span> <span class="token class-name">CoursePublish</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> coursePublish<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token comment">//æ¯é—¨è¯¾ç¨‹è®¾ç½®ä¸€ä¸ªé”</span>
            <span class="token class-name">RLock</span> lock <span class="token operator">=</span> redissonClient<span class="token punctuation">.</span><span class="token function">getLock</span><span class="token punctuation">(</span><span class="token string">&quot;coursequerylock:&quot;</span><span class="token operator">+</span>courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//è·å–é”</span>
            lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                jsonString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;course:&quot;</span> <span class="token operator">+</span> courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token class-name">CoursePublish</span> coursePublish <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">,</span> <span class="token class-name">CoursePublish</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> coursePublish<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=========ä»æ•°æ®åº“æŸ¥è¯¢==========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//ä»æ•°æ®åº“æŸ¥è¯¢</span>
                <span class="token class-name">CoursePublish</span> coursePublish <span class="token operator">=</span> <span class="token function">getCoursePublish</span><span class="token punctuation">(</span>courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;course:&quot;</span> <span class="token operator">+</span> courseId<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>coursePublish<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">DAYS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> coursePublish<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token comment">//é‡Šæ”¾é”</span>
                lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>


<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨å¤šä¸ªå†…å®¹ç®¡ç†æœåŠ¡å®ä¾‹ï¼Œä½¿ç”¨ JMeter å‹åŠ›æµ‹è¯•ï¼Œåªæœ‰ä¸€ä¸ªå®ä¾‹æŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“ã€‚</p><p>æµ‹è¯• Redisson è‡ªåŠ¨ç»­æœŸåŠŸèƒ½ã€‚</p><p>åœ¨æŸ¥è¯¢æ•°æ®åº“å¤„æ·»åŠ ä¼‘çœ ï¼Œè§‚å¯Ÿé”æ˜¯å¦ä¼šè‡ªåŠ¨ç»­æœŸã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">60000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/ZyKunn/edit/main/notes/project/02/ç¬¬8ç« -é¡¹ç›®ä¼˜åŒ–3.1/README.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">ä¸Šæ¬¡æ›´æ–°: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">è´¡çŒ®è€…: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 814342838@qq.com">ZyKun</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/MyBlog/notes/project/02/%E7%AC%AC7%E7%AB%A0-%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2v3.1/" class="" aria-label="ç¬¬ 7 ç«  é¡¹ç›®éƒ¨ç½² v3.1"><!--[--><!--]--> ç¬¬ 7 ç«  é¡¹ç›®éƒ¨ç½² v3.1 <!--[--><!--]--></a></span><span class="next"><a href="/MyBlog/notes/project/02/%E8%AF%BE%E7%A8%8B%E5%8F%91%E5%B8%83-%E9%83%A8%E7%BD%B2%E9%97%A8%E6%88%B7%E6%96%87%E6%A1%A3/" class="" aria-label="è¯¾ç¨‹å‘å¸ƒ-éƒ¨ç½²é—¨æˆ·æ–‡æ¡£ v3.1"><!--[--><!--]--> è¯¾ç¨‹å‘å¸ƒ-éƒ¨ç½²é—¨æˆ·æ–‡æ¡£ v3.1 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/MyBlog/assets/app-a153c100.js" defer></script>
  </body>
</html>
