import{_ as e,r as o,o as c,c as l,a as n,e as t,w as p,b as s,d as u}from"./app-a153c100.js";const i={},k=n("h1",{id:"_04-servlet-ä¸‰",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_04-servlet-ä¸‰","aria-hidden":"true"},"#"),s(" 04 - Servletï¼ˆä¸‰ï¼‰ ğŸ›«")],-1),r={class:"table-of-contents"},d=u(`<h2 id="è¡¨å•æäº¤è¡¥å……" tabindex="-1"><a class="header-anchor" href="#è¡¨å•æäº¤è¡¥å……" aria-hidden="true">#</a> è¡¨å•æäº¤è¡¥å……</h2><h3 id="æ—¥æœŸç±»å‹æ•°æ®å¤„ç†" tabindex="-1"><a class="header-anchor" href="#æ—¥æœŸç±»å‹æ•°æ®å¤„ç†" aria-hidden="true">#</a> æ—¥æœŸç±»å‹æ•°æ®å¤„ç†</h3><p>é¡µé¢ç«¯:</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>op<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birth<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å‡ºç”Ÿå¹´æœˆ:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>date<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birth<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birth<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æäº¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>servletï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">reg</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//è·å–å‰ç«¯æ•°æ®åªèƒ½æ˜¯å­—ç¬¦ä¸²</span>
    <span class="token class-name">String</span> birth <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;birth&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Date</span> birthday <span class="token operator">=</span> <span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token function">getDateInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>birth<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç”Ÿæ—¥---&gt;&quot;</span><span class="token operator">+</span>birthday<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–‡ä»¶ä¸Šä¼ " tabindex="-1"><a class="header-anchor" href="#æ–‡ä»¶ä¸Šä¼ " aria-hidden="true">#</a> æ–‡ä»¶ä¸Šä¼ </h3><p>ä¹‹å‰è¡¨å•æäº¤åˆ°åå°çš„æ•°æ®éƒ½æ˜¯æ™®é€šçš„æ–‡æœ¬ä¿¡æ¯ï¼Œå³ä¾¿æ˜¯æ•°å€¼æˆ–è€…æ—¥æœŸï¼Œåœ¨åç«¯éƒ½å¯ä»¥é€šè¿‡ java ç›¸å…³ API è¿›è¡Œè½¬æ¢ï¼Œä½†æ˜¯å¦‚æœè¡¨å•æäº¤åˆ°åå°æ•°æ®ä¸æ˜¯ä¸€ä¸ªæ–‡æœ¬è€Œæ˜¯æ–‡ä»¶ï¼ˆå›¾ç‰‡ï¼Œè§†é¢‘ï¼ŒéŸ³é¢‘ç­‰é™„ä»¶ï¼‰ï¼ŒServlet åˆè¯¥å¦‚ä½•å¤„ç†ï¼š</p><p>åœ¨ Servlet æ”¯æŒæ–‡ä»¶ä¸Šä¼ çš„æŠ€æœ¯ï¼Œè§£å†³æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œåªéœ€è¦å°†å‰ç«¯æäº¤çš„æ•°æ®ä»¥æµå½¢å¼è¯»å–å³å¯ï¼Œåç«¯æœ‰ä»¥ä¸‹è§£å†³æ–¹æ³•ï¼š</p><ul><li>jspSmartupload æŠ€æœ¯(æ—©æœŸæ’ä»¶) <ul><li>ä¼˜ç‚¹ï¼šç®€å•ï¼Œä¾¿æ·ï¼Œå¿«é€Ÿ</li><li>ç¼ºç‚¹ï¼šç›´æ¥é€šè¿‡å†…å­˜ç¼“å­˜ï¼Œä¸é€‚åˆä¸Šä¼ å¤§æ–‡ä»¶</li></ul></li><li>commons-fileUploadï¼ˆapache å¼€æºç»„ç»‡çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼‰ <ul><li>ä¼˜ç‚¹ï¼šæ”¯æŒç£ç›˜ç¼“å­˜ï¼Œé€‚åˆä¸Šä¼ å¤§æ–‡ä»¶</li><li>ç¼ºç‚¹ï¼šAPI ç›¸å¯¹å¤æ‚</li></ul></li><li>Servlet3.0 ä¹‹åè‡ªå¸¦æ–‡ä»¶ä¸Šä¼ è§£å†³æ–¹æ¡ˆï¼ˆè¦æ±‚ tomcat å¿…é¡»æ˜¯ 7.0+ï¼‰</li></ul><h4 id="ä½¿ç”¨æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ–¹å¼" aria-hidden="true">#</a> ä½¿ç”¨æ–¹å¼</h4><ol><li>è¡¨å•æäº¤æ–¹å¼å¿…é¡»è®¾ç½®ä¸º<code>method=&quot;post&quot;</code></li><li>è¡¨å•çš„ enctype å¿…é¡»è®¾ç½®ä¸º<code>multipart/form-data</code></li><li>è¡¨å•ä¸­æ–‡ä»¶æ§ä»¶å¿…é¡»æŒ‡å®š name å±æ€§ï¼ˆå¯¹äºå•æ–‡ä»¶ï¼‰</li><li>Servlet ç±»ä¸­éœ€è¦æ·»åŠ <code>@MultipartConfig</code></li></ol><h4 id="å•æ–‡ä»¶ä¸Šä¼ " tabindex="-1"><a class="header-anchor" href="#å•æ–‡ä»¶ä¸Šä¼ " aria-hidden="true">#</a> å•æ–‡ä»¶ä¸Šä¼ </h4><p>é¡µé¢ç«¯:</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>å•æ–‡ä»¶ä¸Šä¼ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>upload01<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipart/form-data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myfile<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>ä¸Šä¼ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœåŠ¡ç«¯:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@MultipartConfig</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/upload01&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadServlet01</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> baseDir <span class="token operator">=</span> <span class="token string">&quot;d:/javaweb04&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è·å–ä¸Šä¼ æ•°æ®çš„æ–‡ä»¶éƒ¨åˆ†ï¼ˆå•æ–‡ä»¶ï¼‰</span>
        <span class="token class-name">Part</span> part <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getPart</span><span class="token punctuation">(</span><span class="token string">&quot;myfile&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–æ–‡ä»¶å¤§å°</span>
        <span class="token keyword">long</span> size <span class="token operator">=</span> part<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–æäº¤çš„æ–‡ä»¶åç§°(tomcat8.0+)</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> part<span class="token punctuation">.</span><span class="token function">getSubmittedFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–æäº¤çš„æ–‡ä»¶mimeType</span>
        <span class="token class-name">String</span> contentType <span class="token operator">=</span> part<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å¤§å°ï¼š&quot;</span> <span class="token operator">+</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ–‡ä»¶åï¼š&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;contentTypeï¼š&quot;</span> <span class="token operator">+</span> contentType<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyyMMdd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>baseDir<span class="token punctuation">,</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            file<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//å¦‚æœæ–‡ä»¶é‡åï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨uuidéšæœºä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºæ–‡ä»¶åå‰ç¼€(é€‚ç”¨äºä¸åŒå†…å®¹çš„åŒåæ–‡ä»¶)</span>
        <span class="token class-name">String</span> uuid <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//å¦‚æœæ˜¯ä¸¤ä¸ªå†…å®¹ä¹Ÿä¸€æ ·çš„æ–‡ä»¶ï¼ˆä¸è®ºæ˜¯å¦é‡åï¼‰ï¼Œè®¤ä¸ºæ˜¯é‡å¤æ–‡ä»¶ï¼Œæ­¤å¤„å¯ä»¥å°†æ–‡ä»¶çš„æµè½¬æ¢ä¸ºmd5å€¼</span>
        <span class="token comment">//è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœä¸¤ä¸ªæ–‡ä»¶md5ä¸€è‡´ï¼Œåˆ™è¯´æ˜æ˜¯å†…å®¹é‡å¤çš„æ–‡ä»¶</span>

        <span class="token comment">//å°†æ–‡ä»¶å†™å…¥ç›®æ ‡ä½ç½®</span>
        part<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">File</span><span class="token punctuation">.</span>separator <span class="token operator">+</span> uuid <span class="token operator">+</span> <span class="token string">&quot;_&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¤šæ–‡ä»¶ä¸Šä¼ " tabindex="-1"><a class="header-anchor" href="#å¤šæ–‡ä»¶ä¸Šä¼ " aria-hidden="true">#</a> å¤šæ–‡ä»¶ä¸Šä¼ </h4><p>é¡µé¢ç«¯ï¼š</p><p>åªéœ€è¦åœ¨ file æ§ä»¶ä¸­è®¾ç½®<code>multiple</code>å±æ€§</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>å¤šæ–‡ä»¶ä¸Šä¼ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>upload02<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipart/form-data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myfile<span class="token punctuation">&quot;</span></span> <span class="token attr-name">multiple</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>ä¸Šä¼ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœåŠ¡ç«¯:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@MultipartConfig</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/upload02&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadServlet02</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> baseDir <span class="token operator">=</span> <span class="token string">&quot;d:/javaweb04&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Part</span><span class="token punctuation">&gt;</span></span> parts <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Part</span> part <span class="token operator">:</span> parts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>part<span class="token punctuation">.</span><span class="token function">getSubmittedFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                part<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>baseDir <span class="token operator">+</span> <span class="token class-name">File</span><span class="token punctuation">.</span>separator <span class="token operator">+</span> part<span class="token punctuation">.</span><span class="token function">getSubmittedFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è¯·æ±‚è·³è½¬" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚è·³è½¬" aria-hidden="true">#</a> è¯·æ±‚è·³è½¬</h2><h3 id="è¯·æ±‚è½¬å‘ä¸é‡å®šå‘" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚è½¬å‘ä¸é‡å®šå‘" aria-hidden="true">#</a> è¯·æ±‚è½¬å‘ä¸é‡å®šå‘</h3><h3 id="url-pattern" tabindex="-1"><a class="header-anchor" href="#url-pattern" aria-hidden="true">#</a> url-pattern</h3><h2 id="ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ä¹‹-session-ä¸-cookie" tabindex="-1"><a class="header-anchor" href="#ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ä¹‹-session-ä¸-cookie" aria-hidden="true">#</a> ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ä¹‹ Session ä¸ Cookie</h2><h3 id="httpsession" tabindex="-1"><a class="header-anchor" href="#httpsession" aria-hidden="true">#</a> HttpSession</h3><h3 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie" aria-hidden="true">#</a> Cookie</h3>`,29);function v(m,b){const a=o("router-link");return c(),l("div",null,[k,n("nav",r,[n("ul",null,[n("li",null,[t(a,{to:"#è¡¨å•æäº¤è¡¥å……"},{default:p(()=>[s("è¡¨å•æäº¤è¡¥å……")]),_:1}),n("ul",null,[n("li",null,[t(a,{to:"#æ—¥æœŸç±»å‹æ•°æ®å¤„ç†"},{default:p(()=>[s("æ—¥æœŸç±»å‹æ•°æ®å¤„ç†")]),_:1})]),n("li",null,[t(a,{to:"#æ–‡ä»¶ä¸Šä¼ "},{default:p(()=>[s("æ–‡ä»¶ä¸Šä¼ ")]),_:1})])])]),n("li",null,[t(a,{to:"#è¯·æ±‚è·³è½¬"},{default:p(()=>[s("è¯·æ±‚è·³è½¬")]),_:1}),n("ul",null,[n("li",null,[t(a,{to:"#è¯·æ±‚è½¬å‘ä¸é‡å®šå‘"},{default:p(()=>[s("è¯·æ±‚è½¬å‘ä¸é‡å®šå‘")]),_:1})]),n("li",null,[t(a,{to:"#url-pattern"},{default:p(()=>[s("url-pattern")]),_:1})])])]),n("li",null,[t(a,{to:"#ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ä¹‹-session-ä¸-cookie"},{default:p(()=>[s("ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ä¹‹ Session ä¸ Cookie")]),_:1}),n("ul",null,[n("li",null,[t(a,{to:"#httpsession"},{default:p(()=>[s("HttpSession")]),_:1})]),n("li",null,[t(a,{to:"#cookie"},{default:p(()=>[s("Cookie")]),_:1})])])])])]),d])}const h=e(i,[["render",v],["__file","index.html.vue"]]);export{h as default};
