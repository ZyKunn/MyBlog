import{_ as e,r as o,o as c,c as l,a as n,e as t,w as p,b as s,d as i}from"./app-a153c100.js";const u="/MyBlog/assets/1607477170410-627e31c7.png",r="/MyBlog/assets/1607485243871-1e039661.png",k="/MyBlog/assets/1652535020110-20a9416d.png",d={},m=n("h1",{id:"_01-jdbc-å…¥é—¨",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_01-jdbc-å…¥é—¨","aria-hidden":"true"},"#"),s(" 01 - JDBC å…¥é—¨ ğŸ›«")],-1),v={class:"table-of-contents"},b=i('<h2 id="jdbc-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#jdbc-æ¦‚è¿°" aria-hidden="true">#</a> JDBC æ¦‚è¿°</h2><p>JDBC å…¨ç§°:Java DataBase Connectivity;æ˜¯ç”± SUN å…¬å¸æä¾›çš„ä¸€å¥—é€šç”¨çš„ Java è¿æ¥æ•°æ®çš„æ ‡å‡†ï¼ˆæ¥å£ï¼‰ï¼Œè¿™å¥—æ¥å£ç”¨äºå±è”½æ•°æ®åº“ä¹‹é—´çš„å·®å¼‚ï¼ˆæ–¹è¨€ï¼‰ï¼Œä½¿å¾— Java ç¨‹åºå‘˜å¯ä»¥ä¸“æ³¨äºå¤„ç†æ•°æ®è€Œä¸éœ€è¦è€ƒè™‘æ•°æ®åº“ä¹‹é—´çš„å·®å¼‚ï¼›</p><p><img src="'+u+`" alt="1607477170410"></p><p>JDBC è¿™å¥—æ ‡å‡†æ‰€æœ‰çš„ç±»å’Œæ¥å£éƒ½ä½äº<code>java.sql</code>åŒ…ä¸­ã€‚</p><h2 id="å…¥é—¨æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#å…¥é—¨æ¡ˆä¾‹" aria-hidden="true">#</a> å…¥é—¨æ¡ˆä¾‹</h2><p>ç¬¬ä¸€ä¸ª JDBC ç¨‹åº:</p><p><strong>å®ç°æ·»åŠ ä¸€æ¡å›ºå®šçš„æ•°æ®åˆ°è¡¨æ ¼ä¸­</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 1.åŠ è½½æ•°æ®åº“é©±åŠ¨</span>
<span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2.è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡</span>
<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 3.è·å–å¤„ç†sqlè¯­å¥çš„å¯¹è±¡</span>
<span class="token class-name">Statement</span> stat <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4.æ‰§è¡Œsql(å½“æ‰§è¡Œç»“æœä¸ºresultsetï¼ˆæ‰§è¡Œselectæ“ä½œæ—¶ï¼‰æ—¶è¿”å›å€¼ä¸ºtrueï¼Œå…¶ä»–ä»»ä½•æ—¶å€™éƒ½æ˜¯false)</span>
<span class="token keyword">boolean</span> f <span class="token operator">=</span> stat<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">&quot;insert into user(username,password,nickname) values(&#39;softeem&#39;,&#39;soft123&#39;,&#39;è½¯å¸&#39;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 5.å¤„ç†ç»“æœ</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œç»“æœï¼š&quot;</span><span class="token operator">+</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 6.å…³é—­èµ„æº</span>
stat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="jdbc-å¸¸è§ç±»ä¸æ¥å£" tabindex="-1"><a class="header-anchor" href="#jdbc-å¸¸è§ç±»ä¸æ¥å£" aria-hidden="true">#</a> JDBC å¸¸è§ç±»ä¸æ¥å£</h2><h3 id="drivermanager" tabindex="-1"><a class="header-anchor" href="#drivermanager" aria-hidden="true">#</a> DriverManager</h3><p>DriverManager æ˜¯ java.sql åŒ…ä¸­æä¾›çš„ä¸€ä¸ªç”¨äºè¿›è¡Œæ•°æ®åº“é©±åŠ¨ç®¡ç†çš„å·¥å…·ç±»ï¼Œå¯¹äºé©±åŠ¨çš„æ³¨å†Œï¼Œä»¥åŠè¿æ¥çš„è·å–éƒ½å¯ä»¥é€šè¿‡ DriverManager æ¥å®Œæˆï¼Œå¦å¤–ä» jdbc4 å¼€å§‹ï¼Œä¸å†éœ€è¦æ˜¾ç¤ºçš„ä½¿ç”¨<code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;)</code>åŠ è½½é©±åŠ¨ï¼›å› ä¸º DriverManager ä¼šè‡ªåŠ¨å¯»æ‰¾é©±åŠ¨åŒ…é‡Œé¢çš„ä»¥ä¸‹æ–‡ä»¶:</p><p><img src="`+r+`" alt="1607485243871"></p><p>DriverManager æä¾›çš„å¸¸è§æ–¹æ³•ï¼š</p><ul><li><p><strong>getConnection(String url,String user,String password)</strong></p></li><li><p>getConnection(String url)</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/test?user=root&amp;password=123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>getConnection(String url,Properties prop)</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Properties</span> info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
info<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
info<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/test&quot;</span><span class="token punctuation">,</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="connection" tabindex="-1"><a class="header-anchor" href="#connection" aria-hidden="true">#</a> Connection</h3><p>Connection æ˜¯ JDBC ä¸­çš„æ ¸å¿ƒæ¥å£ä½äº<code>java.sql</code>åŒ…ï¼Œç”¨äºå®ç°åº”ç”¨ç¨‹åºå’Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰è¿›è¡Œé€šä¿¡ä¸€ä¸ªé€šé“ï¼Œé€šè¿‡è¯¥æ¥å£å¯ä»¥å‘æ•°æ®åº“å‘é€å¯ä»¥æ‰§è¡Œ sql è„šæœ¬ï¼Œä»¥åŠå°†æ‰§è¡Œä¹‹åçš„ç»“æœè¿”å›åˆ°ç¨‹åºä¸­ã€‚connection å³æ•°æ®åº“ä¸åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸€ä¸ªä¼šè¯(session)</p><p>å¸¸ç”¨æ–¹æ³•ï¼š</p><ul><li>createStatement() :è·å–ä¸€ä¸ªç”¨äºæ‰§è¡Œ sql è¯­å¥çš„æ‰§è¡Œå¯¹è±¡ï¼Œä¸»è¦ç”¨äºæ‰§è¡Œé™æ€çš„ sqlï¼ˆå­˜åœ¨ SQL æ³¨å…¥é£é™©ï¼‰</li><li>prepareStatement(String sql) :è·å–ä¸€ä¸ªé¢„å¤„ç† sql è¯­å¥çš„æ‰§è¡Œå¯¹è±¡ï¼Œé¢„å…ˆå¯¹ sql è¯­å¥ç¼–è¯‘ï¼Œä¸€èˆ¬ç”¨äºæ‰§è¡ŒåŠ¨æ€ sqlï¼ˆè§£å†³ SQL æ³¨å…¥é£é™©ï¼‰</li><li>prepareCall(String sql)ï¼šè·å–ä¸€ä¸ªç”¨äºé¢„å¤„ç† sql å­˜å‚¨è¿‡ç¨‹çš„æ‰§è¡Œå¯¹è±¡ï¼Œä¸»è¦ç”¨äºæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ï¼ˆprocedureï¼‰</li><li>setAutoCommit(boolean b)ï¼šè®¾ç½®äº‹ç‰©æ˜¯å¦è‡ªåŠ¨æäº¤</li><li>commit()ï¼šæäº¤äº‹åŠ¡</li><li>rollback()ï¼šäº‹ç‰©å›æ»š</li><li>getMetaData(): è·å–æ•°æ®åº“çš„å…ƒæ•°æ®å¯¹è±¡ï¼ˆDatabaseMetaDataï¼‰ï¼ŒåŒ…å«äº†æ•°æ®åº“çš„è¯¦ç»†ä¿¡æ¯</li></ul><h3 id="statement-ä¸-preparedstatement" tabindex="-1"><a class="header-anchor" href="#statement-ä¸-preparedstatement" aria-hidden="true">#</a> Statement ä¸ PreparedStatement</h3><h4 id="statement" tabindex="-1"><a class="header-anchor" href="#statement" aria-hidden="true">#</a> Statement</h4><p>Statement æ˜¯æ¥è‡ª<code>java.sql</code>åŒ…ä¸­ç”¨äºæ‰§è¡Œ sql è¯­å¥çš„å¤„ç†æ¥å£å¯¹è±¡ï¼Œè¯¥æ¥å£å£°æ˜äº†ä¸€äº›ç”¨äºæ‰§è¡Œ sql è¯­å¥çš„ç›¸å…³æ–¹æ³•ï¼Œå¸¸è§å¦‚ä¸‹ï¼š</p><ul><li>execute(String sql)ï¼šç”¨äºæ‰§è¡Œä»»ä½•çš„ sql è¯­å¥</li><li>executeQuery(String sql)ï¼šä¸»è¦ç”¨äºæ‰§è¡Œ sql æŸ¥è¯¢(Select)æ“ä½œ</li><li>executeUpdate(String sql)ï¼šä¸»è¦ç”¨äºæ‰§è¡Œ sql æ›´æ–°(insert,update,delete)æ“ä½œä»¥åŠ DDL æ“ä½œ</li><li>addBatch(String sql)ï¼šç”¨äºå°† sql è¯­å¥æ·»åŠ åˆ°å½“å‰ Statement å¯¹è±¡çš„å‘½ä»¤åˆ—è¡¨ä¸­ç”¨äºæ‰¹é‡æ‰§è¡Œ sql</li><li>executeBatch()ï¼šç”¨äºå°†ä¸€æ‰¹ï¼ˆå¤šæ¡ sqlï¼‰sql å‘½ä»¤åŒæ—¶æ‰§è¡Œ</li><li>getResultSet()ï¼šè·å–æ‰§è¡Œå½“å‰ SQL è¯­å¥ä¹‹åçš„ç»“æœé›†å¯¹è±¡ï¼ˆResultSetï¼‰</li><li>getGeneratedKeys()ï¼šè·å–è‡ªåŠ¨ç”Ÿæˆçš„é”®æ‰€åœ¨ç»“æœé›†</li></ul><p>å…·ä½“ä½¿ç”¨å¦‚ä¸‹:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> pwd<span class="token punctuation">,</span> <span class="token class-name">String</span> nickname<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token comment">//å‡†å¤‡sqlè¯­å¥</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into user(username,password,nickname) values(&#39;&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;&#39;,&#39;&quot;</span> <span class="token operator">+</span> pwd <span class="token operator">+</span> <span class="token string">&quot;&#39;,&#39;&quot;</span> <span class="token operator">+</span> nickname <span class="token operator">+</span> <span class="token string">&quot;&#39;)&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 1.åŠ è½½é©±åŠ¨</span>
    <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2.è·å–è¿æ¥</span>
    <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://127.0.0.1:3306/test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3.è·å–å¤„ç†sqlè¯­å¥çš„æ‰§è¡Œå¯¹è±¡</span>
    <span class="token class-name">Statement</span> stat <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 4.æ‰§è¡Œsqlè¯­å¥</span>
    <span class="token keyword">boolean</span> b <span class="token operator">=</span> stat<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 5.å¤„ç†ç»“æœ</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ˜¯å¦æœ‰ResultSetï¼š&quot;</span> <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 6.å…³é—­èµ„æº</span>
    stat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>å¯¹ä»¥ä¸Šç¨‹åºåœ¨ main æ–¹æ³•ä¸­æ‰§è¡Œ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&quot;rose&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;rose123&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;è‚‰ä¸&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>é€šè¿‡å¯¹ä»¥ä¸Šä»£ç çš„è§‚å¯Ÿå‘ç°ï¼Œå¦‚æœéœ€è¦å®ç°åŠ¨æ€çš„æ•°æ®æ“ä½œï¼Œåˆ™éœ€è¦å¯¹ sql è¯­å¥è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä½¿å¾— sql è¯­å¥ç¼–å†™èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œå¹¶ä¸”ä½¿ç”¨è¿‡ç¨‹ä¸­å­˜åœ¨ SQL æ³¨å…¥çš„é£é™©ï¼š</p><h4 id="sql-æ³¨å…¥" tabindex="-1"><a class="header-anchor" href="#sql-æ³¨å…¥" aria-hidden="true">#</a> SQL æ³¨å…¥</h4><p>è§‚å¯Ÿä»¥ä¸‹ä»£ç </p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from user where username=&#39;&quot;</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">&quot;&#39; and password=&#39;&quot;</span> <span class="token operator">+</span> password <span class="token operator">+</span> <span class="token string">&quot;&#39;&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">Statement</span> stat <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://127.0.0.1:3306/test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stat <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ‰§è¡ŒæŸ¥è¯¢è·å–ç»“æœé›†</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> stat<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ¤æ–­ç»“æœé›†ä¸­æ˜¯å¦å­˜åœ¨å¯ç”¨ç»“æœè¡Œ</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‹¥è°ƒç”¨è¯¥æ–¹æ³•æ—¶æŒ‰å¦‚ä¸‹æ ¼å¼æä¾›æ–¹æ³•å‚æ•°å€¼ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//select * from user where username=&#39;asdfasdf&#39; and password=&#39;&#39; or &#39;1&#39;=&#39;1&#39;</span>
<span class="token keyword">boolean</span> b <span class="token operator">=</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token string">&quot;asdfasdf&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#39; or &#39;1&#39;=&#39;1 &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b <span class="token operator">?</span> <span class="token string">&quot;ç™»å½•æˆåŠŸ&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ç™»å½•å¤±è´¥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ†æå¾—çŸ¥ï¼Œæ— è®ºè´¦å·å¦‚ä½•æä¾›ï¼Œå­éœ€è¦å¯†ç æŒ‰ç…§ç¬¬äºŒä¸ªå‚æ•°çš„å†™æ³•ï¼Œå³å¯ç»•è¿‡ç™»å½•è¿‡ç¨‹ç›´æ¥è¾“å‡ºå¦‚ä¸‹ç»“æœ:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ç™»å½•æˆåŠŸ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å› ä¸ºä½¿ç”¨ Statement ä¸ä»…ä¼šå­˜åœ¨å­—ç¬¦ä¸²æ‹¼æ¥çš„å¤æ‚é—®é¢˜ï¼Œè¿˜ä¼šå¯¼è‡´ SQL æ³¨å…¥çš„é£é™©ï¼›å› æ­¤ JDBC ä¸­é’ˆå¯¹è¯¥é—®é¢˜ä» Statement æ¥å£è¿˜æ‰©å±•äº†ä¸€ä¸ªå­æ¥å£<code>java.sql.PraparedStatement</code>ç”¨äºè§£å†³ä»¥ä¸Šé—®é¢˜:</p><h4 id="preparedstatement" tabindex="-1"><a class="header-anchor" href="#preparedstatement" aria-hidden="true">#</a> PreparedStatement</h4><p>PreparedStatement æ˜¯ä» Statement æ¥å£ç»§æ‰¿è€Œæ¥ï¼Œä½¿ç”¨è¯¥æ¥å£å¯ä»¥æœ‰æ•ˆçš„é¿å… sql æ³¨å…¥ä»¥åŠå­—ç¬¦ä¸²æ‹¼æ¥çš„é—®é¢˜:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCDemo3</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token comment">//ä»£ç ç§»åŠ¨ alt+shift+up/down</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from user where username=? and password=?&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">//JDK1.7æ–°å¢</span>
        <span class="token keyword">try</span><span class="token punctuation">(</span>
            <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://127.0.0.1:3306/test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//è·å–é¢„ç¼–è¯‘sqlçš„å¯¹è±¡ï¼ˆå·²ç»å®Œæˆçš„sqlè¯­å¥çš„é¢„ç¼–è¯‘ï¼‰</span>
            <span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//é¢„å¤„ç†(å‘sqlè¯­å¥æŒ‡å®šä½ç½®çš„å ä½ç¬¦å¡«å……å®é™…å€¼)</span>
            ps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
            ps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æ‰§è¡Œ</span>
            rs <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>
            rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">boolean</span> b <span class="token operator">=</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b <span class="token operator">?</span> <span class="token string">&quot;ç™»å½•æˆåŠŸ&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ç™»å½•å¤±è´¥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="resultset" tabindex="-1"><a class="header-anchor" href="#resultset" aria-hidden="true">#</a> ResultSet</h3><p>ç»“æœé›†å¯¹è±¡ï¼Œç”¨äºè¡¨ç¤ºå¯¹äºæŸ¥è¯¢è¯­å¥æ‰§è¡Œä¹‹åçš„ç»“æœï¼Œå†…éƒ¨çš„æ•°æ®å¯èƒ½æ˜¯ä¸€æ¡ä¹Ÿå¯ä»¥æ˜¯å¤šæ¡</p><p>ResultSet å¸¸è§æ–¹æ³•ï¼š</p><ul><li>boolean next() ï¼š åˆ¤æ–­æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªç»“æœè¡Œ</li><li>getXXX(int index)ï¼šæ ¹æ®åˆ—ç´¢å¼•è·å–åˆ—å€¼</li><li>getXXX(String columnLabel)ï¼šæ ¹æ®åˆ—æ ‡ç­¾ï¼ˆé»˜è®¤åˆ—åï¼‰è·å–å€¼</li><li>ResultSetMetaData getMetaData()ï¼šè¿”å›ç»“æœé›†çš„å…ƒæ•°æ®</li></ul><p><img src="`+k+`" alt="1652535020110"></p><p>ResultSet çš„åŸºæœ¬ä½¿ç”¨ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from user&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//è·å–è¿æ¥</span>
<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://127.0.0.1:3306/test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//è·å–æ‰§è¡Œsqlè¯­å¥çš„å¯¹è±¡</span>
<span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//æ‰§è¡ŒæŸ¥è¯¢</span>
<span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//æ ¹æ®åˆ—ç´¢å¼•è·å–å½“å‰åˆ—å€¼				 // æ ¹æ®åˆ—æ ‡ç­¾è·å–æŒ‡å®šåˆ—å€¼</span>
    <span class="token keyword">int</span> uid <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// rs.getInt(&quot;id&quot;)</span>
    <span class="token class-name">String</span> username <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// rs.getString(&quot;username&quot;)</span>
    <span class="token class-name">String</span> password <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// rs.getString(&quot;password&quot;)</span>
    <span class="token keyword">int</span> status <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// rs.getInt(&quot;status&quot;)</span>
    <span class="token class-name">String</span> nickname <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// rs.getString(&quot;nickname&quot;)</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>uid <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> password <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> status <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> nickname<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ps<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="crud-æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#crud-æ“ä½œ" aria-hidden="true">#</a> CRUD æ“ä½œ</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
* æ·»åŠ æ•°æ®
*/</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> pwd<span class="token punctuation">,</span> <span class="token class-name">String</span> nickname<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token comment">//å‡†å¤‡sqlè¯­å¥</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into user(username,password,nickname) values(?,?,?)&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 1.åŠ è½½é©±åŠ¨</span>
    <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2.è·å–è¿æ¥</span>
    <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://127.0.0.1:3306/test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3.è·å–å¤„ç†sqlè¯­å¥çš„æ‰§è¡Œå¯¹è±¡</span>
    <span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//é¢„å¤„ç†</span>
    ps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>nickname<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 4.æ‰§è¡Œsqlè¯­å¥</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 5.å¤„ç†ç»“æœ</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å—å½±å“ä»£ç è¡Œï¼š&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 6.å…³é—­èµ„æº</span>
    stat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * æ ¹æ®æä¾›çš„ç”¨æˆ·idåˆ é™¤ç”¨æˆ·
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from user where id=?&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span><span class="token punctuation">(</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://127.0.0.1:3306/test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–é¢„ç¼–è¯‘sqlçš„å¯¹è±¡ï¼ˆå·²ç»å®Œæˆçš„sqlè¯­å¥çš„é¢„ç¼–è¯‘ï¼‰</span>
        <span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">)</span><span class="token punctuation">{</span>
        ps<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> ps<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
* æ ¹æ®æä¾›çš„ç”¨æˆ·idä¿®æ”¹ç”¨æˆ·å¯†ç ä¸ºæŒ‡å®šå€¼
*/</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span><span class="token class-name">String</span> newPwd<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update user set password=? where id=?&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span><span class="token punctuation">(</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://127.0.0.1:3306/test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">)</span><span class="token punctuation">{</span>
        ps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>newPwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ps<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> ps<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
* æ ¹æ®idæŸ¥è¯¢æ•°æ®
* <span class="token keyword">@param</span> <span class="token parameter">id</span>
* <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">SQLException</span></span>
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">queryById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from user where id=?&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//è·å–è¿æ¥</span>
    <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://127.0.0.1:3306/test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è·å–æ‰§è¡Œsqlè¯­å¥çš„å¯¹è±¡</span>
    <span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ps<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//æ‰§è¡ŒæŸ¥è¯¢</span>
    <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> uid <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// rs.getInt(&quot;id&quot;)</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// rs.getString(&quot;username&quot;)</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// rs.getString(&quot;password&quot;)</span>
        <span class="token keyword">int</span> status <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// rs.getInt(&quot;status&quot;)</span>
        <span class="token class-name">String</span> nickname <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// rs.getString(&quot;nickname&quot;)</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>uid <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> password <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> status <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> nickname<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ps<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç»ƒä¹ " tabindex="-1"><a class="header-anchor" href="#ç»ƒä¹ " aria-hidden="true">#</a> ç»ƒä¹ </h2><ol><li><p>è¦æ±‚å®ç° JDBC åŸºæœ¬å°è£…ï¼Œå°†ä»¥ä¸‹å‡ è¡Œé‡å¤ä»£ç å°è£…èµ·æ¥ï¼Œæä¾›ç®€å•çš„æ–¹å¼è¿›è¡Œè°ƒç”¨</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://127.0.0.1:3306/test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ps<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å®Œæˆä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼Œå…¶ä¸­ç”¨æˆ·çš„ä¿¡æ¯åŒ…å«ä»¥ä¸‹ï¼š</p><ul><li>ç”¨æˆ· id/ç”¨æˆ·å/å¯†ç /æ€§åˆ«/ç”Ÿæ—¥/æ‰‹æœºå·/è´¦æˆ·çŠ¶æ€</li></ul><p>è¦æ±‚å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li>ç”¨æˆ·ç™»å½•</li><li>ç”¨æˆ·æ·»åŠ </li><li>æ ¹æ® id æŸ¥è¯¢ç”¨æˆ·</li><li>æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</li><li>ä¿®æ”¹æŒ‡å®š id çš„ç”¨æˆ·å¯†ç </li><li>ä¿®æ”¹æŒ‡å®š id ç”¨æˆ·çš„ç™»å½•çŠ¶æ€</li><li>æ ¹æ® id åˆ é™¤æŒ‡å®šç”¨æˆ·</li></ol><p>è¯´æ˜ï¼šä»¥ä¸Šæ‰€æœ‰åŠŸèƒ½çš„å®ç°éƒ½å¿…é¡»å…ˆç»è¿‡ç™»é™†ä¹‹åæ‰å¯å®Œæˆï¼Œå¦å¤–ç™»å½•åŠŸèƒ½éœ€è¦éªŒè¯ç”¨æˆ·çš„è´¦æˆ·çŠ¶æ€(0:è´¦æˆ·ä¸å¯ç”¨ã€1:è´¦æˆ·å¯ç”¨)ï¼Œç™»å½•å¤±è´¥æ—¶æç¤ºå‹å¥½çš„ä¿¡æ¯ï¼ˆè´¦å·ä¸æ­£ç¡®ã€å¯†ç é”™è¯¯ã€è´¦æˆ·ä¸å¯ç”¨ï¼‰</p></li></ol>`,48);function g(q,f){const a=o("router-link");return c(),l("div",null,[m,n("nav",v,[n("ul",null,[n("li",null,[t(a,{to:"#jdbc-æ¦‚è¿°"},{default:p(()=>[s("JDBC æ¦‚è¿°")]),_:1})]),n("li",null,[t(a,{to:"#å…¥é—¨æ¡ˆä¾‹"},{default:p(()=>[s("å…¥é—¨æ¡ˆä¾‹")]),_:1})]),n("li",null,[t(a,{to:"#jdbc-å¸¸è§ç±»ä¸æ¥å£"},{default:p(()=>[s("JDBC å¸¸è§ç±»ä¸æ¥å£")]),_:1}),n("ul",null,[n("li",null,[t(a,{to:"#drivermanager"},{default:p(()=>[s("DriverManager")]),_:1})]),n("li",null,[t(a,{to:"#connection"},{default:p(()=>[s("Connection")]),_:1})]),n("li",null,[t(a,{to:"#statement-ä¸-preparedstatement"},{default:p(()=>[s("Statement ä¸ PreparedStatement")]),_:1})]),n("li",null,[t(a,{to:"#resultset"},{default:p(()=>[s("ResultSet")]),_:1})])])]),n("li",null,[t(a,{to:"#crud-æ“ä½œ"},{default:p(()=>[s("CRUD æ“ä½œ")]),_:1})]),n("li",null,[t(a,{to:"#ç»ƒä¹ "},{default:p(()=>[s("ç»ƒä¹ ")]),_:1})])])]),b])}const w=e(d,[["render",g],["__file","index.html.vue"]]);export{w as default};
