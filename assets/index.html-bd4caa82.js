import{_ as i,r as e,o as l,c as u,a as n,e as a,w as p,b as s,d as o}from"./app-a153c100.js";const r="/MyBlog/assets/image-20220317101115398-7dd69e2a.png",d="/MyBlog/assets/image-20220316093416477-c8d16038.png",k="/MyBlog/assets/image-20220316093922199-5aa53145.png",m="/MyBlog/assets/image-20220316093957662-5da001be.png",v="/MyBlog/assets/getting.started.bpmn.process-50d289d6.png",g="/MyBlog/assets/image-20220317110902636-8ba4edc5.png",b="/MyBlog/assets/image-20220316100439048-a1b3a52b.png",f="/MyBlog/assets/image-20220316100532725-2c39bff0.png",_="/MyBlog/assets/image-20220316100611004-9d4d82a4.png",y="/MyBlog/assets/image-20220316100648362-903ad2c6.png",h="/MyBlog/assets/image-20220316102638015-8ea25e98.png",q="/MyBlog/assets/image-20220316110406801-bba0222a.png",E="/MyBlog/assets/image-20220316111124019-65bbf519.png",I="/MyBlog/assets/image-20220316111253702-427308ee.png",T="/MyBlog/assets/image-20220316111913933-a73b464d.png",S="/MyBlog/assets/image-20220316202904261-1b3d42c8.png",D="/MyBlog/assets/image-20220316203036602-91edecce.png",w="/MyBlog/assets/image-20220316203111301-94963797.png",R="/MyBlog/assets/image-20220316203237316-dd7348a8.png",P="/MyBlog/assets/image-20220316203454281-a467a356.png",A="/MyBlog/assets/image-20220316211319931-745146f0.png",C="/MyBlog/assets/image-20220316211405001-484dade0.png",M="/MyBlog/assets/image-20220316211518520-fbcb7371.png",N="/MyBlog/assets/image-20220316211622115-ad6bd494.png",x="/MyBlog/assets/image-20220316211651195-e5ec5099.png",B="/MyBlog/assets/image-20220316211729581-90701fdf.png",U="/MyBlog/assets/image-20220316211802548-03fbc839.png",j="/MyBlog/assets/image-20220316212008477-945d2666.png",O="/MyBlog/assets/image-20220316212418899-a0d6c8ef.png",F="/MyBlog/assets/image-20220316212605146-e82d5fba.png",L="/MyBlog/assets/image-20220316212720767-25d9e75f.png",H="/MyBlog/assets/image-20220316214339678-08561853.png",J="/MyBlog/assets/image-20220316214430644-225ed0ce.png",Y="/MyBlog/assets/image-20220316214700887-e5bee6bf.png",K="/MyBlog/assets/image-20220316214808400-32ddc298.png",X="/MyBlog/assets/image-20220316214256235-4cd33901.png",V="/MyBlog/assets/image-20220316215805503-beda088b.png",G="/MyBlog/assets/image-20220316215900052-f2adc180.png",z="/MyBlog/assets/image-20220316215945236-6e43f713.png",Q="/MyBlog/assets/image-20220316220121734-cc3bc205.png",Z="/MyBlog/assets/image-20220318102128672-f93c02dd.png",W="/MyBlog/assets/image-20220318102224330-58ee114f.png",$="/MyBlog/assets/image-20220318102255188-038e8ca9.png",nn="/MyBlog/assets/image-20220318102325924-0d060eca.png",sn="/MyBlog/assets/image-20220318102446699-798b22e9.png",an="/MyBlog/assets/image-20220318102609807-2561b748.png",tn="/MyBlog/assets/image-20220318102707368-fc3ceb7d.png",pn="/MyBlog/assets/image-20220318102734238-597e33a7.png",en="/MyBlog/assets/image-20220318102817782-b023a4e3.png",on="/MyBlog/assets/image-20220318102859814-c61dfb8f.png",cn="/MyBlog/assets/image-20220318101239742-4d925c4a.png",ln="/MyBlog/assets/image-20220318101346692-30c70bb3.png",un="/MyBlog/assets/image-20220318101639424-0a64eb62.png",rn="/MyBlog/assets/image-20220318101611564-48220a4b.png",dn="/MyBlog/assets/image-20220318101810272-5e91d168.png",kn="/MyBlog/assets/image-20220318103413285-515f9957.png",mn="/MyBlog/assets/image-20220318103518807-646266e3.png",vn="/MyBlog/assets/image-20220318104517967-ece2e6be.png",gn="/MyBlog/assets/image-20220318104614784-83aaab39.png",bn="/MyBlog/assets/image-20220318104703306-7c05fd1c.png",fn="/MyBlog/assets/image-20220318104735714-20487963.png",_n="/MyBlog/assets/image-20220318104811812-49246d35.png",yn="/MyBlog/assets/image-20220318105045345-bc604b77.png",hn="/MyBlog/assets/image-20220318105258331-8fd454d6.png",qn="/MyBlog/assets/image-20220318105315908-1d8869a0.png",En="/MyBlog/assets/image-20220318105336107-2390a3ab.png",In="/MyBlog/assets/image-20220318105420011-0fda49b7.png",Tn="/MyBlog/assets/image-20220318105444672-4e0e88a2.png",Sn="/MyBlog/assets/image-20220318105646273-9eaf319f.png",Dn="/MyBlog/assets/image-20220318105727192-f019bb03.png",wn="/MyBlog/assets/image-20220318105808830-68988008.png",Rn="/MyBlog/assets/image-20220318105848185-5976e983.png",Pn="/MyBlog/assets/image-20220319113106848-97630384.png",An="/MyBlog/assets/image-20220319113139646-5f2192cd.png",Cn="/MyBlog/assets/image-20220319114011806-120020b9.png",Mn="/MyBlog/assets/image-20220319114053252-9c829910.png",Nn="/MyBlog/assets/image-20220319114210012-35664424.png",xn="/MyBlog/assets/image-20220319223019186-438498e7.png",Bn="/MyBlog/assets/image-20220320103803308-89d63c33.png",Un="/MyBlog/assets/image-20220320103929543-8ec67fba.png",jn="/MyBlog/assets/image-20230705184623096-362ba3a5.png",On="/MyBlog/assets/image-20220320104157816-4aaec574.png",Fn="/MyBlog/assets/image-20220321210010518-b1c0db74.png",Ln="/MyBlog/assets/image-20220321211858122-9f154eff.png",Hn="/MyBlog/assets/image-20220322133108405-8a8d57c4.png",Jn="/MyBlog/assets/image-20220322133219534-69793221.png",Yn="/MyBlog/assets/image-20220322133307195-9f24f1ac.png",Kn="/MyBlog/assets/image-20220322133335326-c11193cb.png",Xn="/MyBlog/assets/image-20220322133406398-01dcbf21.png",Vn="/MyBlog/assets/image-20220322133439827-b4c07618.png",Gn="/MyBlog/assets/image-20220322133501720-317aa219.png",zn="/MyBlog/assets/image-20220322135040119-f262acb1.png",Qn="/MyBlog/assets/image-20220322135125703-8609d4af.png",Zn="/MyBlog/assets/image-20220322135204021-80e6e2dd.png",Wn="/MyBlog/assets/image-20220322135605252-9c6fd1f8.png",$n="/MyBlog/assets/image-20220322135636841-a53ecd37.png",ns="/MyBlog/assets/image-20220322135659671-db4fcc4e.png",ss="/MyBlog/assets/image-20220322135719104-fcccbb02.png",as="/MyBlog/assets/image-20220322141800554-e2598113.png",ts="/MyBlog/assets/image-20220322141825065-927f7ecd.png",ps="/MyBlog/assets/image-20220322141717826-7027a403.png",es="/MyBlog/assets/image-20220322141855401-05612749.png",os="/MyBlog/assets/image-20220322141912602-17d5d9b6.png",cs="/MyBlog/assets/image-20220322142609163-5bff885e.png",is="/MyBlog/assets/image-20220322142650699-17e300b7.png",ls="/MyBlog/assets/image-20220322142756867-a3e077b8.png",us={},rs=n("h1",{id:"ğŸflowable-å…¥é—¨-åŸºç¡€ç¯‡",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ğŸflowable-å…¥é—¨-åŸºç¡€ç¯‡","aria-hidden":"true"},"#"),s(" ğŸFlowable å…¥é—¨-åŸºç¡€ç¯‡")],-1),ds=n("hr",null,null,-1),ks={class:"table-of-contents"},ms=o('<h1 id="æœ€æ–°-flowable-å·¥ä½œæµæ•™ç¨‹" tabindex="-1"><a class="header-anchor" href="#æœ€æ–°-flowable-å·¥ä½œæµæ•™ç¨‹" aria-hidden="true">#</a> æœ€æ–° Flowable å·¥ä½œæµæ•™ç¨‹</h1><h1 id="ä¸€ã€flowable-ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€flowable-ä»‹ç»" aria-hidden="true">#</a> ä¸€ã€Flowable ä»‹ç»</h1><p>â€ƒâ€ƒFlowable æ˜¯ BPMN çš„ä¸€ä¸ªåŸºäº java çš„è½¯ä»¶å®ç°ï¼Œä¸è¿‡ Flowable ä¸ä»…ä»…åŒ…æ‹¬ BPMNï¼Œè¿˜æœ‰ DMN å†³ç­–è¡¨å’Œ CMMN Case ç®¡ç†å¼•æ“ï¼Œå¹¶ä¸”æœ‰è‡ªå·±çš„ç”¨æˆ·ç®¡ç†ã€å¾®æœåŠ¡ API ç­‰ä¸€ç³»åˆ—åŠŸèƒ½ï¼Œæ˜¯ä¸€ä¸ªæœåŠ¡å¹³å°ã€‚</p><p><img src="'+r+`" alt="image-20220317101115398"></p><h1 id="äºŒã€flowable-åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#äºŒã€flowable-åŸºç¡€" aria-hidden="true">#</a> äºŒã€Flowable åŸºç¡€</h1><p>å®˜æ–¹æ‰‹å†Œï¼šhttps://tkjohn.github.io/flowable-userguide/#_introduction</p><h2 id="_1-åˆ›å»º-processengine" tabindex="-1"><a class="header-anchor" href="#_1-åˆ›å»º-processengine" aria-hidden="true">#</a> 1.åˆ›å»º ProcessEngine</h2><p>â€ƒâ€ƒåˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ maven å·¥ç¨‹ï¼Œå¯ä»¥æ˜¯ Eclipse ä¹Ÿå¯ä»¥æ˜¯å…¶ä»– IDEAã€‚ç„¶åæ·»åŠ ä¸¤ä¸ªä¾èµ–</p><ul><li>Flowable æµç¨‹å¼•æ“ã€‚ä½¿æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª ProcessEngine æµç¨‹å¼•æ“å¯¹è±¡ï¼Œå¹¶è®¿é—® Flowable APIã€‚</li><li>ä¸€ä¸ªæ˜¯ MySQL çš„æ•°æ®åº“é©±åŠ¨</li></ul><p>åœ¨<em>pom.xml</em>æ–‡ä»¶ä¸­æ·»åŠ ä¸‹åˆ—è¡Œï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.flowable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>flowable-engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.3.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€ƒâ€ƒç„¶ååˆ›å»ºä¸€ä¸ªæ™®é€šçš„ Java ç±»ï¼Œæ·»åŠ å¯¹åº”çš„ main æ–¹æ³•ï¼Œé¦–å…ˆè¦åšçš„æ˜¯åˆå§‹åŒ–<strong>ProcessEngine</strong>æµç¨‹å¼•æ“å®ä¾‹ã€‚è¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å¯¹è±¡ï¼Œå› æ­¤é€šå¸¸åªéœ€è¦åœ¨ä¸€ä¸ªåº”ç”¨ä¸­åˆå§‹åŒ–ä¸€æ¬¡ã€‚ <em>ProcessEngine</em>ç”±<strong>ProcessEngineConfiguration</strong>å®ä¾‹åˆ›å»ºã€‚è¯¥å®ä¾‹å¯ä»¥é…ç½®ä¸è°ƒæ•´æµç¨‹å¼•æ“çš„è®¾ç½®ã€‚ é€šå¸¸ä½¿ç”¨ä¸€ä¸ªé…ç½® XML æ–‡ä»¶åˆ›å»º<em>ProcessEngineConfiguration</em>ï¼Œä½†æ˜¯ï¼ˆåƒåœ¨è¿™é‡Œåšçš„ä¸€æ ·ï¼‰ä¹Ÿå¯ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»ºå®ƒã€‚ <em>ProcessEngineConfiguration</em>æ‰€éœ€çš„æœ€å°é…ç½®ï¼Œæ˜¯æ•°æ®åº“ JDBC è¿æ¥ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ProcessEngineConfiguration</span> cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandaloneProcessEngineConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/flowable-learn?serverTimezone=UTC&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setJdbcUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setJdbcPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setJdbcDriver</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDatabaseSchemaUpdate</span><span class="token punctuation">(</span><span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token constant">DB_SCHEMA_UPDATE_TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> cfg<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€ƒâ€ƒæ³¨æ„åœ¨ mysql8.0 ä¸­æ‰§è¡Œå¯èƒ½å‡ºç°å¦‚ä¸‹çš„é”™è¯¯</p><p><img src="`+d+`" alt="image-20220316093416477"></p><p>â€ƒâ€ƒå‡ºç°è¿™ç§æƒ…å†µåªéœ€è¦åœ¨ mysql çš„è¿æ¥å­—ç¬¦ä¸²ä¸­æ·»åŠ ä¸Š nullCatalogMeansCurrent=trueï¼Œè®¾ç½®ä¸ºåªæŸ¥å½“å‰è¿æ¥çš„ schema åº“å³å¯ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * è·å–æµç¨‹å¼•æ“å¯¹è±¡
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–  ProcessEngineConfiguration å¯¹è±¡(æµç¨‹å¼•æ“é…ç½®å¯¹è±¡)</span>
    <span class="token class-name">ProcessEngineConfiguration</span> configuration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandaloneProcessEngineConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// é…ç½® ç›¸å…³çš„æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯</span>
    configuration<span class="token punctuation">.</span><span class="token function">setJdbcDriver</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    configuration<span class="token punctuation">.</span><span class="token function">setJdbcUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    configuration<span class="token punctuation">.</span><span class="token function">setJdbcPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    configuration<span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/flowable-learn?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å¦‚æœæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ä¸å­˜åœ¨å°±æ–°å»º</span>
    configuration<span class="token punctuation">.</span><span class="token function">setDatabaseSchemaUpdate</span><span class="token punctuation">(</span><span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token constant">DB_SCHEMA_UPDATE_TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// é€šè¿‡ ProcessEngineConfiguration æ„å»ºæˆ‘ä»¬éœ€è¦çš„ processEngine å¯¹è±¡(æµç¨‹å¼•æ“å¯¹è±¡)</span>
    <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;processEngine = &quot;</span> <span class="token operator">+</span> processEngine<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17),vs={href:"http://www.slf4j.org/",target:"_blank",rel:"noopener noreferrer"},gs=o(`<div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€ƒâ€ƒLog4j éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚åœ¨<em>src/main/resources</em>æ–‡ä»¶å¤¹ä¸‹æ·»åŠ <em>log4j.properties</em>æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä¸‹åˆ—å†…å®¹ï¼š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">log4j.rootLogger</span><span class="token punctuation">=</span><span class="token value attr-value">DEBUG, CA</span>

<span class="token key attr-name">log4j.appender.CA</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.log4j.ConsoleAppender</span>
<span class="token key attr-name">log4j.appender.CA.layout</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.log4j.PatternLayout</span>
<span class="token key attr-name">log4j.appender.CA.layout.ConversionPattern</span><span class="token punctuation">=</span> <span class="token value attr-value">%d{hh:mm:ss,SSS} [%t] %-5p %c %x - %m%n</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€ƒâ€ƒé‡æ–°è¿è¡Œåº”ç”¨ã€‚åº”è¯¥å¯ä»¥çœ‹åˆ°å…³äºå¼•æ“å¯åŠ¨ä¸åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„çš„æç¤ºæ—¥å¿—ï¼š</p><p><img src="`+k+'" alt="image-20220316093922199"></p><p>â€ƒâ€ƒåŒæ—¶å¯ä»¥çœ‹åˆ°åˆ›å»ºäº†ç›¸å…³çš„è¡¨ç»“æ„åœ¨æ•°æ®åº“ä¸­(34 å¼ è¡¨)</p><p><img src="'+m+'" alt="image-20220316093957662"></p><p>â€ƒâ€ƒè¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªå¯åŠ¨å¯ç”¨çš„æµç¨‹å¼•æ“ã€‚æ¥ä¸‹æ¥ä¸ºå®ƒæä¾›ä¸€ä¸ªæµç¨‹ï¼</p><h2 id="_2-éƒ¨ç½²æµç¨‹å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#_2-éƒ¨ç½²æµç¨‹å®šä¹‰" aria-hidden="true">#</a> 2.éƒ¨ç½²æµç¨‹å®šä¹‰</h2><p>â€ƒâ€ƒæ¥ä¸‹æ¥æˆ‘ä»¬æ„å»ºä¸€ä¸ªéå¸¸ç®€å•çš„è¯·å‡æµç¨‹ï¼ŒFlowable å¼•æ“éœ€è¦æµç¨‹å®šä¹‰ä¸º BPMN 2.0 æ ¼å¼ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸šç•Œå¹¿æ³›æ¥å—çš„ XML æ ‡å‡†ã€‚ åœ¨ Flowable æœ¯è¯­ä¸­ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸ºä¸€ä¸ª<strong>æµç¨‹å®šä¹‰(process definition)</strong>ã€‚ä¸€ä¸ª<em>æµç¨‹å®šä¹‰</em>å¯ä»¥å¯åŠ¨å¤šä¸ª<strong>æµç¨‹å®ä¾‹(process instance)</strong>ã€‚<em>æµç¨‹å®šä¹‰</em>å¯ä»¥çœ‹åšæ˜¯é‡å¤æ‰§è¡Œæµç¨‹çš„è“å›¾ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<em>æµç¨‹å®šä¹‰</em>å®šä¹‰äº†è¯·å‡çš„å„ä¸ªæ­¥éª¤ï¼Œè€Œä¸€ä¸ª<em>æµç¨‹å®ä¾‹</em>å¯¹åº”æŸä¸ªé›‡å‘˜æå‡ºçš„ä¸€ä¸ªè¯·å‡ç”³è¯·ã€‚</p><p>â€ƒâ€ƒBPMN 2.0 å­˜å‚¨ä¸º XMLï¼Œå¹¶åŒ…å«å¯è§†åŒ–çš„éƒ¨åˆ†ï¼šä½¿ç”¨æ ‡å‡†æ–¹å¼å®šä¹‰äº†æ¯ä¸ªæ­¥éª¤ç±»å‹ï¼ˆäººå·¥ä»»åŠ¡ï¼Œè‡ªåŠ¨æœåŠ¡è°ƒç”¨ï¼Œç­‰ç­‰ï¼‰å¦‚ä½•å‘ˆç°ï¼Œä»¥åŠå¦‚ä½•äº’ç›¸è¿æ¥ã€‚è¿™æ · BPMN 2.0 æ ‡å‡†ä½¿æŠ€æœ¯äººå‘˜ä¸ä¸šåŠ¡äººå‘˜èƒ½ç”¨åŒæ–¹éƒ½èƒ½ç†è§£çš„æ–¹å¼äº¤æµä¸šåŠ¡æµç¨‹ã€‚</p><p>â€ƒâ€ƒæˆ‘ä»¬è¦ä½¿ç”¨çš„æµç¨‹å®šä¹‰ä¸ºï¼š</p><p><img src="'+v+`" alt="getting.started.bpmn.process"></p><p>â€ƒâ€ƒæµç¨‹å®šä¹‰è¯´æ˜ï¼š</p><ul><li>æˆ‘ä»¬å‡å®šå¯åŠ¨æµç¨‹éœ€è¦æä¾›ä¸€äº›ä¿¡æ¯ï¼Œä¾‹å¦‚é›‡å‘˜åå­—ã€è¯·å‡æ—¶é•¿ä»¥åŠè¯´æ˜ã€‚å½“ç„¶ï¼Œè¿™äº›å¯ä»¥å•ç‹¬å»ºæ¨¡ä¸ºæµç¨‹ä¸­çš„ç¬¬ä¸€æ­¥ã€‚ ä½†æ˜¯å¦‚æœå°†å®ƒä»¬ä½œä¸ºæµç¨‹çš„â€œè¾“å…¥ä¿¡æ¯â€ï¼Œå°±èƒ½ä¿è¯åªæœ‰åœ¨å®é™…è¯·æ±‚æ—¶æ‰ä¼šå»ºç«‹ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚å¦åˆ™ï¼ˆå°†æäº¤ä½œä¸ºæµç¨‹çš„ç¬¬ä¸€æ­¥ï¼‰ï¼Œç”¨æˆ·å¯èƒ½åœ¨æäº¤ä¹‹å‰æ”¹å˜ä¸»æ„å¹¶å–æ¶ˆï¼Œä½†æµç¨‹å®ä¾‹å·²ç»åˆ›å»ºäº†ã€‚ åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œå°±å¯èƒ½å½±å“é‡è¦çš„æŒ‡æ ‡ï¼ˆä¾‹å¦‚å¯åŠ¨äº†å¤šå°‘ç”³è¯·ï¼Œä½†è¿˜æœªå®Œæˆï¼‰ï¼Œå–å†³äºä¸šåŠ¡ç›®æ ‡ã€‚</li><li>å·¦ä¾§çš„åœ†åœˆå«åš<strong>å¯åŠ¨äº‹ä»¶(start event)</strong>ã€‚è¿™æ˜¯ä¸€ä¸ªæµç¨‹å®ä¾‹çš„èµ·ç‚¹ã€‚</li><li>ç¬¬ä¸€ä¸ªçŸ©å½¢æ˜¯ä¸€ä¸ª<strong>ç”¨æˆ·ä»»åŠ¡(user task)</strong>ã€‚è¿™æ˜¯æµç¨‹ä¸­ç”¨æˆ·æ“ä½œçš„æ­¥éª¤ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç»ç†éœ€è¦æ‰¹å‡†æˆ–é©³å›ç”³è¯·</li><li>å–å†³äºç»ç†çš„å†³å®šï¼Œ<strong>æ’ä»–ç½‘å…³(exclusive gateway)</strong> (å¸¦å‰çš„è±å½¢)ä¼šå°†æµç¨‹å®ä¾‹è·¯ç”±è‡³æ‰¹å‡†æˆ–é©³å›è·¯å¾„</li><li>å¦‚æœæ‰¹å‡†ï¼Œåˆ™éœ€è¦å°†ç”³è¯·æ³¨å†Œè‡³æŸä¸ªå¤–éƒ¨ç³»ç»Ÿï¼Œå¹¶è·Ÿç€å¦ä¸€ä¸ªç”¨æˆ·ä»»åŠ¡ï¼Œå°†ç»ç†çš„å†³å®šé€šçŸ¥ç»™ç”³è¯·äººã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ”¹ä¸ºå‘é€é‚®ä»¶ã€‚</li><li>å¦‚æœé©³å›ï¼Œåˆ™ä¸ºé›‡å‘˜å‘é€ä¸€å°é‚®ä»¶é€šçŸ¥ä»–ã€‚</li></ul><p>â€ƒâ€ƒä¸€èˆ¬æ¥è¯´ï¼Œè¿™æ ·çš„<em>æµç¨‹å®šä¹‰</em>ä½¿ç”¨å¯è§†åŒ–å»ºæ¨¡å·¥å…·å»ºç«‹ï¼Œå¦‚ Flowable Designer(Eclipse)æˆ– Flowable Web Modeler(Web åº”ç”¨)ã€‚ä½†åœ¨è¿™é‡Œæˆ‘ä»¬ç›´æ¥æ’°å†™ XMLï¼Œä»¥ç†Ÿæ‚‰ BPMN 2.0 åŠå…¶æ¦‚å¿µã€‚</p><p>â€ƒâ€ƒä¸ä¸Šé¢å±•ç¤ºçš„æµç¨‹å›¾å¯¹åº”çš„ BPMN 2.0 XML åœ¨ä¸‹é¢æ˜¾ç¤ºã€‚è¯·æ³¨æ„è¿™åªåŒ…å«äº†â€œæµç¨‹éƒ¨åˆ†â€ã€‚å¦‚æœä½¿ç”¨å›¾å½¢åŒ–å»ºæ¨¡å·¥å…·ï¼Œå®é™…çš„ XML æ–‡ä»¶è¿˜å°†åŒ…å«â€œå¯è§†åŒ–éƒ¨åˆ†â€ï¼Œç”¨äºæè¿°å›¾å½¢ä¿¡æ¯ï¼Œå¦‚æµç¨‹å®šä¹‰ä¸­å„ä¸ªå…ƒç´ çš„åæ ‡ï¼ˆæ‰€æœ‰çš„å›¾å½¢åŒ–ä¿¡æ¯åŒ…å«åœ¨ XML çš„<em>BPMNDiagram</em>æ ‡ç­¾ä¸­ï¼Œä½œä¸º<em>definitions</em>æ ‡ç­¾çš„å­å…ƒç´ ï¼‰ã€‚</p><p>â€ƒâ€ƒå°†ä¸‹é¢çš„ XML ä¿å­˜åœ¨<em>src/main/resources</em>æ–‡ä»¶å¤¹ä¸‹åä¸º<em>holiday-request.bpmn20.xml</em>çš„æ–‡ä»¶ä¸­ã€‚</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>definitions</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.omg.org/spec/BPMN/20100524/MODEL<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name"><span class="token namespace">xmlns:</span>xsd</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name"><span class="token namespace">xmlns:</span>bpmndi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.omg.org/spec/BPMN/20100524/DI<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name"><span class="token namespace">xmlns:</span>omgdc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.omg.org/spec/DD/20100524/DC<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name"><span class="token namespace">xmlns:</span>omgdi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.omg.org/spec/DD/20100524/DI<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name"><span class="token namespace">xmlns:</span>flowable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://flowable.org/bpmn<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name">typeLanguage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name">expressionLanguage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/XPath<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name">targetNamespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.flowable.org/processdef<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>process</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>holidayRequest<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Holiday Request<span class="token punctuation">&quot;</span></span> <span class="token attr-name">isExecutable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>startEvent</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>startEvent<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sequenceFlow</span> <span class="token attr-name">sourceRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>startEvent<span class="token punctuation">&quot;</span></span> <span class="token attr-name">targetRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>approveTask<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>userTask</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>approveTask<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Approve or reject request<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sequenceFlow</span> <span class="token attr-name">sourceRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>approveTask<span class="token punctuation">&quot;</span></span> <span class="token attr-name">targetRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>decision<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusiveGateway</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>decision<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sequenceFlow</span> <span class="token attr-name">sourceRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>decision<span class="token punctuation">&quot;</span></span> <span class="token attr-name">targetRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>externalSystemCall<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conditionExpression</span> <span class="token attr-name"><span class="token namespace">xsi:</span>type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tFormalExpression<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token cdata">&lt;![CDATA[
          \${approved}
        ]]&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>conditionExpression</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sequenceFlow</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sequenceFlow</span>  <span class="token attr-name">sourceRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>decision<span class="token punctuation">&quot;</span></span> <span class="token attr-name">targetRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sendRejectionMail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conditionExpression</span> <span class="token attr-name"><span class="token namespace">xsi:</span>type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tFormalExpression<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token cdata">&lt;![CDATA[
          \${!approved}
        ]]&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>conditionExpression</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sequenceFlow</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>serviceTask</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>externalSystemCall<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Enter holidays in external system<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name"><span class="token namespace">flowable:</span>class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.flowable.CallExternalSystemDelegate<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sequenceFlow</span> <span class="token attr-name">sourceRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>externalSystemCall<span class="token punctuation">&quot;</span></span> <span class="token attr-name">targetRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>holidayApprovedTask<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>userTask</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>holidayApprovedTask<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Holiday approved<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sequenceFlow</span> <span class="token attr-name">sourceRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>holidayApprovedTask<span class="token punctuation">&quot;</span></span> <span class="token attr-name">targetRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>approveEnd<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>serviceTask</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sendRejectionMail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Send out rejection email<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name"><span class="token namespace">flowable:</span>class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.flowable.SendRejectionMail<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sequenceFlow</span> <span class="token attr-name">sourceRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sendRejectionMail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">targetRef</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rejectEnd<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>endEvent</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>approveEnd<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>endEvent</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rejectEnd<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>process</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>definitions</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€ƒâ€ƒç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†æµç¨‹ BPMN 2.0 XML æ–‡ä»¶ï¼Œä¸‹æ¥éœ€è¦å°†å®ƒ***éƒ¨ç½²(deploy)***åˆ°å¼•æ“ä¸­ã€‚<em>éƒ¨ç½²</em>ä¸€ä¸ªæµç¨‹å®šä¹‰æ„å‘³ç€ï¼š</p><ul><li>æµç¨‹å¼•æ“ä¼šå°† XML æ–‡ä»¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œè¿™æ ·å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™è·å–å®ƒ</li><li>æµç¨‹å®šä¹‰è½¬æ¢ä¸ºå†…éƒ¨çš„ã€å¯æ‰§è¡Œçš„å¯¹è±¡æ¨¡å‹ï¼Œè¿™æ ·ä½¿ç”¨å®ƒå°±å¯ä»¥å¯åŠ¨<em>æµç¨‹å®ä¾‹</em>ã€‚</li></ul><p><img src="`+g+`" alt="image-20220317110902636"></p><p>â€ƒâ€ƒå°†æµç¨‹å®šä¹‰<em>éƒ¨ç½²</em>è‡³ Flowable å¼•æ“ï¼Œéœ€è¦ä½¿ç”¨<em>RepositoryService</em>ï¼Œå…¶å¯ä»¥ä»<em>ProcessEngine</em>å¯¹è±¡è·å–ã€‚ä½¿ç”¨<em>RepositoryService</em>ï¼Œå¯ä»¥é€šè¿‡ XML æ–‡ä»¶çš„è·¯å¾„åˆ›å»ºä¸€ä¸ªæ–°çš„<em>éƒ¨ç½²(Deployment)</em>ï¼Œå¹¶è°ƒç”¨*deploy()*æ–¹æ³•å®é™…æ‰§è¡Œï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token doc-comment comment">/**
     * éƒ¨ç½²æµç¨‹
     * éƒ¨ç½²å®Œæˆå å¯ä»¥åœ¨ è¡¨ä¸­çœ‹åˆ°è®°å½• act_re_deployment  act_ge_bytearray  act_re_procdef
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span>
        <span class="token class-name">ProcessEngineConfiguration</span> cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandaloneProcessEngineConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setJdbcUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setJdbcPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setJdbcDriver</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDatabaseSchemaUpdate</span><span class="token punctuation">(</span><span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token constant">DB_SCHEMA_UPDATE_TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span>
        <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> cfg<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// éƒ¨ç½²æµç¨‹ è·å–RepositoryServiceå¯¹è±¡</span>
        <span class="token class-name">RepositoryService</span> repositoryService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRepositoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Deployment</span> deployment <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">createDeployment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// åˆ›å»ºDeploymentå¯¹è±¡</span>
                <span class="token punctuation">.</span><span class="token function">addClasspathResource</span><span class="token punctuation">(</span><span class="token string">&quot;holiday-request.bpmn20.xml&quot;</span><span class="token punctuation">)</span> <span class="token comment">// æ·»åŠ æµç¨‹éƒ¨ç½²æ–‡ä»¶</span>
                <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚æµç¨‹&quot;</span><span class="token punctuation">)</span> <span class="token comment">// è®¾ç½®éƒ¨ç½²æµç¨‹çš„åç§°</span>
                <span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰§è¡Œéƒ¨ç½²æ“ä½œ</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deployment.getId() = &quot;</span> <span class="token operator">+</span> deployment<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// è·å–è¯¥æµç¨‹åç§°</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deployment.getName() = &quot;</span> <span class="token operator">+</span> deployment<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–è¯¥æµç¨‹ID</span>

    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è¾“å‡ºç»“æœï¼š</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>deploy.getId() = 2501
deploy.getName() = è¯·æ±‚æµç¨‹
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€ƒâ€ƒç„¶åæ‰§è¡Œè¯¥æ–¹æ³•æ—¥å¿—æ“ä½œæˆåŠŸï¼š</p><p><img src="`+b+'" alt="image-20220316100439048"></p><p>â€ƒâ€ƒåœ¨åå°è¡¨ç»“æ„ä¹Ÿå¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯</p><p>act_re_deployment: æµç¨‹å®šä¹‰éƒ¨ç½²è¡¨ï¼Œæ¯éƒ¨ç½²ä¸€æ¬¡å°±å¢åŠ ä¸€æ¡è®°å½•</p><p><img src="'+f+'" alt="image-20220316100532725"></p><p>act_re_procdef ï¼šæµç¨‹å®šä¹‰è¡¨ï¼Œéƒ¨ç½²æ¯ä¸ªæ–°çš„æµç¨‹å®šä¹‰éƒ½ä¼šåœ¨è¿™å¼ è¡¨ä¸­å¢åŠ ä¸€æ¡è®°å½•</p><p><img src="'+_+'" alt="image-20220316100611004"></p><p>act_ge_bytearray ï¼šæµç¨‹èµ„æºè¡¨ï¼Œæµç¨‹éƒ¨ç½²çš„ bpmn æ–‡ä»¶å’Œ png å›¾ç‰‡ä¼šä¿å­˜åœ¨è¯¥è¡¨ä¸­</p><p><img src="'+y+`" alt="image-20220316100648362"></p><p>â€ƒâ€ƒæˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡ API æŸ¥è¯¢éªŒè¯æµç¨‹å®šä¹‰å·²ç»éƒ¨ç½²åœ¨å¼•æ“ä¸­ï¼ˆå¹¶å­¦ä¹ ä¸€äº› APIï¼‰ã€‚é€šè¿‡<em>RepositoryService</em>åˆ›å»ºçš„<em>ProcessDefinitionQuery</em>å¯¹è±¡å®ç°ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * æŸ¥çœ‹æµç¨‹å®šä¹‰
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeployQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span>
    <span class="token class-name">ProcessEngineConfiguration</span> cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandaloneProcessEngineConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcDriver</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setDatabaseSchemaUpdate</span><span class="token punctuation">(</span><span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token constant">DB_SCHEMA_UPDATE_TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span>
    <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> cfg<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// éƒ¨ç½²æµç¨‹ è·å–RepositoryServiceå¯¹è±¡</span>
    <span class="token class-name">RepositoryService</span> repositoryService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRepositoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–æµç¨‹å®šä¹‰å¯¹è±¡</span>
    <span class="token class-name">ProcessDefinition</span> processDefinition <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">createProcessDefinitionQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">deploymentId</span><span class="token punctuation">(</span><span class="token string">&quot;2501&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">singleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;processDefinition.getId() = &quot;</span> <span class="token operator">+</span> processDefinition<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;processDefinition.getName() = &quot;</span> <span class="token operator">+</span> processDefinition<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;processDefinition.getDeploymentId() = &quot;</span> <span class="token operator">+</span> processDefinition<span class="token punctuation">.</span><span class="token function">getDeploymentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;processDefinition.getDescription() = &quot;</span> <span class="token operator">+</span> processDefinition<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœä¸ºï¼š</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>processDefinition.getId() = holidayRequest:2:2503
processDefinition.getName() = Holiday Request
processDefinition.getDeploymentId() = 2501
processDefinition.getDescription() = null
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token doc-comment comment">/**
     * æŸ¥è¯¢æµç¨‹å®šä¹‰çš„ä¿¡æ¯
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeployQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">RepositoryService</span> repositoryService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRepositoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*ProcessDefinitionQuery processDefinitionQuery = repositoryService.createProcessDefinitionQuery();
        ProcessDefinition processDefinition = processDefinitionQuery.deploymentId(&quot;1&quot;).singleResult();*/</span>

        <span class="token comment">// è·å–æµç¨‹å®šä¹‰ ä¹Ÿå¯ä»¥é“¾å¼ç¼–ç¨‹</span>
        <span class="token class-name">ProcessDefinition</span> processDefinition <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">createProcessDefinitionQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">deploymentId</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// éƒ¨ç½²id</span>
                <span class="token punctuation">.</span><span class="token function">singleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// è·å–ä¸€ä¸ªç»“æœé›†</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;processDefinition.getDeploymentId() = &quot;</span> <span class="token operator">+</span> processDefinition<span class="token punctuation">.</span><span class="token function">getDeploymentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æµç¨‹éƒ¨ç½²ID</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;processDefinition.getName() = &quot;</span> <span class="token operator">+</span> processDefinition<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// éƒ¨ç½²åç§°</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;processDefinition.getDescription() = &quot;</span> <span class="token operator">+</span> processDefinition<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// éƒ¨ç½²æè¿°</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;processDefinition.getId() = &quot;</span> <span class="token operator">+</span> processDefinition<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">// æµç¨‹å®šä¹‰ID</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœï¼š</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>processDefinition.getDeploymentId() = 1
processDefinition.getName() = è¯·å‡æµç¨‹
processDefinition.getDescription() = null
processDefinition.getId() = holidayRequest:1:3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-å¯åŠ¨æµç¨‹å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#_3-å¯åŠ¨æµç¨‹å®ä¾‹" aria-hidden="true">#</a> 3.å¯åŠ¨æµç¨‹å®ä¾‹</h2><p>â€ƒâ€ƒç°åœ¨å·²ç»åœ¨æµç¨‹å¼•æ“ä¸­<em>éƒ¨ç½²</em>äº†æµç¨‹å®šä¹‰ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è¿™ä¸ª<em>æµç¨‹å®šä¹‰</em>ä½œä¸ºâ€œæ¨¡æ¿â€å¯åŠ¨<em>æµç¨‹å®ä¾‹</em>ã€‚</p><p><img src="`+h+`" alt="image-20220316102638015"></p><p>â€ƒâ€ƒè¦å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œéœ€è¦æä¾›ä¸€äº›åˆå§‹åŒ–<em>æµç¨‹å˜é‡</em>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡å‘ˆç°ç»™ç”¨æˆ·çš„è¡¨å•ï¼Œæˆ–è€…åœ¨æµç¨‹ç”±å…¶ä»–ç³»ç»Ÿè‡ªåŠ¨è§¦å‘æ—¶é€šè¿‡ REST APIï¼Œæ¥è·å–è¿™äº›å˜é‡ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬ç®€åŒ–ç›´æ¥åœ¨ä»£ç ä¸­å®šä¹‰äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨<em>RuntimeService</em>å¯åŠ¨ä¸€ä¸ª<em>æµç¨‹å®ä¾‹</em>ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å¯åŠ¨æµç¨‹å®ä¾‹
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testRunProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span>
    <span class="token class-name">ProcessEngineConfiguration</span> cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandaloneProcessEngineConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcDriver</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setDatabaseSchemaUpdate</span><span class="token punctuation">(</span><span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token constant">DB_SCHEMA_UPDATE_TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span>
    <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> cfg<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡</span>
    <span class="token class-name">RuntimeService</span> runtimeService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRuntimeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ„å»ºæµç¨‹å˜é‡</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> variables <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    variables<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;employee&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment">// è°ç”³è¯·è¯·å‡</span>
    variables<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;nrOfHolidays&quot;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯·å‡ å¤©å‡</span>
    variables<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;å·¥ä½œç´¯äº†ï¼Œæƒ³å‡ºå»ç©ç©&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯·å‡çš„åŸå› </span>
    <span class="token comment">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id</span>
    <span class="token class-name">ProcessInstance</span> processInstance <span class="token operator">=</span> runtimeService
            <span class="token punctuation">.</span><span class="token function">startProcessInstanceByKey</span><span class="token punctuation">(</span><span class="token string">&quot;holidayRequest&quot;</span><span class="token punctuation">,</span> variables<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å¯åŠ¨æµç¨‹å®ä¾‹</span>
    <span class="token comment">// è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æµç¨‹å®šä¹‰çš„IDï¼š&quot;</span> <span class="token operator">+</span> processInstance<span class="token punctuation">.</span><span class="token function">getProcessDefinitionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æµç¨‹å®ä¾‹çš„IDï¼š&quot;</span> <span class="token operator">+</span> processInstance<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰æ´»åŠ¨çš„IDï¼š&quot;</span> <span class="token operator">+</span> processInstance<span class="token punctuation">.</span><span class="token function">getActivityId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨æˆåŠŸï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>æµç¨‹å®šä¹‰çš„IDï¼šholidayRequest:2:2503
æµç¨‹å®ä¾‹çš„IDï¼š5001
å½“å‰æ´»åŠ¨çš„IDï¼šnull
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹åº”çš„æµç¨‹å®ä¾‹ ID ä¸ºï¼š5001</p><p>å¯åŠ¨æµç¨‹å®ä¾‹æ¶‰åŠåˆ°çš„è¡¨ç»“æ„ï¼š</p><ul><li>act_hi_actinst æµç¨‹å®ä¾‹æ‰§è¡Œå†å²</li><li>act_hi_identitylink æµç¨‹çš„å‚ä¸ç”¨æˆ·çš„å†å²ä¿¡æ¯</li><li>act_hi_procinst æµç¨‹å®ä¾‹å†å²ä¿¡æ¯</li><li>act_hi_taskinst æµç¨‹ä»»åŠ¡å†å²ä¿¡æ¯</li><li>act_ru_execution æµç¨‹æ‰§è¡Œä¿¡æ¯</li><li>act_ru_identitylink æµç¨‹çš„å‚ä¸ç”¨æˆ·ä¿¡æ¯</li><li>act_ru_task ä»»åŠ¡ä¿¡æ¯</li></ul><h2 id="_4-æŸ¥çœ‹ä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#_4-æŸ¥çœ‹ä»»åŠ¡" aria-hidden="true">#</a> 4.æŸ¥çœ‹ä»»åŠ¡</h2><p>â€ƒâ€ƒä¸Šé¢å‘˜å·¥å‘èµ·äº†ä¸€ä¸ªè¯·å‡æµç¨‹ï¼Œæ¥ä¸‹æ¥å°±ä¼šæµè½¬åˆ°æ€»ç»ç†è¿™å„¿æ¥å¤„ç†ï¼Œä¹‹å‰æˆ‘ä»¬æ²¡æœ‰æŒ‡å®šç»ç†è¿™çš„å¤„ç†äººï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ª</p><p><img src="`+q+`" alt="image-20220316110406801"></p><p>â€ƒâ€ƒç„¶åæˆ‘ä»¬æ¥æŸ¥çœ‹ä¸‹ lisi çš„ä»»åŠ¡</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
* æŸ¥çœ‹ä»»åŠ¡
*/</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span>
<span class="token class-name">ProcessEngineConfiguration</span> cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandaloneProcessEngineConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setJdbcUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setJdbcPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setJdbcDriver</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDatabaseSchemaUpdate</span><span class="token punctuation">(</span><span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token constant">DB_SCHEMA_UPDATE_TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span>
<span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> cfg<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è·å–ä»»åŠ¡æœåŠ¡å¯¹è±¡</span>
<span class="token class-name">TaskService</span> taskService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getTaskService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è·å–æŸ¥è¯¢</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Task</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> taskService<span class="token punctuation">.</span><span class="token function">createTaskQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">processDefinitionKey</span><span class="token punctuation">(</span><span class="token string">&quot;holidayRequestNew&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">taskAssignee</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Task</span> task <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;task.getProcessDefinitionId() = &quot;</span> <span class="token operator">+</span> task<span class="token punctuation">.</span><span class="token function">getProcessDefinitionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æµç¨‹å®šä¹‰çš„ä¸»é”®</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;task.getName() = &quot;</span> <span class="token operator">+</span> task<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// ä»»åŠ¡åç§°</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;task.getAssignee() = &quot;</span> <span class="token operator">+</span> task<span class="token punctuation">.</span><span class="token function">getAssignee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// ä»»åŠ¡ä»£ç†äººï¼ˆå—ç†äººï¼‰</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;task.getDescription() = &quot;</span> <span class="token operator">+</span> task<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä»»åŠ¡çš„æè¿°</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;task.getId() = &quot;</span> <span class="token operator">+</span> task<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// ä»»åŠ¡çš„ID</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœä¸ºï¼š</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>task.getProcessDefinitionId() = holidayRequestNew:1:10003
task.getId() = 12508
task.getAssignee() = lisi
task.getName() = Approve or reject request
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-å®Œæˆä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#_5-å®Œæˆä»»åŠ¡" aria-hidden="true">#</a> 5.å®Œæˆä»»åŠ¡</h2><p>â€ƒâ€ƒç°åœ¨æå››è¿™ä¸ªè§’è‰²å¯ä»¥æ¥å®Œæˆå½“å‰çš„ä»»åŠ¡äº†</p><p><img src="`+E+'" alt="image-20220316111124019"></p><p>â€ƒâ€ƒåœ¨æ­¤å¤„æˆ‘ä»¬ç›´æ¥è§£å†³æ‰è¿™ä¸ªè¯·å‡ï¼Œç„¶åä¼šèµ°å‘é€æ‹’ç»é‚®ä»¶çš„æµç¨‹ï¼Œè¿™å—æˆ‘ä»¬éœ€è¦ç”¨åˆ° JavaDelegate æ¥è§¦å‘ã€‚</p><p><img src="'+I+`" alt="image-20220316111253702"></p><p>æˆ‘ä»¬å®šä¹‰è¿™æ ·ä¸€ä¸ª Java ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SendRejectionMail</span> <span class="token keyword">implements</span> <span class="token class-name">JavaDelegate</span> <span class="token punctuation">{</span>
<span class="token doc-comment comment">/**
 * è§¦å‘å‘é€é‚®ä»¶çš„æ“ä½œ
 * <span class="token keyword">@param</span> <span class="token parameter">delegateExecution</span>
 */</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">DelegateExecution</span> delegateExecution<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·å‡è¢«æ‹’ç»,,,å®‰å¿ƒå·¥ä½œå§&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæ¥å®Œæˆä»»åŠ¡</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å®Œæˆä»»åŠ¡
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCompleteTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span>
    <span class="token class-name">ProcessEngineConfiguration</span> cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandaloneProcessEngineConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcDriver</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setDatabaseSchemaUpdate</span><span class="token punctuation">(</span><span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token constant">DB_SCHEMA_UPDATE_TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span>
    <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> cfg<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–ä»»åŠ¡æœåŠ¡å¯¹è±¡</span>
    <span class="token class-name">TaskService</span> taskService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getTaskService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–ä»»åŠ¡</span>
    <span class="token class-name">Task</span> task <span class="token operator">=</span> taskService<span class="token punctuation">.</span><span class="token function">createTaskQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">processDefinitionKey</span><span class="token punctuation">(</span><span class="token string">&quot;holidayRequestNew&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">taskAssignee</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">singleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ·»åŠ æµç¨‹å˜é‡(å‚æ•°)</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> variables <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    variables<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;approved&quot;</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹’ç»è¯·å‡</span>
    <span class="token comment">// å®Œæˆä»»åŠ¡</span>
    taskService<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span>task<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>variables<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åå¯ä»¥çœ‹åˆ° JavaDelegate è§¦å‘äº†</p><p><img src="`+T+`" alt="image-20220316111913933"></p><h2 id="_6-æµç¨‹çš„åˆ é™¤" tabindex="-1"><a class="header-anchor" href="#_6-æµç¨‹çš„åˆ é™¤" aria-hidden="true">#</a> 6.æµç¨‹çš„åˆ é™¤</h2><p>â€ƒâ€ƒæœ‰äº›æµç¨‹å·²ç»æ²¡æœ‰ç”¨äº†ï¼Œæˆ‘ä»¬éœ€è¦åˆ é™¤æ‰ï¼Œå…¶å®ä¹Ÿéå¸¸ç®€å•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token doc-comment comment">/**
     * åˆ é™¤æµç¨‹
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span>
        <span class="token class-name">ProcessEngineConfiguration</span> cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandaloneProcessEngineConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setJdbcUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setJdbcPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setJdbcDriver</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDatabaseSchemaUpdate</span><span class="token punctuation">(</span><span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token constant">DB_SCHEMA_UPDATE_TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span>
        <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> cfg<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">RepositoryService</span> repositoryService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRepositoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ é™¤éƒ¨ç½²çš„æµç¨‹ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ id  å¦‚æœéƒ¨ç½²çš„æµç¨‹å¯åŠ¨äº†å°±ä¸å…è®¸åˆ é™¤äº†(æŠ¥é”™)</span>
        <span class="token comment">// repositoryService.deleteDeployment(&quot;2501&quot;);</span>
        <span class="token comment">// ç¬¬äºŒä¸ªå‚æ•°æ˜¯çº§è”åˆ é™¤ï¼Œå¦‚æœæµç¨‹å¯åŠ¨äº† ç›¸å…³çš„ä»»åŠ¡ä¹Ÿä¼šä¸€å¹¶ä¼šè¢«åˆ é™¤æ‰ (å¼ºåˆ¶åˆ é™¤)</span>
        repositoryService<span class="token punctuation">.</span><span class="token function">deleteDeployment</span><span class="token punctuation">(</span><span class="token string">&quot;2501&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-æŸ¥çœ‹å†å²ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_7-æŸ¥çœ‹å†å²ä¿¡æ¯" aria-hidden="true">#</a> 7.æŸ¥çœ‹å†å²ä¿¡æ¯</h2><p>â€ƒâ€ƒé€‰æ‹©ä½¿ç”¨ Flowable è¿™æ ·çš„æµç¨‹å¼•æ“çš„åŸå› ä¹‹ä¸€ï¼Œæ˜¯å®ƒå¯ä»¥è‡ªåŠ¨å­˜å‚¨æ‰€æœ‰æµç¨‹å®ä¾‹çš„<strong>å®¡è®¡æ•°æ®</strong>æˆ–<strong>å†å²æ•°æ®</strong>ã€‚è¿™äº›æ•°æ®å¯ä»¥ç”¨äºåˆ›å»ºæŠ¥å‘Šï¼Œæ·±å…¥å±•ç°ç»„ç»‡è¿è¡Œçš„æƒ…å†µï¼Œç“¶é¢ˆåœ¨å“ªé‡Œï¼Œç­‰ç­‰ã€‚</p><p>â€ƒâ€ƒä¾‹å¦‚ï¼Œå¦‚æœå¸Œæœ›æ˜¾ç¤ºæµç¨‹å®ä¾‹å·²ç»æ‰§è¡Œçš„æ—¶é—´ï¼Œå°±å¯ä»¥ä»<em>ProcessEngine</em>è·å–<em>HistoryService</em>ï¼Œå¹¶åˆ›å»º*å†å²æ´»åŠ¨(historical activities)*çš„æŸ¥è¯¢ã€‚åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ·»åŠ äº†ä¸€äº›é¢å¤–çš„è¿‡æ»¤æ¡ä»¶ï¼š</p><ul><li>åªé€‰æ‹©ä¸€ä¸ªç‰¹å®šæµç¨‹å®ä¾‹çš„æ´»åŠ¨</li><li>åªé€‰æ‹©å·²å®Œæˆçš„æ´»åŠ¨</li></ul><p>â€ƒâ€ƒç»“æœæŒ‰ç…§ç»“æŸæ—¶é—´æ’åºï¼Œä»£è¡¨å…¶æ‰§è¡Œé¡ºåºã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * æŸ¥çœ‹å†å²
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span>
    <span class="token class-name">ProcessEngineConfiguration</span> cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandaloneProcessEngineConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setJdbcDriver</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setDatabaseSchemaUpdate</span><span class="token punctuation">(</span><span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token constant">DB_SCHEMA_UPDATE_TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span>
    <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> cfg<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// è·å–å†å²æœåŠ¡</span>
    <span class="token class-name">HistoryService</span> historyService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getHistoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–å†å²æ´»åŠ¨å®ä¾‹</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HistoricActivityInstance</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> historyService<span class="token punctuation">.</span><span class="token function">createHistoricActivityInstanceQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">processDefinitionId</span><span class="token punctuation">(</span><span class="token string">&quot;holidayRequestNew:1:10003&quot;</span><span class="token punctuation">)</span>	<span class="token comment">// å®šä¹‰æµç¨‹ID</span>
            <span class="token punctuation">.</span><span class="token function">finished</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// æŸ¥è¯¢çš„å†å²è®°å½•çš„çŠ¶æ€æ˜¯å·²ç»å®Œæˆ</span>
            <span class="token punctuation">.</span><span class="token function">orderByHistoricActivityInstanceEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// æŒ‡å®šæ’åºçš„å­—æ®µå’Œé¡ºåºï¼ˆè¿™é‡Œæ˜¯ç¤ºä¾‹ç»“æŸæ—¶é—´å‡åºï¼‰</span>
            <span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// å¾—åˆ°é›†åˆ</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HistoricActivityInstance</span> historicActivityInstance <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>historicActivityInstance<span class="token punctuation">.</span><span class="token function">getActivityId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; took &quot;</span>
                <span class="token operator">+</span> historicActivityInstance<span class="token punctuation">.</span><span class="token function">getDurationInMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; milliseconds&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœ</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>startEvent took 1 milliseconds
approveTask took 837735 milliseconds
decision took 13 milliseconds
sendRejectionMail took 2 milliseconds
rejectEnd took 1 milliseconds
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¥½äº†~flowable çš„åŸºæœ¬åº”ç”¨æˆ‘ä»¬å°±å…ˆä»‹ç»åˆ°è¿™é‡Œäº†ã€‚</p><h1 id="ä¸‰ã€flowable-æµç¨‹è®¾è®¡å™¨" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€flowable-æµç¨‹è®¾è®¡å™¨" aria-hidden="true">#</a> ä¸‰ã€Flowable æµç¨‹è®¾è®¡å™¨</h1><h2 id="_1-eclipse-designer" tabindex="-1"><a class="header-anchor" href="#_1-eclipse-designer" aria-hidden="true">#</a> 1.Eclipse Designer</h2><p>â€ƒâ€ƒFlowable æä¾›äº†åä¸º Flowable Eclipse Designer çš„ Eclipse æ’ä»¶ï¼Œå¯ä»¥ç”¨äºå›¾å½¢åŒ–åœ°å»ºæ¨¡ã€æµ‹è¯•ä¸éƒ¨ç½² BPMN 2.0 æµç¨‹ã€‚</p><h3 id="_1-1-ä¸‹è½½å®‰è£…-eclipse" tabindex="-1"><a class="header-anchor" href="#_1-1-ä¸‹è½½å®‰è£…-eclipse" aria-hidden="true">#</a> 1.1 ä¸‹è½½å®‰è£… Eclipse</h3><p>â€ƒâ€ƒå» Eclipse å®˜ç½‘ä¸‹è½½å³å¯ï¼šhttps://www.eclipse.org/downloads/packages/release æ³¨æ„ 2020-09 åçš„ç‰ˆæœ¬ä¸å†æ”¯æŒ jdk8</p><p><img src="`+S+'" alt="image-20220316202904261"></p><p>â€ƒè§£å‹ç¼©å°±å¯ä»¥äº†ï¼Œç„¶åè¿›å…¥è§£å‹ç¼©çš„ç›®å½•</p><p><img src="'+D+'" alt="image-20220316203036602"></p><p>â€ƒâ€ƒç›´æ¥å¯åŠ¨å³å¯</p><p><img src="'+w+'" alt="image-20220316203111301"></p><p><img src="'+R+'" alt="image-20220316203237316"></p><h3 id="_1-2-å®‰è£…-flowable-æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-2-å®‰è£…-flowable-æ’ä»¶" aria-hidden="true">#</a> 1.2 å®‰è£… Flowable æ’ä»¶</h3><p>â€ƒâ€ƒç„¶åæˆ‘ä»¬å†å®‰è£…ä¸‹ Flowable çš„æ’ä»¶ï¼Œé€‰æ‹©<strong>Help â†’ Install New Software</strong>ã€‚åœ¨ä¸‹å›¾é¢æ¿ä¸­ï¼Œç‚¹å‡»<em>Add</em>æŒ‰é’®ï¼Œå¹¶å¡«å†™ä¸‹åˆ—å­—æ®µ</p><ul><li><strong>Name:</strong> Flowable BPMN 2.0 designer</li><li><strong>Location:</strong> http://www.flowable.org/designer/update/</li></ul><p><img src="'+P+'" alt="image-20220316203454281"></p><p>â€ƒâ€ƒè¿™ç§åœ¨çº¿æ›´æ–°çš„æ–¹å¼å·²ç»è¢«å®˜ç½‘ç§»é™¤äº†ï¼Œæ“ä½œä¸äº†</p><p><img src="'+A+'" alt="image-20220316211319931"></p><p>â€ƒâ€ƒè¿™æ—¶æˆ‘ä»¬å°±åªèƒ½é€šè¿‡ç¦»çº¿å®‰è£…çš„æ–¹å¼æ¥å®ç°äº†ï¼Œä¸‹è½½å¯¹åº”çš„ç¦»çº¿æ–‡ä»¶</p><p><img src="'+C+'" alt="image-20220316211405001"></p><p>â€ƒâ€ƒå®‰è£…æ­¥éª¤æ¥æ“ä½œï¼Œ</p><p><img src="'+M+'" alt="image-20220316211518520"></p><p>ç„¶åç»§ç»­ï¼šé€‰æ‹©<strong>Help â†’ Install New Software</strong></p><p><img src="'+N+'" alt="image-20220316211622115"></p><p><img src="'+x+'" alt="image-20220316211651195"></p><p>ä¸‹ä¸€æ­¥</p><p><img src="'+B+'" alt="image-20220316211729581"></p><p>å†ä¸‹ä¸€æ­¥</p><p><img src="'+U+'" alt="image-20220316211802548"></p><p>ç„¶å finishã€‚å¼¹å‡ºå¦‚ä¸‹çª—å£</p><p><img src="'+j+'" alt="image-20220316212008477"></p><p>é‡å¯å³å¯</p><h3 id="_1-3-åˆ›å»ºé¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_1-3-åˆ›å»ºé¡¹ç›®" aria-hidden="true">#</a> 1.3 åˆ›å»ºé¡¹ç›®</h3><p>â€ƒâ€ƒç„¶åæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸€ä¸ª Flowable Project äº†</p><p><img src="'+O+'" alt="image-20220316212418899"></p><p>â€ƒâ€ƒç„¶åæˆ‘ä»¬å¯ä»¥åœ¨ src/mian/resources/ çš„ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„æµç¨‹å›¾äº†</p><p><img src="'+F+'" alt="image-20220316212605146"></p><p>â€ƒâ€ƒçœ‹åˆ°å¦‚ä¸‹çš„ç•Œé¢è¯´æ˜æ’ä»¶å®‰è£…æˆåŠŸäº†</p><p><img src="'+L+'" alt="image-20220316212720767"></p><h3 id="_1-4-åˆ›å»ºæµç¨‹å›¾" tabindex="-1"><a class="header-anchor" href="#_1-4-åˆ›å»ºæµç¨‹å›¾" aria-hidden="true">#</a> 1.4 åˆ›å»ºæµç¨‹å›¾</h3><p>ä½¿ç”¨æ»‘æ¿æ¥ç»˜åˆ¶æµç¨‹ï¼Œé€šè¿‡ä»å³ä¾§æŠŠå›¾æ ‡æ‹–æ‹½åˆ°å·¦ä¾§çš„é¢æ¿ï¼Œæœ€ç»ˆçš„æ•ˆæœ</p><p><img src="'+H+'" alt="image-20220316214339678"></p><p>æŒ‡ å®šæµç¨‹çš„ä¸»é”®</p><p><img src="'+J+'" alt="image-20220316214430644"></p><p>æŒ‡å®šä»»åŠ¡çš„è´Ÿè´£äºº</p><p>åœ¨ Properties è§†å›¾ä¸­æŒ‡å®šæ¯ä¸ªä»»åŠ¡èŠ‚ç‚¹çš„è´Ÿè´£äºº</p><p><img src="'+Y+'" alt="image-20220316214700887"></p><p>åˆ›å»ºè¯·å‡å•ï¼šzhangsan</p><p>å®¡æ‰¹è¯·å‡å•ï¼šlisi</p><p>å½“æˆ‘ä»¬è®¾ç½®å®Œæˆåä¿å­˜æ–‡ä»¶ï¼Œä¼šåŒæ—¶ç”Ÿæˆ png å›¾ç‰‡</p><p><img src="'+K+'" alt="image-20220316214808400"></p><p>æ³¨æ„ï¼šç”Ÿæˆå›¾ç‰‡éœ€è¦å¦‚ä¸‹é…ç½®</p><p><img src="'+X+'" alt="image-20220316214256235"></p><h3 id="_1-5-éƒ¨ç½²æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-5-éƒ¨ç½²æµç¨‹" aria-hidden="true">#</a> 1.5 éƒ¨ç½²æµç¨‹</h3><p>â€ƒâ€ƒé¦–å…ˆåœ¨ Eclipse ä¸­ç”Ÿæˆ bar æ–‡ä»¶ï¼Œé€‰ä¸­é¡¹ç›®ç„¶åé¼ æ ‡å³å‡»</p><p><img src="'+V+'" alt="image-20220316215805503"></p><p>ç„¶åä¼šå‘ç°åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ª deployment æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å¤šäº†ä¸€ä¸ª MyProcess.bar æ–‡ä»¶</p><p><img src="'+G+'" alt="image-20220316215900052"></p><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™ä¸ª bar æ–‡ä»¶æ‹·è´åˆ° IDEA ä¸­ï¼Œç»§ç»­éƒ¨ç½²çš„æµç¨‹</p><p><img src="'+z+`" alt="image-20220316215945236"></p><p>è€Œéƒ¨ç½²çš„ä»£ç å’Œå‰é¢æ²¡å•¥åŒºåˆ«</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 1.è·å– ProcessEngine å¯¹è±¡</span>
        <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2.è·å–RepositoryService</span>
        <span class="token class-name">RepositoryService</span> repositoryService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRepositoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> in <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;MyHoliday.bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ZipInputStream</span> zipInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZipInputStream</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3.å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ ZIP æˆ–è€… Baræ–‡ä»¶</span>
        <span class="token class-name">Deployment</span> deploy <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">createDeployment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
               <span class="token comment">// .addClasspathResource(&quot;MyHoliday.bar&quot;)// å…³è”è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶</span>
                <span class="token punctuation">.</span><span class="token function">addZipInputStream</span><span class="token punctuation">(</span>zipInputStream<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;XXXå…¬å¸è¯·æ±‚æµç¨‹&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment">// éƒ¨ç½²æµç¨‹</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deploy.getId() = &quot;</span> <span class="token operator">+</span> deploy<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deploy.getName() = &quot;</span> <span class="token operator">+</span> deploy<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡ŒåæŸ¥çœ‹è¡¨ç»“æ„ï¼Œç›¸å…³çš„ä¿¡æ¯å°±è¿›å»äº†</p><p><img src="`+Q+`" alt="image-20220316220121734"></p><p>å®Œæ•´çš„æ¡ˆä¾‹ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>bobo<span class="token punctuation">.</span>flowable<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>flowable<span class="token punctuation">.</span>engine<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>flowable<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>history<span class="token punctuation">.</span></span><span class="token class-name">HistoricActivityInstance</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>flowable<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>cfg<span class="token punctuation">.</span></span><span class="token class-name">StandaloneProcessEngineConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>flowable<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>repository<span class="token punctuation">.</span></span><span class="token class-name">Deployment</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>flowable<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span></span><span class="token class-name">ProcessInstance</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>flowable<span class="token punctuation">.</span>task<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Task</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Before</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>zip<span class="token punctuation">.</span></span><span class="token class-name">ZipInputStream</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test02</span> <span class="token punctuation">{</span>

    <span class="token class-name">ProcessEngineConfiguration</span> configuration <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// è·å–  ProcessEngineConfiguration å¯¹è±¡</span>
        configuration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandaloneProcessEngineConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// é…ç½® ç›¸å…³çš„æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯</span>
        configuration<span class="token punctuation">.</span><span class="token function">setJdbcDriver</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configuration<span class="token punctuation">.</span><span class="token function">setJdbcUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configuration<span class="token punctuation">.</span><span class="token function">setJdbcPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configuration<span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/flowable-learn?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å¦‚æœæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ä¸å­˜åœ¨å°±æ–°å»º</span>
        configuration<span class="token punctuation">.</span><span class="token function">setDatabaseSchemaUpdate</span><span class="token punctuation">(</span><span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token constant">DB_SCHEMA_UPDATE_TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * éƒ¨ç½²æµç¨‹
     *
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 1.è·å– ProcessEngine å¯¹è±¡</span>
        <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2.è·å–RepositoryService</span>
        <span class="token class-name">RepositoryService</span> repositoryService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRepositoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> in <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;MyHoliday.bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ZipInputStream</span> zipInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZipInputStream</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3.å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ ZIP æˆ–è€… Baræ–‡ä»¶</span>
        <span class="token class-name">Deployment</span> deploy <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">createDeployment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
               <span class="token comment">// .addClasspathResource(&quot;MyHoliday.bar&quot;)// å…³è”è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶</span>
                <span class="token punctuation">.</span><span class="token function">addZipInputStream</span><span class="token punctuation">(</span>zipInputStream<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;XXXå…¬å¸è¯·æ±‚æµç¨‹&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment">// éƒ¨ç½²æµç¨‹</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deploy.getId() = &quot;</span> <span class="token operator">+</span> deploy<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deploy.getName() = &quot;</span> <span class="token operator">+</span> deploy<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * å¯åŠ¨æµç¨‹å®ä¾‹
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testRunProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// æˆ‘ä»¬éœ€è¦é€šè¿‡RuntimeServiceæ¥å¯åŠ¨æµç¨‹å®ä¾‹</span>
        <span class="token class-name">RuntimeService</span> runtimeService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRuntimeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å¯åŠ¨æµç¨‹å®ä¾‹</span>
        <span class="token class-name">ProcessInstance</span> holidayRequest <span class="token operator">=</span> runtimeService<span class="token punctuation">.</span><span class="token function">startProcessInstanceById</span><span class="token punctuation">(</span><span class="token string">&quot;myProcess:1:25004&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;holidayRequest.getProcessDefinitionId() = &quot;</span> <span class="token operator">+</span> holidayRequest<span class="token punctuation">.</span><span class="token function">getProcessDefinitionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;holidayRequest.getActivityId() = &quot;</span> <span class="token operator">+</span> holidayRequest<span class="token punctuation">.</span><span class="token function">getActivityId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;holidayRequest.getId() = &quot;</span> <span class="token operator">+</span> holidayRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * æµ‹è¯•ä»»åŠ¡æŸ¥è¯¢
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TaskService</span> taskService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getTaskService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Task</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> taskService<span class="token punctuation">.</span><span class="token function">createTaskQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">processDefinitionKey</span><span class="token punctuation">(</span><span class="token string">&quot;myProcess&quot;</span><span class="token punctuation">)</span> <span class="token comment">// æŒ‡å®šæŸ¥è¯¢çš„æµç¨‹ç¼–ç¨‹</span>
                <span class="token punctuation">.</span><span class="token function">taskAssignee</span><span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span> <span class="token comment">// æŸ¥è¯¢è¿™ä¸ªä»»åŠ¡çš„å¤„ç†äºº</span>
                <span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Task</span> task <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;task.getProcessDefinitionId() = &quot;</span> <span class="token operator">+</span> task<span class="token punctuation">.</span><span class="token function">getProcessDefinitionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;task.getName() = &quot;</span> <span class="token operator">+</span> task<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;task.getAssignee() = &quot;</span> <span class="token operator">+</span> task<span class="token punctuation">.</span><span class="token function">getAssignee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;task.getDescription() = &quot;</span> <span class="token operator">+</span> task<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;task.getId() = &quot;</span> <span class="token operator">+</span> task<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * å®Œæˆå½“å‰ä»»åŠ¡
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCompleteTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TaskService</span> taskService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getTaskService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Task</span> task <span class="token operator">=</span> taskService<span class="token punctuation">.</span><span class="token function">createTaskQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">processDefinitionKey</span><span class="token punctuation">(</span><span class="token string">&quot;myProcess&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">taskAssignee</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">singleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ›å»ºæµç¨‹å˜é‡</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>task <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// å®Œæˆä»»åŠ¡</span>
            taskService<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span>task<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * è·å–æµç¨‹ä»»åŠ¡çš„å†å²æ•°æ®
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HistoryService</span> historyService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getHistoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HistoricActivityInstance</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> historyService<span class="token punctuation">.</span><span class="token function">createHistoricActivityInstanceQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">processDefinitionId</span><span class="token punctuation">(</span><span class="token string">&quot;myProcess:1:25004&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">finished</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æŸ¥è¯¢çš„å†å²è®°å½•çš„çŠ¶æ€æ˜¯å·²ç»å®Œæˆ</span>
                <span class="token punctuation">.</span><span class="token function">orderByHistoricActivityInstanceEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æŒ‡å®šæ’åºçš„å­—æ®µå’Œé¡ºåº</span>
                <span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HistoricActivityInstance</span> history <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>history<span class="token punctuation">.</span><span class="token function">getActivityName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;:&quot;</span><span class="token operator">+</span>history<span class="token punctuation">.</span><span class="token function">getAssignee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;--&quot;</span>
                    <span class="token operator">+</span>history<span class="token punctuation">.</span><span class="token function">getActivityId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> history<span class="token punctuation">.</span><span class="token function">getDurationInMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;æ¯«ç§’&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-flowable-ui-åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-flowable-ui-åº”ç”¨" aria-hidden="true">#</a> 2.Flowable UI åº”ç”¨</h2><p>â€ƒâ€ƒFlowable æä¾›äº†å‡ ä¸ª web åº”ç”¨ï¼Œç”¨äºæ¼”ç¤ºåŠä»‹ç» Flowable é¡¹ç›®æä¾›çš„åŠŸèƒ½ï¼š</p><ul><li>Flowable IDM: èº«ä»½ç®¡ç†åº”ç”¨ã€‚ä¸ºæ‰€æœ‰ Flowable UI åº”ç”¨æä¾›å•ç‚¹ç™»å½•è®¤è¯åŠŸèƒ½ï¼Œå¹¶ä¸”ä¸ºæ‹¥æœ‰ IDM ç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·æä¾›äº†ç®¡ç†ç”¨æˆ·ã€ç»„ä¸æƒé™çš„åŠŸèƒ½ã€‚</li><li>Flowable Modeler: è®©å…·æœ‰å»ºæ¨¡æƒé™çš„ç”¨æˆ·å¯ä»¥åˆ›å»ºæµç¨‹æ¨¡å‹ã€è¡¨å•ã€é€‰æ‹©è¡¨ä¸åº”ç”¨å®šä¹‰ã€‚</li><li>Flowable Task: è¿è¡Œæ—¶ä»»åŠ¡åº”ç”¨ã€‚æä¾›äº†å¯åŠ¨æµç¨‹å®ä¾‹ã€ç¼–è¾‘ä»»åŠ¡è¡¨å•ã€å®Œæˆä»»åŠ¡ï¼Œä»¥åŠæŸ¥è¯¢æµç¨‹å®ä¾‹ä¸ä»»åŠ¡çš„åŠŸèƒ½ã€‚</li><li>Flowable Admin: ç®¡ç†åº”ç”¨ã€‚è®©å…·æœ‰ç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ BPMNã€DMNã€Form åŠ Content å¼•æ“ï¼Œå¹¶æä¾›äº†è®¸å¤šé€‰é¡¹ç”¨äºä¿®æ”¹æµç¨‹å®ä¾‹ã€ä»»åŠ¡ã€ä½œä¸šç­‰ã€‚ç®¡ç†åº”ç”¨é€šè¿‡ REST API è¿æ¥è‡³å¼•æ“ï¼Œå¹¶ä¸ Flowable Task åº”ç”¨åŠ Flowable REST åº”ç”¨ä¸€åŒéƒ¨ç½²ã€‚</li></ul><p>â€ƒâ€ƒæ‰€æœ‰å…¶ä»–çš„åº”ç”¨éƒ½éœ€è¦ Flowable IDM æä¾›è®¤è¯ã€‚æ¯ä¸ªåº”ç”¨çš„ WAR æ–‡ä»¶å¯ä»¥éƒ¨ç½²åœ¨ç›¸åŒçš„ servlet å®¹å™¨ï¼ˆå¦‚ Apache Tomcatï¼‰ä¸­ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„å®¹å™¨ä¸­ã€‚ç”±äºæ¯ä¸ªåº”ç”¨ä½¿ç”¨ç›¸åŒçš„ cookie è¿›è¡Œè®¤è¯ï¼Œå› æ­¤åº”ç”¨éœ€è¦è¿è¡Œåœ¨ç›¸åŒçš„åŸŸåä¸‹ã€‚</p><h3 id="_2-1-å®‰è£…éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#_2-1-å®‰è£…éƒ¨ç½²" aria-hidden="true">#</a> 2.1 å®‰è£…éƒ¨ç½²</h3><p>ä¸‹è½½ Tomcatï¼šhttps://tomcat.apache.org/download-80.cgi å®˜ç½‘ä¸‹è½½åè§£å‹ç¼©åˆ°éä¸­æ–‡ç›®å½•å³å¯ï¼Œç„¶åæ˜¯ä¸‹è½½ FlowableUI çš„æ–‡ä»¶ï¼Œåœ¨ Flowable6.6 ä¹‹åæŠŠ FlowableUI ä¸­æä¾›çš„å››ä¸ªåŠŸèƒ½åˆå¹¶åˆ°äº†ä¸€èµ·ã€‚</p><p><img src="`+Z+'" alt="image-20220318102128672"></p><p>ç„¶åæŠŠè§£å‹ç¼©åçš„ä¸¤ä¸ª war åŒ…æ‹·è´åˆ° Tomcat çš„è§£å‹ç¼©çš„ webapps ç›®å½•ä¸‹</p><p><img src="'+W+'" alt="image-20220318102224330"></p><p>Tomcat ç›®å½•ï¼š</p><p><img src="'+$+'" alt="image-20220318102255188"></p><h3 id="_2-2-å¯åŠ¨æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_2-2-å¯åŠ¨æœåŠ¡" aria-hidden="true">#</a> 2.2 å¯åŠ¨æœåŠ¡</h3><p>â€ƒâ€ƒå¯åŠ¨ Tomcat æœåŠ¡ï¼Œæ‰§è¡Œ startup.bat æ–‡ä»¶</p><p><img src="'+nn+'" alt="image-20220318102325924"></p><p>å¦‚æœå¯åŠ¨ä¸­å‡ºç°ä¹±ç ä¿®æ”¹ Tomcat çš„ conf ç›®å½•ä¸‹çš„ logging.properties æ–‡ä»¶ä¸­çš„ç¼–ç </p><p><img src="'+sn+'" alt="image-20220318102446699"></p><p>å¦‚æœä¸€é—ªè€Œè¿‡åˆ™æ£€æŸ¥ jdk çš„ç¯å¢ƒå˜é‡é…ç½®ã€‚å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® http://localhost:8080/flowable-ui, é»˜è®¤çš„è´¦å·å¯†ç æ˜¯ admin/test</p><p><img src="'+an+'" alt="image-20220318102609807"></p><h3 id="_2-3-ç”¨æˆ·ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_2-3-ç”¨æˆ·ç®¡ç†" aria-hidden="true">#</a> 2.3 ç”¨æˆ·ç®¡ç†</h3><p>â€ƒâ€ƒæˆ‘ä»¬å…ˆåœ¨ <code>èº«ä»½ç®¡ç†åº”ç”¨ç¨‹åº</code> ä¸­åˆ›å»ºç”¨æˆ·å¹¶æˆæƒ</p><p><img src="'+tn+'" alt="image-20220318102707368"></p><p>åˆ›å»ºç”¨æˆ·</p><p><img src="'+pn+'" alt="image-20220318102734238"></p><p>å¡«å†™è¯¦ç»†ä¿¡æ¯</p><p><img src="'+en+'" alt="image-20220318102817782"></p><p>æˆæƒç®¡ç†</p><p><img src="'+on+'" alt="image-20220318102859814"></p><h3 id="_2-4-ç»˜åˆ¶æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_2-4-ç»˜åˆ¶æµç¨‹" aria-hidden="true">#</a> 2.4 ç»˜åˆ¶æµç¨‹</h3><p>åˆ›å»ºæ–°çš„æµç¨‹</p><p><img src="'+cn+'" alt="image-20220318101239742"></p><p>æµç¨‹å›¾ç•Œé¢</p><p><img src="'+ln+'" alt="image-20220318101346692"></p><p>åˆ›å»ºæµç¨‹ï¼Œåˆ†é…å¤„ç†äºº</p><p><img src="'+un+'" alt="image-20220318101639424"></p><p><img src="'+rn+'" alt="image-20220318101611564"></p><p>ç»§ç»­å®Œæˆæµç¨‹å›¾çš„åˆ›å»º</p><p><img src="'+dn+'" alt="image-20220318101810272"></p><h3 id="_2-5-éƒ¨ç½²æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_2-5-éƒ¨ç½²æµç¨‹" aria-hidden="true">#</a> 2.5 éƒ¨ç½²æµç¨‹</h3><p>â€ƒâ€ƒç»˜åˆ¶å¥½çš„æµç¨‹å›¾ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€é”®å¯¼å‡ºå³å¯</p><p><img src="'+kn+'" alt="image-20220318103413285"></p><p>ä¸‹è½½ä¸‹æ¥åæ‹·è´åˆ°é¡¹ç›®çš„ resource ç›®å½•ä¸‹å³å¯</p><p><img src="'+mn+'" alt="image-20220318103518807"></p><p>ç„¶åå°±æ˜¯æ­£å¸¸çš„æ“ä½œæµç¨‹äº†</p><p><code>éƒ¨ç½²æµç¨‹</code>--<code>æŸ¥è¯¢æµç¨‹å®šä¹‰çš„ä¿¡æ¯</code>--<code>åˆ é™¤æµç¨‹å®šä¹‰</code>--<code>å¯åŠ¨æµç¨‹å®ä¾‹</code>--<code>ä»»åŠ¡æŸ¥è¯¢</code>--<code>å®Œæˆå½“å‰ä»»åŠ¡</code>--<code>è·å–æµç¨‹ä»»åŠ¡çš„å†å²æ•°æ®</code>ç­‰ç­‰ï¼ˆé¡¹ç›®ä¸­çš„ Test03ï¼‰</p><h3 id="_2-6-flowableui-æ¼”ç¤º" tabindex="-1"><a class="header-anchor" href="#_2-6-flowableui-æ¼”ç¤º" aria-hidden="true">#</a> 2.6 FlowableUI æ¼”ç¤º</h3><h4 id="_2-6-1-éƒ¨ç½²æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_2-6-1-éƒ¨ç½²æµç¨‹" aria-hidden="true">#</a> 2.6.1 éƒ¨ç½²æµç¨‹</h4><p>â€ƒâ€ƒåœ¨ FlowableUI ä¸­æä¾›äº†æ¼”ç¤ºç¨‹åº <code>è¯¥åŠŸèƒ½å¯ä»¥æ–¹ä¾¿çš„æ›´ç›´è§‚çš„çœ‹åˆ°ç¨‹åºçš„è¿è½¬æµç¨‹</code></p><p><img src="'+vn+'" alt="image-20220318104517967"></p><p>åˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºï¼Œå¹¶æŒ‡å®šç›¸å…³çš„ä¿¡æ¯</p><p><img src="'+gn+'" alt="image-20220318104614784"></p><p>åˆ›å»ºåº”ç”¨åéœ€è¦æŒ‡å®šå¯¹åº”çš„æµç¨‹å›¾</p><p><img src="'+bn+'" alt="image-20220318104703306"></p><p><img src="'+fn+'" alt="image-20220318104735714"></p><p><img src="'+_n+'" alt="image-20220318104811812"></p><p>å‘å¸ƒåº”ç”¨ç¨‹åº</p><p><img src="'+yn+'" alt="image-20220318105045345"></p><h4 id="_2-6-2-å¯åŠ¨æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_2-6-2-å¯åŠ¨æµç¨‹" aria-hidden="true">#</a> 2.6.2 å¯åŠ¨æµç¨‹</h4><p>â€ƒâ€ƒå‘å¸ƒäº†åº”ç”¨ç¨‹åºåæˆ‘ä»¬å°±å¯ä»¥æ¥å¯åŠ¨æµç¨‹äº†</p><p><img src="'+hn+'" alt="image-20220318105258331"></p><p><img src="'+qn+'" alt="image-20220318105315908"></p><p><img src="'+En+'" alt="image-20220318105336107"></p><p><img src="'+In+'" alt="image-20220318105420011"></p><p>ç‚¹å‡»æ˜¾ç¤ºå›¾ï¼š</p><p><img src="'+Tn+'" alt="image-20220318105444672"></p><p>ä¹Ÿå°±æ˜¯å¯ä»¥çœ‹åˆ°å½“å‰æ˜¯ user1 æ¥å¤„ç†ï¼Œuser1 ç™»å½•åå¯ä»¥çœ‹åˆ°è¦å¤„ç†çš„æµç¨‹ï¼Œuser2 ç™»å½•æ˜¯çœ‹ä¸åˆ°çš„ã€‚</p><p><img src="'+Sn+'" alt="image-20220318105646273"></p><p>ç‚¹å‡»å®Œæˆå<code>æµç¨‹</code>å°±å‘ä¸‹ä¸€æ­¥æµè½¬äº†</p><p><img src="'+Dn+'" alt="image-20220318105727192"></p><p>è¿™æ—¶å†é€šè¿‡ user2 ç™»å½•ï¼Œå°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ä»£åŠçš„ä¿¡æ¯</p><p><img src="'+wn+'" alt="image-20220318105808830"></p><p><img src="'+Rn+`" alt="image-20220318105848185"></p><p>ç„¶åç‚¹å‡»å®Œæˆï¼Œé‚£ä¹ˆæ•´ä¸ªæµç¨‹å°±ç»“æŸäº†</p><h1 id="å››ã€flowable-è¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#å››ã€flowable-è¿›é˜¶" aria-hidden="true">#</a> å››ã€Flowable è¿›é˜¶</h1><h2 id="_1-è¡¨ç»“æ„è®²è§£" tabindex="-1"><a class="header-anchor" href="#_1-è¡¨ç»“æ„è®²è§£" aria-hidden="true">#</a> 1.è¡¨ç»“æ„è®²è§£</h2><p>â€ƒâ€ƒå·¥ä½œæµç¨‹çš„ç›¸å…³æ“ä½œéƒ½æ˜¯æ“ä½œå­˜å‚¨åœ¨å¯¹åº”çš„è¡¨ç»“æ„ä¸­ï¼Œä¸ºäº†èƒ½æ›´å¥½çš„å¼„æ¸…æ¥š Flowable çš„å®ç°åŸç†å’Œç»†èŠ‚ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆå¼„æ¸…æ¥š Flowable çš„ç›¸å…³è¡¨ç»“æ„åŠå…¶ä½œç”¨ã€‚åœ¨ Flowable ä¸­çš„è¡¨ç»“æ„åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šåˆ›å»ºäº”ç±»è¡¨ç»“æ„ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><ul><li><strong>ACT_RE</strong> ï¼š&#39;RE&#39;è¡¨ç¤º repositoryã€‚ è¿™ä¸ªå‰ç¼€çš„è¡¨åŒ…å«äº†æµç¨‹å®šä¹‰å’Œæµç¨‹é™æ€èµ„æº ï¼ˆå›¾ç‰‡ï¼Œè§„åˆ™ï¼Œç­‰ç­‰ï¼‰ã€‚</li><li><strong>ACT_RU</strong>ï¼š&#39;RU&#39;è¡¨ç¤º runtimeã€‚ è¿™äº›è¿è¡Œæ—¶çš„è¡¨ï¼ŒåŒ…å«æµç¨‹å®ä¾‹ï¼Œä»»åŠ¡ï¼Œå˜é‡ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œç­‰è¿è¡Œä¸­çš„æ•°æ®ã€‚ Flowable åªåœ¨æµç¨‹å®ä¾‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¿å­˜è¿™äº›æ•°æ®ï¼Œ åœ¨æµç¨‹ç»“æŸæ—¶å°±ä¼šåˆ é™¤è¿™äº›è®°å½•ã€‚ è¿™æ ·è¿è¡Œæ—¶è¡¨å¯ä»¥ä¸€ç›´å¾ˆå°é€Ÿåº¦å¾ˆå¿«ã€‚</li><li><strong>ACT_HI</strong>ï¼š&#39;HI&#39;è¡¨ç¤º historyã€‚ è¿™äº›è¡¨åŒ…å«å†å²æ•°æ®ï¼Œæ¯”å¦‚å†å²æµç¨‹å®ä¾‹ï¼Œ å˜é‡ï¼Œä»»åŠ¡ç­‰ç­‰ã€‚</li><li><strong>ACT_GE</strong>ï¼š GE è¡¨ç¤º generalã€‚ é€šç”¨æ•°æ®ï¼Œ ç”¨äºä¸åŒåœºæ™¯ä¸‹</li><li><strong>ACT_ID:</strong> â€™IDâ€™è¡¨ç¤º identity(ç»„ç»‡æœºæ„)ã€‚è¿™äº›è¡¨åŒ…å«æ ‡è¯†çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·ï¼Œç”¨æˆ·ç»„ï¼Œç­‰ç­‰ã€‚</li></ul><p>å…·ä½“çš„è¡¨ç»“æ„çš„å«ä¹‰:</p><table><thead><tr><th><strong>è¡¨åˆ†ç±»</strong></th><th><strong>è¡¨å</strong></th><th><strong>è§£é‡Š</strong></th></tr></thead><tbody><tr><td>ä¸€èˆ¬æ•°æ®</td><td></td><td></td></tr><tr><td></td><td>[ACT_GE_BYTEARRAY]</td><td>é€šç”¨çš„æµç¨‹å®šä¹‰å’Œæµç¨‹èµ„æº</td></tr><tr><td></td><td>[ACT_GE_PROPERTY]</td><td>ç³»ç»Ÿç›¸å…³å±æ€§</td></tr><tr><td>æµç¨‹å†å²è®°å½•</td><td></td><td></td></tr><tr><td></td><td>[ACT_HI_ACTINST]</td><td>å†å²çš„æµç¨‹å®ä¾‹</td></tr><tr><td></td><td>[ACT_HI_ATTACHMENT]</td><td>å†å²çš„æµç¨‹é™„ä»¶</td></tr><tr><td></td><td>[ACT_HI_COMMENT]</td><td>å†å²çš„è¯´æ˜æ€§ä¿¡æ¯</td></tr><tr><td></td><td>[ACT_HI_DETAIL]</td><td>å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯</td></tr><tr><td></td><td>[ACT_HI_IDENTITYLINK]</td><td>å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»</td></tr><tr><td></td><td>[ACT_HI_PROCINST]</td><td>å†å²çš„æµç¨‹å®ä¾‹</td></tr><tr><td></td><td>[ACT_HI_TASKINST]</td><td>å†å²çš„ä»»åŠ¡å®ä¾‹</td></tr><tr><td></td><td>[ACT_HI_VARINST]</td><td>å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯</td></tr><tr><td>æµç¨‹å®šä¹‰è¡¨</td><td></td><td></td></tr><tr><td></td><td>[ACT_RE_DEPLOYMENT]</td><td>éƒ¨ç½²å•å…ƒä¿¡æ¯</td></tr><tr><td></td><td>[ACT_RE_MODEL]</td><td>æ¨¡å‹ä¿¡æ¯</td></tr><tr><td></td><td>[ACT_RE_PROCDEF]</td><td>å·²éƒ¨ç½²çš„æµç¨‹å®šä¹‰</td></tr><tr><td>è¿è¡Œå®ä¾‹è¡¨</td><td></td><td></td></tr><tr><td></td><td>[ACT_RU_EVENT_SUBSCR]</td><td>è¿è¡Œæ—¶äº‹ä»¶</td></tr><tr><td></td><td>[ACT_RU_EXECUTION]</td><td>è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹</td></tr><tr><td></td><td>[ACT_RU_IDENTITYLINK]</td><td>è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ï¼Œå­˜å‚¨ä»»åŠ¡èŠ‚ç‚¹ä¸å‚ä¸è€…çš„ç›¸å…³ä¿¡æ¯</td></tr><tr><td></td><td>[ACT_RU_JOB]</td><td>è¿è¡Œæ—¶ä½œä¸š</td></tr><tr><td></td><td>[ACT_RU_TASK]</td><td>è¿è¡Œæ—¶ä»»åŠ¡</td></tr><tr><td></td><td>[ACT_RU_VARIABLE]</td><td>è¿è¡Œæ—¶å˜é‡è¡¨</td></tr><tr><td>ç”¨æˆ·ç”¨æˆ·ç»„è¡¨</td><td></td><td></td></tr><tr><td></td><td>[ACT_ID_BYTEARRAY]</td><td>äºŒè¿›åˆ¶æ•°æ®è¡¨</td></tr><tr><td></td><td>[ACT_ID_GROUP]</td><td>ç”¨æˆ·ç»„ä¿¡æ¯è¡¨</td></tr><tr><td></td><td>[ACT_ID_INFO]</td><td>ç”¨æˆ·ä¿¡æ¯è¯¦æƒ…è¡¨</td></tr><tr><td></td><td>[ACT_ID_MEMBERSHIP]</td><td>äººä¸ç»„å…³ç³»è¡¨</td></tr><tr><td></td><td>[ACT_ID_PRIV]</td><td>æƒé™è¡¨</td></tr><tr><td></td><td>[ACT_ID_PRIV_MAPPING]</td><td>ç”¨æˆ·æˆ–ç»„æƒé™å…³ç³»è¡¨</td></tr><tr><td></td><td>[ACT_ID_PROPERTY]</td><td>å±æ€§è¡¨</td></tr><tr><td></td><td>[ACT_ID_TOKEN]</td><td>è®°å½•ç”¨æˆ·çš„ token ä¿¡æ¯</td></tr><tr><td></td><td>[ACT_ID_USER]</td><td>ç”¨æˆ·è¡¨</td></tr></tbody></table><h2 id="_2-processengine-è®²è§£-processenginetest" tabindex="-1"><a class="header-anchor" href="#_2-processengine-è®²è§£-processenginetest" aria-hidden="true">#</a> 2.ProcessEngine è®²è§£ï¼ˆProcessEngineTestï¼‰</h2><p><strong>åˆå§‹åŒ–æ–¹å¼</strong></p><h3 id="_2-1-ç¡¬ç¼–ç çš„æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_2-1-ç¡¬ç¼–ç çš„æ–¹å¼" aria-hidden="true">#</a> 2.1 ç¡¬ç¼–ç çš„æ–¹å¼</h3><p>â€ƒâ€ƒæˆ‘ä»¬å‰é¢è®²è§£æ¡ˆä¾‹çš„æ—¶å€™æ˜¯é€šè¿‡ ProcessEngineConfiguration è¿™ä¸ªé…ç½®ç±»æ¥åŠ è½½çš„ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span>
<span class="token class-name">ProcessEngineConfiguration</span> cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandaloneProcessEngineConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setJdbcUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setJdbcPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setJdbcDriver</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setDatabaseSchemaUpdate</span><span class="token punctuation">(</span><span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token constant">DB_SCHEMA_UPDATE_TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span>
<span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> cfg<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€ƒâ€ƒè¿™ç§æ–¹å¼ä¼šè°ƒç”¨ buildProcessEngine()æ–¹æ³•ï¼Œé‡Œé¢çš„æ ¸å¿ƒä»£ç ä¸ºï¼š</p><p><img src="`+Pn+'" alt="image-20220319113106848"></p><p><img src="'+An+`" alt="image-20220319113139646"></p><h3 id="_2-2-é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-2-é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 2.2 é…ç½®æ–‡ä»¶</h3><p>â€ƒâ€ƒé™¤äº†ä¸Šé¢çš„ç¡¬ç¼–ç çš„æ–¹å¼å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ resources ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>flowable.cfg.xml</code>æ–‡ä»¶ï¼Œæ³¨æ„è¿™ä¸ªåç§°æ˜¯å›ºå®šçš„å“¦ã€‚å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>processEngineConfiguration<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.flowable.engine.impl.cfg.StandaloneProcessEngineConfiguration<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/flow1?allowMultiQueries=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=UTF-8<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useSSL=false<span class="token entity named-entity" title="&amp;">&amp;amp;</span>serverTimezone=UTC<span class="token entity named-entity" title="&amp;">&amp;amp;</span>nullCatalogMeansCurrent=true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcDriver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUsername<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcPassword<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123456<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>databaseSchemaUpdate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>asyncExecutorActivate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€ƒâ€ƒåœ¨ä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®ç›¸å…³çš„ä¿¡æ¯ã€‚æˆ‘ä»¬åœ¨ Java ä»£ç ä¸­å°±å¯ä»¥ç®€åŒ–ä¸ºï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * åŠ è½½é»˜è®¤çš„é…ç½®æ–‡ä»¶
 * flowable.cfg.xmlï¼ˆå®˜æ–¹é»˜è®¤æ–‡ä»¶ï¼‰
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processEngin02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ProcessEngine</span> defaultProcessEngine <span class="token operator">=</span> <span class="token class-name">ProcessEngines</span><span class="token punctuation">.</span><span class="token function">getDefaultProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;defaultProcessEngine = &quot;</span> <span class="token operator">+</span> defaultProcessEngine<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€ƒâ€ƒå¯ä»¥çœ‹ä¸‹ getDefaultProcessEngine çš„æºç ï¼Œåœ¨é‡Œé¢æœ€ç»ˆè¿˜æ˜¯æ‰§è¡Œäº†å’Œç¡¬ç¼–ç ä¸€æ ·çš„ä»£ç </p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ProcessEngine</span> <span class="token function">getProcessEngine</span><span class="token punctuation">(</span><span class="token class-name">String</span> processEngineName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®Œæˆåˆå§‹åŒ–æ“ä½œ</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> processEngines<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>processEngineName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€ƒâ€ƒè¿›å…¥ init æ–¹æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>processEngines <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// Create new map to store process-engines if current map is null</span>
                processEngines <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">ReflectUtil</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span>URL<span class="token punctuation">&gt;</span></span> resources <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                resources <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token string">&quot;flowable.cfg.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŠ è½½flowable.cfg.xmlé…ç½®æ–‡ä»¶</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">FlowableIllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;problem retrieving flowable.cfg.xml resources on the classpath: &quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;java.class.path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Remove duplicated configuration URL&#39;s using set. Some</span>
            <span class="token comment">// classloaders may return identical URL&#39;s twice, causing duplicate</span>
            <span class="token comment">// startups</span>
            <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span>URL<span class="token punctuation">&gt;</span></span> configUrls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>resources<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                configUrls<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>resources<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span>URL<span class="token punctuation">&gt;</span></span> iterator <span class="token operator">=</span> configUrls<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">URL</span> resource <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Initializing process engine using configuration &#39;{}&#39;&quot;</span><span class="token punctuation">,</span> resource<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">initProcessEngineFromResource</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆå§‹åŒ–ProcessEngine</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                resources <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token string">&quot;flowable-context.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åœ¨æ•´åˆSpringçš„æƒ…å†µä¸‹åŠ è½½è¯¥æ–‡ä»¶</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">FlowableIllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;problem retrieving flowable-context.xml resources on the classpath: &quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;java.class.path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>resources<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">URL</span> resource <span class="token operator">=</span> resources<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Initializing process engine using Spring configuration &#39;{}&#39;&quot;</span><span class="token punctuation">,</span> resource<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">initProcessEngineFromSpringResource</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä»Springçš„èµ„æºæ–‡ä»¶ä¸­å®ŒæˆProcessEngineçš„åˆå§‹åŒ–</span>
            <span class="token punctuation">}</span>

            <span class="token function">setInitialized</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Process engines already initialized&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€ƒâ€ƒåœ¨æºç ä¸­æä¾›äº†å•ç‹¬ä½¿ç”¨å¥½æ•´åˆ Spring çš„é…ç½®åŠ è½½æ–¹å¼ã€‚å†è¿›å…¥åˆ° initProcessEngineFromResource(resource)æ–¹æ³•ä¸­ï¼š</p><p><img src="`+Cn+'" alt="image-20220319114011806"></p><p><img src="'+Mn+'" alt="image-20220319114053252"></p><p><img src="'+Nn+`" alt="image-20220319114210012"></p><p>è€Œä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ° ProcessEngine æœ€ç»ˆçš„å®ç°æ˜¯ ProcessEngineImpl å¯¹è±¡ã€‚</p><h3 id="_2-3-è‡ªå®šä¹‰é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-3-è‡ªå®šä¹‰é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 2.3 è‡ªå®šä¹‰é…ç½®æ–‡ä»¶</h3><p>â€ƒâ€ƒæœ€åæˆ‘ä»¬å¦‚æœè¦åŠ è½½è‡ªå®šä¹‰åç§°çš„é…ç½®æ–‡ä»¶å¯ä»¥é€šè¿‡ ProcessEngineConfiguration ä¸­çš„å¯¹åº”æ„é€ æ–¹æ³•æ¥å®ç°</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">ProcessEngineConfiguration</span> configuration <span class="token operator">=</span> <span class="token class-name">ProcessEngineConfiguration</span>
                <span class="token punctuation">.</span><span class="token function">createProcessEngineConfigurationFromResource</span><span class="token punctuation">(</span><span class="token string">&quot;flowable.cfg.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;processEngine = &quot;</span> <span class="token operator">+</span> processEngine<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-servcie-æœåŠ¡æ¥å£" tabindex="-1"><a class="header-anchor" href="#_3-servcie-æœåŠ¡æ¥å£" aria-hidden="true">#</a> 3. Servcie æœåŠ¡æ¥å£</h2><p>Service æ˜¯å·¥ä½œæµå¼•æ“æä¾›ç”¨äºè¿›è¡Œå·¥ä½œæµéƒ¨ç½²ã€æ‰§è¡Œã€ç®¡ç†çš„æœåŠ¡æ¥å£ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›æ¥å£å¯ä»¥å°±æ˜¯æ“ä½œæœåŠ¡å¯¹åº”çš„æ•°æ®è¡¨</p><p><img src="`+xn+`" alt="image-20220319223019186"></p><h3 id="_3-1-service-åˆ›å»ºæ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_3-1-service-åˆ›å»ºæ–¹å¼" aria-hidden="true">#</a> 3.1 Service åˆ›å»ºæ–¹å¼</h3><p>é€šè¿‡ ProcessEngine åˆ›å»º Service</p><p>æ–¹å¼å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">RuntimeService</span> runtimeService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRuntimeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">RepositoryService</span> repositoryService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRepositoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">TaskService</span> taskService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getTaskService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-service-æ€»è§ˆ" tabindex="-1"><a class="header-anchor" href="#_3-2-service-æ€»è§ˆ" aria-hidden="true">#</a> 3.2 Service æ€»è§ˆ</h3><table><thead><tr><th>service åç§°</th><th>service ä½œç”¨</th></tr></thead><tbody><tr><td>RepositoryService</td><td>Flowable çš„èµ„æºç®¡ç†ç±»</td></tr><tr><td>RuntimeService</td><td>Flowable çš„æµç¨‹è¿è¡Œç®¡ç†ç±»</td></tr><tr><td>TaskService</td><td>Flowable çš„ä»»åŠ¡ç®¡ç†ç±»</td></tr><tr><td>HistoryService</td><td>Flowable çš„å†å²ç®¡ç†ç±»</td></tr><tr><td>ManagerService</td><td>Flowable çš„å¼•æ“ç®¡ç†ç±»</td></tr></tbody></table><p>ç®€å•ä»‹ç»ï¼š</p><p><strong>RepositoryService</strong></p><p>æ˜¯ activiti çš„èµ„æºç®¡ç†ç±»ï¼Œæä¾›äº†ç®¡ç†å’Œæ§åˆ¶æµç¨‹å‘å¸ƒåŒ…å’Œæµç¨‹å®šä¹‰çš„æ“ä½œã€‚ä½¿ç”¨å·¥ä½œæµå»ºæ¨¡å·¥å…·è®¾è®¡çš„ä¸šåŠ¡æµç¨‹å›¾éœ€è¦ä½¿ç”¨æ­¤ service å°†æµç¨‹å®šä¹‰æ–‡ä»¶çš„å†…å®¹éƒ¨ç½²åˆ°è®¡ç®—æœºã€‚</p><p>é™¤äº†éƒ¨ç½²æµç¨‹å®šä¹‰ä»¥å¤–è¿˜å¯ä»¥ï¼šæŸ¥è¯¢å¼•æ“ä¸­çš„å‘å¸ƒåŒ…å’Œæµç¨‹å®šä¹‰ã€‚</p><p>æš‚åœæˆ–æ¿€æ´»å‘å¸ƒåŒ…ï¼Œå¯¹åº”å…¨éƒ¨å’Œç‰¹å®šæµç¨‹å®šä¹‰ã€‚ æš‚åœæ„å‘³ç€å®ƒä»¬ä¸èƒ½å†æ‰§è¡Œä»»ä½•æ“ä½œäº†ï¼Œæ¿€æ´»æ˜¯å¯¹åº”çš„åå‘æ“ä½œã€‚è·å¾—å¤šç§èµ„æºï¼Œåƒæ˜¯åŒ…å«åœ¨å‘å¸ƒåŒ…é‡Œçš„æ–‡ä»¶ï¼Œ æˆ–å¼•æ“è‡ªåŠ¨ç”Ÿæˆçš„æµç¨‹å›¾ã€‚</p><p>è·å¾—æµç¨‹å®šä¹‰çš„ pojo ç‰ˆæœ¬ï¼Œ å¯ä»¥ç”¨æ¥é€šè¿‡ java è§£ææµç¨‹ï¼Œè€Œä¸å¿…é€šè¿‡ xmlã€‚</p><p><strong>RuntimeService</strong></p><p>Activiti çš„æµç¨‹è¿è¡Œç®¡ç†ç±»ã€‚å¯ä»¥ä»è¿™ä¸ªæœåŠ¡ç±»ä¸­è·å–å¾ˆå¤šå…³äºæµç¨‹æ‰§è¡Œç›¸å…³çš„ä¿¡æ¯</p><p><strong>TaskService</strong></p><p>Activiti çš„ä»»åŠ¡ç®¡ç†ç±»ã€‚å¯ä»¥ä»è¿™ä¸ªç±»ä¸­è·å–ä»»åŠ¡çš„ä¿¡æ¯ã€‚</p><p><strong>HistoryService</strong></p><p>Flowable çš„å†å²ç®¡ç†ç±»ï¼Œå¯ä»¥æŸ¥è¯¢å†å²ä¿¡æ¯ï¼Œæ‰§è¡Œæµç¨‹æ—¶ï¼Œå¼•æ“ä¼šä¿å­˜å¾ˆå¤šæ•°æ®ï¼ˆæ ¹æ®é…ç½®ï¼‰ï¼Œæ¯”å¦‚æµç¨‹å®ä¾‹å¯åŠ¨æ—¶é—´ï¼Œä»»åŠ¡çš„å‚ä¸è€…ï¼Œ å®Œæˆä»»åŠ¡çš„æ—¶é—´ï¼Œæ¯ä¸ªæµç¨‹å®ä¾‹çš„æ‰§è¡Œè·¯å¾„ï¼Œç­‰ç­‰ã€‚ è¿™ä¸ªæœåŠ¡ä¸»è¦é€šè¿‡æŸ¥è¯¢åŠŸèƒ½æ¥è·å¾—è¿™äº›æ•°æ®ã€‚</p><p><strong>ManagementService</strong></p><p>Activiti çš„å¼•æ“ç®¡ç†ç±»ï¼Œæä¾›äº†å¯¹ Flowable æµç¨‹å¼•æ“çš„ç®¡ç†å’Œç»´æŠ¤åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä¸åœ¨å·¥ä½œæµé©±åŠ¨çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œä¸»è¦ç”¨äº Flowable ç³»ç»Ÿçš„æ—¥å¸¸ç»´æŠ¤ã€‚</p><h2 id="_4-å›¾æ ‡ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_4-å›¾æ ‡ä»‹ç»" aria-hidden="true">#</a> 4.å›¾æ ‡ä»‹ç»</h2><p>â€ƒâ€ƒBPMN 2.0 æ˜¯ä¸šåŠ¡æµç¨‹å»ºæ¨¡ç¬¦å· 2.0 çš„ç¼©å†™ã€‚å®ƒç”± Business Process Management Initiative è¿™ä¸ªéè¥åˆ©åä¼šåˆ›å»ºå¹¶ä¸æ–­å‘å±•ã€‚ä½œä¸ºä¸€ç§æ ‡è¯†ï¼ŒBPMN 2.0 æ˜¯ä½¿ç”¨ä¸€äº›<strong>ç¬¦å·</strong>æ¥æ˜ç¡®ä¸šåŠ¡æµç¨‹è®¾è®¡æµç¨‹å›¾çš„ä¸€æ•´å¥—ç¬¦å·è§„èŒƒï¼Œå®ƒèƒ½å¢è¿›ä¸šåŠ¡å»ºæ¨¡æ—¶çš„æ²Ÿé€šæ•ˆç‡ã€‚ç›®å‰ BPMN2.0 æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå®ƒç”¨äºåœ¨ BPM ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œå¸ƒå±€å’Œå¯è§†åŒ–çš„æ²Ÿé€šã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆæ¥äº†è§£åœ¨æµç¨‹è®¾è®¡ä¸­å¸¸è§çš„ ç¬¦å·ã€‚</p><p>BPMN2.0 çš„<strong>åŸºæœ¬ç¬¦åˆ</strong>ä¸»è¦åŒ…å«ï¼š</p><h3 id="_4-1-äº‹ä»¶å›¾æ ‡" tabindex="-1"><a class="header-anchor" href="#_4-1-äº‹ä»¶å›¾æ ‡" aria-hidden="true">#</a> 4.1 äº‹ä»¶å›¾æ ‡</h3><p>â€ƒâ€ƒåœ¨ Flowable ä¸­çš„äº‹ä»¶å›¾æ ‡å¯åŠ¨äº‹ä»¶ï¼Œè¾¹ç•Œäº‹ä»¶,ä¸­é—´äº‹ä»¶å’Œç»“æŸäº‹ä»¶.</p><p><img src="`+Bn+'" alt="image-20220320103803308"></p><h3 id="_4-2-æ´»åŠ¨-ä»»åŠ¡-å›¾æ ‡" tabindex="-1"><a class="header-anchor" href="#_4-2-æ´»åŠ¨-ä»»åŠ¡-å›¾æ ‡" aria-hidden="true">#</a> 4.2 æ´»åŠ¨(ä»»åŠ¡)å›¾æ ‡</h3><p>â€ƒâ€ƒæ´»åŠ¨æ˜¯å·¥ä½œæˆ–ä»»åŠ¡çš„ä¸€ä¸ªé€šç”¨æœ¯è¯­ã€‚ä¸€ä¸ªæ´»åŠ¨å¯ä»¥æ˜¯ä¸€ä¸ªä»»åŠ¡ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå½“å‰æµç¨‹çš„å­å¤„ç†æµç¨‹ï¼› å…¶æ¬¡ï¼Œä½ è¿˜å¯ä»¥ä¸ºæ´»åŠ¨æŒ‡å®šä¸åŒçš„ç±»å‹ã€‚å¸¸è§æ´»åŠ¨å¦‚ä¸‹:</p><p><img src="'+Un+'" alt="image-20220320103929543"></p><h3 id="_4-3-ç»“æ„å›¾æ ‡" tabindex="-1"><a class="header-anchor" href="#_4-3-ç»“æ„å›¾æ ‡" aria-hidden="true">#</a> 4.3 ç»“æ„å›¾æ ‡</h3><p>â€ƒâ€ƒç»“æ„å›¾æ ‡å¯ä»¥çœ‹åšæ˜¯æ•´ä¸ªæµç¨‹æ´»åŠ¨çš„ç»“æ„ï¼Œä¸€ä¸ªæµç¨‹ä¸­å¯ä»¥åŒ…æ‹¬å­æµç¨‹ã€‚å¸¸è§çš„ç»“æ„æœ‰ï¼š</p><p><img src="'+jn+'" alt="image-20230705184623096"></p><h3 id="_4-4-ç½‘å…³å›¾æ ‡" tabindex="-1"><a class="header-anchor" href="#_4-4-ç½‘å…³å›¾æ ‡" aria-hidden="true">#</a> 4.4 ç½‘å…³å›¾æ ‡</h3><p>â€ƒâ€ƒç½‘å…³ç”¨æ¥å¤„ç†å†³ç­–ï¼Œæœ‰å‡ ç§å¸¸ç”¨ç½‘å…³éœ€è¦äº†è§£ï¼š</p><p><img src="'+On+`" alt="image-20220320104157816"></p><h2 id="_5-æµç¨‹éƒ¨ç½²è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#_5-æµç¨‹éƒ¨ç½²è¯¦è§£" aria-hidden="true">#</a> 5.æµç¨‹éƒ¨ç½²è¯¦è§£</h2><h3 id="_5-1-éƒ¨ç½²å®ç°" tabindex="-1"><a class="header-anchor" href="#_5-1-éƒ¨ç½²å®ç°" aria-hidden="true">#</a> 5.1 éƒ¨ç½²å®ç°</h3><p>â€ƒâ€ƒæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æµç¨‹éƒ¨ç½²çš„å…·ä½“è¿‡ç¨‹ã€‚ä»£ç å®ç°</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * éƒ¨ç½²æµç¨‹
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> <span class="token class-name">ProcessEngines</span><span class="token punctuation">.</span><span class="token function">getDefaultProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">RepositoryService</span> repositoryService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRepositoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Deployment</span> deploy <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">createDeployment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addClasspathResource</span><span class="token punctuation">(</span><span class="token string">&quot;holiday-request-new.bpmn20.xml&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·å‡æµç¨‹...&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">category</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·å‡&quot;</span><span class="token punctuation">)</span> <span class="token comment">// åˆ†ç±»</span>
            <span class="token punctuation">.</span><span class="token function">tenantId</span><span class="token punctuation">(</span><span class="token string">&quot;dpb&quot;</span><span class="token punctuation">)</span> <span class="token comment">// ç§Ÿæˆ·id</span>
            <span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deploy.getId() = &quot;</span> <span class="token operator">+</span> deploy<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deploy.getName() = &quot;</span> <span class="token operator">+</span> deploy<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deploy.getCategory() = &quot;</span> <span class="token operator">+</span> deploy<span class="token punctuation">.</span><span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_5-2-éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„" aria-hidden="true">#</a> 5.2 éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„</h3><p>æ¶‰åŠåˆ°çš„ä¸‰å¼ è¡¨ï¼š</p><p>éƒ¨ç½²èµ„æºè¡¨ï¼šact_ge_bytearray</p><table><thead><tr><th>å­—æ®µ</th><th>åç§°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ID_</td><td>ä¸»é”®</td><td></td></tr><tr><td>REV_</td><td>ç‰ˆæœ¬å·</td><td></td></tr><tr><td>NAME_</td><td>åç§°</td><td>éƒ¨ç½²çš„æ–‡ä»¶åç§°ï¼Œå¦‚ï¼šholiday-request-new.bpmn20.xmlã€holiday-request-new.bpmn20.png</td></tr><tr><td>DEPLOYMENT<em>ID</em></td><td>éƒ¨ç½² ID</td><td></td></tr><tr><td>BYTES_</td><td>å­—èŠ‚ï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰</td><td></td></tr><tr><td>GENERATED_</td><td>æ˜¯å¦ç³»ç»Ÿç”Ÿæˆ</td><td>0 ä¸ºç”¨æˆ·ä¸Šä¼ ï¼Œ<br>1 ä¸ºç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œ æ¯”å¦‚ç³»ç»Ÿä¼š è‡ªåŠ¨æ ¹æ® xml ç”Ÿ æˆ png</td></tr></tbody></table><p>éƒ¨ç½² ID è¡¨ï¼šact_re_deployment</p><table><thead><tr><th>å­—æ®µ</th><th>åç§°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ID_</td><td>ä¸»é”®</td><td></td></tr><tr><td>NAME_</td><td>åç§°</td><td></td></tr><tr><td>CATEGORY_</td><td>åˆ†ç±»</td><td></td></tr><tr><td>TENANT<em>ID</em></td><td>ç§Ÿæˆ· ID</td><td></td></tr><tr><td>DEPLOY<em>TIME</em></td><td>éƒ¨ç½²æ—¶é—´</td><td></td></tr><tr><td>DERIVED<em>FROM</em></td><td>æ¥æºäº</td><td></td></tr><tr><td>DERIVED<em>FROM_ROOT</em></td><td>æ¥æºäº</td><td></td></tr><tr><td>ENGINE<em>VERSION</em></td><td>æµç¨‹å¼•æ“çš„ç‰ˆæœ¬</td><td></td></tr></tbody></table><p>æµç¨‹è¡¨ï¼šact_re_procdef</p><table><thead><tr><th>å­—æ®µ</th><th>åç§°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ID_</td><td>ä¸»é”®</td><td></td></tr><tr><td>REV_</td><td>ç‰ˆæœ¬å·</td><td></td></tr><tr><td>CATEGORY_</td><td>åˆ†ç±»</td><td>æµç¨‹å®šä¹‰çš„ Namespace å°±æ˜¯ç±»åˆ«</td></tr><tr><td>NAME_</td><td>åç§°</td><td></td></tr><tr><td>KEY_</td><td>æ ‡è¯†</td><td></td></tr><tr><td>VERSION_</td><td>ç‰ˆæœ¬</td><td></td></tr><tr><td>DEPLOYMENT<em>ID</em></td><td>éƒ¨ç½² ID</td><td></td></tr><tr><td>RESOURCE<em>NAME</em></td><td>èµ„æºåç§°</td><td>æµç¨‹ bpmn æ–‡ä»¶åç§°</td></tr><tr><td>DGRM<em>RESOURCE_NAME</em></td><td>å›¾ç‰‡èµ„æºåç§°</td><td></td></tr><tr><td>DESCRIPTION_</td><td>æè¿°</td><td></td></tr><tr><td>HAS<em>START_FORM_KEY</em></td><td>æ‹¥æœ‰å¼€å§‹è¡¨å•æ ‡è¯†</td><td>start èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ formKey 0 å¦ 1 æ˜¯</td></tr><tr><td>HAS<em>GRAPHICAL_NOTATION</em></td><td>æ‹¥æœ‰å›¾å½¢ä¿¡æ¯</td><td></td></tr><tr><td>SUSPENSION<em>STATE</em></td><td>æŒ‚èµ·çŠ¶æ€</td><td>æš‚åœçŠ¶æ€ 1 æ¿€æ´» 2 æš‚åœ</td></tr><tr><td>TENANT<em>ID</em></td><td>ç§Ÿæˆ· ID</td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><blockquote><p>è¯¦ç»†è¯´æ˜ï¼š</p><p>ä¸šåŠ¡æµç¨‹å®šä¹‰æ•°æ®è¡¨ã€‚æ­¤è¡¨å’Œ ACT_RE_DEPLOYMENT æ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œå³ï¼Œä¸€ä¸ªéƒ¨ç½²çš„ bar åŒ…é‡Œå¯èƒ½åŒ…å«å¤šä¸ªæµç¨‹å®šä¹‰æ–‡ä»¶ï¼Œæ¯ä¸ªæµç¨‹å®šä¹‰æ–‡ä»¶éƒ½ä¼šæœ‰ä¸€æ¡è®°å½•åœ¨ ACT_REPROCDEF è¡¨å†…ï¼Œæ¯ä¸ªæµç¨‹å®šä¹‰çš„æ•°æ®ï¼Œéƒ½ä¼šå¯¹äº ACT_GE_BYTEARRAY è¡¨å†…çš„ä¸€ä¸ªèµ„æºæ–‡ä»¶å’Œ PNG å›¾ç‰‡æ–‡ä»¶ã€‚</p><p>å’Œ ACT<em>GE_BYTEARRAY çš„å…³è”æ˜¯é€šè¿‡ç¨‹åºç”¨ ACT_GE_BYTEARRAY.NAME ä¸ ACT_RE_PROCDEF.NAME</em>å®Œæˆçš„</p></blockquote><h3 id="_5-3-æŒ‚èµ·å’Œæ¿€æ´»" tabindex="-1"><a class="header-anchor" href="#_5-3-æŒ‚èµ·å’Œæ¿€æ´»" aria-hidden="true">#</a> 5.3 æŒ‚èµ·å’Œæ¿€æ´»</h3><p>â€ƒâ€ƒéƒ¨ç½²çš„æµç¨‹é»˜è®¤çš„çŠ¶æ€ä¸ºæ¿€æ´»ï¼Œå¦‚æœæˆ‘ä»¬æš‚æ—¶ä¸æƒ³ä½¿ç”¨è¯¥å®šä¹‰çš„æµç¨‹ï¼Œé‚£ä¹ˆå¯ä»¥æŒ‚èµ·è¯¥æµç¨‹ã€‚å½“ç„¶è¯¥æµç¨‹å®šä¹‰ä¸‹è¾¹æ‰€æœ‰çš„æµç¨‹å®ä¾‹å…¨éƒ¨æš‚åœã€‚</p><p>æµç¨‹å®šä¹‰ä¸ºæŒ‚èµ·çŠ¶æ€ï¼Œè¯¥æµç¨‹å®šä¹‰å°†ä¸å…è®¸å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶è¯¥æµç¨‹å®šä¹‰ä¸‹çš„æ‰€æœ‰çš„æµç¨‹å®ä¾‹éƒ½å°†å…¨éƒ¨æŒ‚èµ·æš‚åœæ‰§è¡Œã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
     * æŒ‚èµ·æµç¨‹
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test05</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span>
        <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> <span class="token class-name">ProcessEngines</span><span class="token punctuation">.</span><span class="token function">getDefaultProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">RepositoryService</span> repositoryService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRepositoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ProcessDefinition</span> processDefinition <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">createProcessDefinitionQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">processDefinitionId</span><span class="token punctuation">(</span><span class="token string">&quot;holiday:1:4&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">singleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–æµç¨‹å®šä¹‰çš„çŠ¶æ€</span>
        <span class="token keyword">boolean</span> suspended <span class="token operator">=</span> processDefinition<span class="token punctuation">.</span><span class="token function">isSuspended</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;suspended = &quot;</span> <span class="token operator">+</span> suspended<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>suspended<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// è¡¨ç¤ºè¢«æŒ‚èµ·</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ¿€æ´»æµç¨‹å®šä¹‰&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            repositoryService<span class="token punctuation">.</span><span class="token function">activateProcessDefinitionById</span><span class="token punctuation">(</span><span class="token string">&quot;holiday:1:4&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token comment">// è¡¨ç¤ºæ¿€æ´»çŠ¶æ€</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æŒ‚èµ·æµç¨‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            repositoryService<span class="token punctuation">.</span><span class="token function">suspendProcessDefinitionById</span><span class="token punctuation">(</span><span class="token string">&quot;holiday:1:4&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…·ä½“çš„å®ç°å…¶å®å°±æ˜¯æ›´æ–°äº†æµç¨‹å®šä¹‰è¡¨ä¸­çš„å­—æ®µ</p><p><img src="`+Fn+'" alt="image-20220321210010518"></p><p>è€Œä¸”é€šè¿‡ REV_å­—æ®µæ¥æ§åˆ¶æ•°æ®å®‰å…¨ï¼Œä¹Ÿæ˜¯ä¸€ç§ä¹è§‚é”çš„ä½“ç°äº†ï¼Œå¦‚æœè¦å¯åŠ¨ä¸€ä¸ªå·²ç»æŒ‚èµ·çš„æµç¨‹å°±ä¼šå‡ºç°å¦‚ä¸‹çš„é”™è¯¯</p><p><img src="'+Ln+`" alt="image-20220321211858122"></p><h2 id="_6-å¯åŠ¨æµç¨‹å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#_6-å¯åŠ¨æµç¨‹å®ä¾‹" aria-hidden="true">#</a> 6.å¯åŠ¨æµç¨‹å®ä¾‹</h2><p>â€ƒâ€ƒç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹å¯åŠ¨æµç¨‹å®ä¾‹çš„è¿‡ç¨‹ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
     * å¯åŠ¨æµç¨‹å®ä¾‹
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testRunProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span>
        <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> <span class="token class-name">ProcessEngines</span><span class="token punctuation">.</span><span class="token function">getDefaultProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡</span>
        <span class="token class-name">RuntimeService</span> runtimeService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRuntimeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ„å»ºæµç¨‹å˜é‡</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> variables <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        variables<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;employee&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment">// è°ç”³è¯·è¯·å‡</span>
        variables<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;nrOfHolidays&quot;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯·å‡ å¤©å‡</span>
        variables<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;å·¥ä½œç´¯äº†ï¼Œæƒ³å‡ºå»ç©ç©&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯·å‡çš„åŸå› </span>
        <span class="token comment">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id</span>
        <span class="token class-name">ProcessInstance</span> processInstance <span class="token operator">=</span> runtimeService
                <span class="token punctuation">.</span><span class="token function">startProcessInstanceById</span><span class="token punctuation">(</span><span class="token string">&quot;holiday:1:4&quot;</span><span class="token punctuation">,</span> variables<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å¯åŠ¨æµç¨‹å®ä¾‹</span>
        <span class="token comment">// è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æµç¨‹å®šä¹‰çš„IDï¼š&quot;</span> <span class="token operator">+</span> processInstance<span class="token punctuation">.</span><span class="token function">getProcessDefinitionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æµç¨‹å®ä¾‹çš„IDï¼š&quot;</span> <span class="token operator">+</span> processInstance<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰æ´»åŠ¨çš„IDï¼š&quot;</span> <span class="token operator">+</span> processInstance<span class="token punctuation">.</span><span class="token function">getActivityId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€ƒâ€ƒå½“æˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªæµç¨‹å®ä¾‹åï¼Œä¼šåœ¨ ACT<em>RU</em>*å¯¹åº”çš„è¡¨ç»“æ„ä¸­æ“ä½œ,è¿è¡Œæ—¶å®ä¾‹æ¶‰åŠçš„è¡¨ç»“æ„å…± 10 å¼ ï¼š</p><ul><li>ACT_RU_DEADLETTER_JOB æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡è¡¨</li><li>ACT_RU_EVENT_SUBSCR è¿è¡Œæ—¶äº‹ä»¶</li><li>ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹</li><li>ACT_RU_HISTORY_JOB å†å²ä½œä¸šè¡¨</li><li>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯</li><li>ACT_RU_JOB è¿è¡Œæ—¶ä½œä¸šè¡¨</li><li>ACT_RU_SUSPENDED_JOB æš‚åœä½œä¸šè¡¨</li><li>ACT_RU_TASK è¿è¡Œæ—¶ä»»åŠ¡è¡¨</li><li>ACT_RU_TIMER_JOB å®šæ—¶ä½œä¸šè¡¨</li><li>ACT_RU_VARIABLE è¿è¡Œæ—¶å˜é‡è¡¨</li></ul><p>â€ƒâ€ƒå¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹çš„æ—¶å€™æ¶‰åŠåˆ°çš„è¡¨æœ‰</p><ul><li>ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹</li><li>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯</li><li>ACT_RU_TASK è¿è¡Œæ—¶ä»»åŠ¡è¡¨</li><li>ACT_RU_VARIABLE è¿è¡Œæ—¶å˜é‡è¡¨</li></ul><p>ACT_RU_EXECUTION è¡¨ç»“æ„</p><table><thead><tr><th>å­—æ®µ</th><th>åç§°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ID_</td><td>ä¸»é”®</td><td></td></tr><tr><td>REV_</td><td>ç‰ˆæœ¬å·</td><td></td></tr><tr><td>PROC<em>INST_ID</em></td><td>æµç¨‹å®ä¾‹ ID</td><td></td></tr><tr><td>BUSINESS<em>KEY</em></td><td>ä¸šåŠ¡ä¸»é”® ID</td><td></td></tr><tr><td>PARENT<em>ID</em></td><td>çˆ¶æ‰§è¡Œæµçš„ ID</td><td></td></tr><tr><td>PROC<em>DEF_ID</em></td><td>æµç¨‹å®šä¹‰çš„æ•°æ® ID</td><td></td></tr><tr><td>SUPER<em>EXEC</em></td><td></td><td></td></tr><tr><td>ROOT<em>PROC_INST_ID</em></td><td>æµç¨‹å®ä¾‹çš„ root æµç¨‹ id</td><td></td></tr><tr><td>ACT<em>ID</em></td><td>èŠ‚ç‚¹å®ä¾‹ ID</td><td></td></tr><tr><td>IS<em>ACTIVE</em></td><td>æ˜¯å¦å­˜æ´»</td><td></td></tr><tr><td>IS<em>CONCURRENT</em></td><td>æ‰§è¡Œæµæ˜¯å¦æ­£åœ¨å¹¶è¡Œ</td><td></td></tr><tr><td>IS<em>SCOPE</em></td><td></td><td></td></tr><tr><td>IS<em>EVENT_SCOPE</em></td><td></td><td></td></tr><tr><td>IS<em>MI_ROOT</em></td><td></td><td></td></tr><tr><td>SUSPENSION<em>STATE</em></td><td>æµç¨‹ç»ˆç«¯çŠ¶æ€</td><td></td></tr><tr><td>CACHED<em>ENT_STATE</em></td><td></td><td></td></tr><tr><td>TENANT<em>ID</em></td><td>ç§Ÿæˆ·ç¼–å·</td><td></td></tr><tr><td>NAME_</td><td></td><td></td></tr><tr><td>START<em>TIME</em></td><td>å¼€å§‹æ—¶é—´</td><td></td></tr><tr><td>START<em>USER_ID</em></td><td>å¼€å§‹çš„ç”¨æˆ·ç¼–å·</td><td></td></tr><tr><td>LOCK<em>TIME</em></td><td>é”å®šæ—¶é—´</td><td></td></tr><tr><td>IS<em>COUNT_ENABLED</em></td><td></td><td></td></tr><tr><td>EVT<em>SUBSCR_COUNT</em></td><td></td><td></td></tr><tr><td>TASK<em>COUNT</em></td><td></td><td></td></tr><tr><td>JOB<em>COUNT</em></td><td></td><td></td></tr><tr><td>TIMER<em>JOB_COUNT</em></td><td></td><td></td></tr><tr><td>SUSP<em>JOB_COUNT</em></td><td></td><td></td></tr><tr><td>DEADLETTER<em>JOB_COUNT</em></td><td></td><td></td></tr><tr><td>VAR<em>COUNT</em></td><td></td><td></td></tr><tr><td>ID<em>LINK_COUNT</em></td><td></td><td></td></tr></tbody></table><p>åˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®</p><p><img src="`+Hn+'" alt="image-20220322133108405"></p><p><img src="'+Jn+'" alt="image-20220322133219534"></p><p>ACT_RU_TASK è¿è¡Œæ—¶ä»»åŠ¡è¡¨</p><table><thead><tr><th>å­—æ®µ</th><th>åç§°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ID_</td><td>ä¸»é”®</td><td></td></tr><tr><td>REV_</td><td>ç‰ˆæœ¬å·</td><td></td></tr><tr><td>EXECUTION<em>ID</em></td><td>ä»»åŠ¡æ‰€åœ¨çš„æ‰§è¡Œæµ ID</td><td></td></tr><tr><td>PROC<em>INST_ID</em></td><td>æµç¨‹å®ä¾‹ ID</td><td></td></tr><tr><td>PROC<em>DEF_ID</em></td><td>æµç¨‹å®šä¹‰æ•°æ® ID</td><td></td></tr><tr><td>NAME_</td><td>ä»»åŠ¡åç§°</td><td></td></tr><tr><td>PARENT<em>TASK_ID</em></td><td>çˆ¶ä»»åŠ¡ ID</td><td></td></tr><tr><td>DESCRIPTION_</td><td>è¯´æ˜</td><td></td></tr><tr><td>TASK<em>DEF_KEY</em></td><td>ä»»åŠ¡å®šä¹‰çš„ ID å€¼</td><td></td></tr><tr><td>OWNER_</td><td>ä»»åŠ¡æ‹¥æœ‰äºº</td><td></td></tr><tr><td>ASSIGNEE_</td><td>è¢«æŒ‡æ´¾æ‰§è¡Œè¯¥ä»»åŠ¡çš„äºº</td><td></td></tr><tr><td>DELEGATION_</td><td>å§”æ‰˜äºº</td><td></td></tr><tr><td>PRIORITY_</td><td>ä¼˜å…ˆçº§</td><td></td></tr><tr><td>CREATE<em>TIME</em></td><td>åˆ›å»ºæ—¶é—´</td><td></td></tr><tr><td>DUE<em>DATE</em></td><td>è€—æ—¶</td><td></td></tr><tr><td>CATEGORY_</td><td>ç±»åˆ«</td><td></td></tr><tr><td>SUSPENSION<em>STATE</em></td><td>æ˜¯å¦æŒ‚èµ·</td><td>1 ä»£è¡¨æ¿€æ´» 2 ä»£è¡¨æŒ‚èµ·</td></tr><tr><td>TENANT<em>ID</em></td><td>ç§Ÿæˆ·ç¼–å·</td><td></td></tr><tr><td>FORM<em>KEY</em></td><td></td><td></td></tr><tr><td>CLAIM<em>TIME</em></td><td>æ‹¾å–æ—¶é—´</td><td></td></tr></tbody></table><p>åˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®</p><p><img src="'+Yn+'" alt="image-20220322133307195"></p><p><img src="'+Kn+'" alt="image-20220322133335326"></p><p>ACT_RU_VARIABLE è¿è¡Œæ—¶å˜é‡è¡¨</p><table><thead><tr><th>å­—æ®µ</th><th>åç§°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ID_</td><td>ä¸»é”®</td><td></td></tr><tr><td>REV_</td><td>ç‰ˆæœ¬å·</td><td></td></tr><tr><td>TYPE_</td><td>å‚æ•°ç±»å‹</td><td>å¯ä»¥æ˜¯åŸºæœ¬çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥ç”¨æˆ·è‡ªè¡Œæ‰©å±•</td></tr><tr><td>NAME_</td><td>å‚æ•°åç§°</td><td></td></tr><tr><td>EXECUTION<em>ID</em></td><td>å‚æ•°æ‰§è¡Œ ID</td><td></td></tr><tr><td>PROC<em>INST_ID</em></td><td>æµç¨‹å®ä¾‹ ID</td><td></td></tr><tr><td>TASK<em>ID</em></td><td>ä»»åŠ¡ ID</td><td></td></tr><tr><td>BYTEARRAY<em>ID</em></td><td>èµ„æº ID</td><td></td></tr><tr><td>DOUBLE_</td><td>å‚æ•°ä¸º doubleï¼Œåˆ™ä¿å­˜åœ¨è¯¥å­—æ®µä¸­</td><td></td></tr><tr><td>LONG_</td><td>å‚æ•°ä¸º longï¼Œåˆ™ä¿å­˜åœ¨è¯¥å­—æ®µä¸­</td><td></td></tr><tr><td>TEXT_</td><td>ç”¨æˆ·ä¿å­˜æ–‡æœ¬ç±»å‹çš„å‚æ•°å€¼</td><td></td></tr><tr><td>TEXT2_</td><td>ç”¨æˆ·ä¿å­˜æ–‡æœ¬ç±»å‹çš„å‚æ•°å€¼</td><td></td></tr></tbody></table><p>åˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®</p><p><img src="'+Xn+'" alt="image-20220322133406398"></p><p><img src="'+Vn+'" alt="image-20220322133439827"></p><p>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯</p><table><thead><tr><th>å­—æ®µ</th><th>åç§°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ID_</td><td>ä¸»é”®</td><td></td></tr><tr><td>REV_</td><td>ç‰ˆæœ¬å·</td><td></td></tr><tr><td>GROUP<em>ID</em></td><td>ç”¨æˆ·ç»„ ID</td><td></td></tr><tr><td>TYPE_</td><td>å…³ç³»æ•°æ®ç±»å‹</td><td>assignee æ”¯é…äºº(ç»„)ã€candidate å€™é€‰äºº(ç»„)ã€owner æ‹¥æœ‰äºº,participant å‚ä¸è€…</td></tr><tr><td>USER<em>ID</em></td><td>ç”¨æˆ· ID</td><td></td></tr><tr><td>TASK<em>ID</em></td><td>ä»»åŠ¡ ID</td><td></td></tr><tr><td>PROC<em>INST_ID</em></td><td>æµç¨‹å®šä¹‰ ID</td><td></td></tr><tr><td>PROC<em>DEF_ID</em></td><td>å±æ€§ ID</td><td></td></tr></tbody></table><p>åˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®:</p><p><img src="'+Gn+`" alt="image-20220322133501720"></p><h2 id="_7-å¤„ç†æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_7-å¤„ç†æµç¨‹" aria-hidden="true">#</a> 7.å¤„ç†æµç¨‹</h2><p>â€ƒâ€ƒä¸Šé¢çš„æµç¨‹å·²ç»æµè½¬åˆ°äº† zhangsan è¿™ä¸ªç”¨æˆ·è¿™é‡Œï¼Œç„¶åå¯ä»¥å¼€å§‹å®¡æ‰¹äº†</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span>
    <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> <span class="token class-name">ProcessEngines</span><span class="token punctuation">.</span><span class="token function">getDefaultProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">TaskService</span> taskService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getTaskService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Task</span> task <span class="token operator">=</span> taskService<span class="token punctuation">.</span><span class="token function">createTaskQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">processDefinitionId</span><span class="token punctuation">(</span><span class="token string">&quot;holiday:1:4&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">taskAssignee</span><span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">singleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ·»åŠ æµç¨‹å˜é‡</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> variables <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    variables<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;approved&quot;</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹’ç»è¯·å‡</span>
    <span class="token comment">// å®Œæˆä»»åŠ¡</span>
    taskService<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span>task<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>variables<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€ƒâ€ƒåœ¨æ­£å¸¸å¤„ç†æµç¨‹ä¸­æ¶‰åŠåˆ°çš„è¡¨ç»“æ„</p><ul><li>ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹</li><li>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯</li><li>ACT_RU_TASK è¿è¡Œæ—¶ä»»åŠ¡è¡¨</li><li>ACT_RU_VARIABLE è¿è¡Œæ—¶å˜é‡è¡¨</li></ul><p>ACT_RU_TASK è¿è¡Œæ—¶ä»»åŠ¡è¡¨ :ä¼šæ–°ç”Ÿæˆä¸€æ¡è®°å½•</p><p><img src="`+zn+'" alt="image-20220322135040119"></p><p><img src="'+Qn+'" alt="image-20220322135125703"></p><p>ACT_RU_VARIABLE è¿è¡Œæ—¶å˜é‡è¡¨:ä¼šè®°å½•æ–°çš„æµç¨‹å˜é‡</p><p><img src="'+Zn+`" alt="image-20220322135204021"></p><p>å½“ç„¶æµç¨‹å®ä¾‹ä¹Ÿå¯ä»¥æŒ‚èµ·</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 1.è·å–ProcessEngineå¯¹è±¡</span>
<span class="token class-name">ProcessEngine</span> engine <span class="token operator">=</span> <span class="token class-name">ProcessEngines</span><span class="token punctuation">.</span><span class="token function">getDefaultProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2.è·å–RuntimeService</span>
<span class="token class-name">RuntimeService</span> runtimeService <span class="token operator">=</span> engine<span class="token punctuation">.</span><span class="token function">getRuntimeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3.è·å–æµç¨‹å®ä¾‹å¯¹è±¡</span>
<span class="token class-name">ProcessInstance</span> processInstance <span class="token operator">=</span> runtimeService<span class="token punctuation">.</span><span class="token function">createProcessInstanceQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">processInstanceId</span><span class="token punctuation">(</span><span class="token string">&quot;25001&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">singleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 4.è·å–ç›¸å…³çš„çŠ¶æ€æ“ä½œ</span>
<span class="token keyword">boolean</span> suspended <span class="token operator">=</span> processInstance<span class="token punctuation">.</span><span class="token function">isSuspended</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> id <span class="token operator">=</span> processInstance<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>suspended<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// æŒ‚èµ·--ã€‹æ¿€æ´»</span>
    runtimeService<span class="token punctuation">.</span><span class="token function">activateProcessInstanceById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æµç¨‹å®šä¹‰ï¼š&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">&quot;ï¼Œå·²æ¿€æ´»&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token comment">// æ¿€æ´»--ã€‹æŒ‚èµ·</span>
    runtimeService<span class="token punctuation">.</span><span class="token function">suspendProcessInstanceById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æµç¨‹å®šä¹‰ï¼š&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">&quot;ï¼Œå·²æŒ‚èµ·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨ç¬¬äºŒä¸ªæµç¨‹å®ä¾‹åå†æŸ¥çœ‹ç›¸å…³çš„è¡¨ç»“æ„æ—¶ï¼Œå¯¹ä»–ä»¬çš„å…³ç³»ç†è§£ä¼šæ›´åŠ çš„æ¸…æ¥šä¸€äº›</p><p>å¯åŠ¨ä¸€ä¸ªæ–°çš„æµç¨‹å®ä¾‹å¯¹åº”çš„å°±ä¼šäº§ç”Ÿä¸¤æ¡è®°å½•</p><p><img src="`+Wn+'" alt="image-20220322135605252"></p><p>IDENTITYLINK ä¸­ä¼šè®°å½•æ¯æ¬¡æµç¨‹æ“ä½œçš„ä¿¡æ¯</p><p><img src="'+$n+'" alt="image-20220322135636841"></p><p><img src="'+ns+'" alt="image-20220322135659671"></p><p>æµç¨‹å˜é‡æ•°æ®ï¼ŒåŠæ—¶ key ç›¸åŒï¼Œä½†æ˜¯å±äºä¸åŒçš„æµç¨‹å®ä¾‹ç›¸äº’é—´ä¹Ÿæ˜¯éš”ç¦»çš„</p><p><img src="'+ss+`" alt="image-20220322135719104"></p><h2 id="_8-å®Œæˆä¸€ä¸ªæµç¨‹" tabindex="-1"><a class="header-anchor" href="#_8-å®Œæˆä¸€ä¸ªæµç¨‹" aria-hidden="true">#</a> 8.å®Œæˆä¸€ä¸ªæµç¨‹</h2><p>â€ƒâ€ƒç„¶åæˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªæµç¨‹å¤„ç†å®Œæˆ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> cfg<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">TaskService</span> taskService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getTaskService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Task</span> task <span class="token operator">=</span> taskService<span class="token punctuation">.</span><span class="token function">createTaskQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">processDefinitionId</span><span class="token punctuation">(</span><span class="token string">&quot;holiday:1:4&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">taskAssignee</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">singleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ·»åŠ æµç¨‹å˜é‡</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> variables <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
variables<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;approved&quot;</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹’ç»è¯·å‡</span>
<span class="token comment">// å®Œæˆä»»åŠ¡</span>
taskService<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span>task<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>variables<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤„ç†å®Œäº†ä¸€ä¸ªå·¥ä½œæµç¨‹åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç›¸å…³çš„è¡¨ç»“æ„ä¿¡æ¯</p><p>é¦–å…ˆæˆ‘ä»¬ä¼šå‘ç°</p><ul><li>ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹</li><li>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯</li><li>ACT_RU_TASK è¿è¡Œæ—¶ä»»åŠ¡è¡¨</li><li>ACT_RU_VARIABLE è¿è¡Œæ—¶å˜é‡è¡¨</li></ul><p>è¿™å››å¼ è¡¨ä¸­å¯¹åº”çš„æ•°æ®éƒ½æ²¡æœ‰äº†ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæµç¨‹å·²ç»ä¸æ˜¯è¿è¡Œä¸­çš„æµç¨‹äº†ã€‚ç„¶ååœ¨å¯¹åº”çš„å†å²è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯</p><ul><li><p>ACT_HI_ACTINST å†å²çš„æµç¨‹å®ä¾‹</p></li><li><p>ACT_HI_ATTACHMENT å†å²çš„æµç¨‹é™„ä»¶</p></li><li><p>ACT_HI_COMMENT å†å²çš„è¯´æ˜æ€§ä¿¡æ¯</p></li><li><p>ACT_HI_DETAIL å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯</p></li><li><p>ACT_HI_IDENTITYLINK å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»</p></li><li><p>ACT_HI_PROCINST å†å²çš„æµç¨‹å®ä¾‹</p></li><li><p>ACT_HI_TASKINST å†å²çš„ä»»åŠ¡å®ä¾‹</p></li><li><p>ACT_HI_VARINST å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯</p></li></ul><p>åœ¨æˆ‘ä»¬ä¸Šé¢çš„å¤„ç†æµç¨‹çš„è¿‡ç¨‹ä¸­è®¾è®¡åˆ°çš„å†å²è¡¨æœ‰</p><p>ACT_HI_ACTINST å†å²çš„æµç¨‹å®ä¾‹</p><table><thead><tr><th>å­—æ®µ</th><th>åç§°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ID_</td><td>ä¸»é”®</td><td></td></tr><tr><td>PROC<em>DEF_ID</em></td><td>æµç¨‹å®šä¹‰ ID</td><td></td></tr><tr><td>PROC<em>INST_ID</em></td><td>æµç¨‹å®ä¾‹ ID</td><td></td></tr><tr><td>EXECUTION<em>ID</em></td><td>æ‰§è¡Œ ID</td><td></td></tr><tr><td>ACT<em>ID</em></td><td>èŠ‚ç‚¹å®ä¾‹ ID</td><td></td></tr><tr><td>TASK<em>ID</em></td><td>ä»»åŠ¡ ID</td><td></td></tr><tr><td>CALL<em>PROC_INST_ID</em></td><td>è°ƒç”¨å¤–éƒ¨çš„æµç¨‹å®ä¾‹ ID</td><td></td></tr><tr><td>ACT<em>NAME</em></td><td>èŠ‚ç‚¹åç§°</td><td></td></tr><tr><td>ACT<em>TYPE</em></td><td>èŠ‚ç‚¹ç±»å‹</td><td></td></tr><tr><td>ASSIGNEE_</td><td>å¤„ç†äºº</td><td></td></tr><tr><td>START<em>TIME</em></td><td>å¼€å§‹æ—¶é—´</td><td></td></tr><tr><td>END<em>TIME</em></td><td>ç»“æŸæ—¶é—´</td><td></td></tr><tr><td>DURATION_</td><td>è€—æ—¶</td><td></td></tr><tr><td>DELETE<em>REASON</em></td><td>åˆ é™¤åŸå› </td><td></td></tr><tr><td>TENANT<em>ID</em></td><td>ç§Ÿæˆ·ç¼–å·</td><td></td></tr></tbody></table><p><img src="`+as+'" alt="image-20220322141800554"></p><p><img src="'+ts+'" alt="image-20220322141825065"></p><p>ACT_HI_IDENTITYLINK å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»</p><table><thead><tr><th>å­—æ®µ</th><th>åç§°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ID_</td><td>ä¸»é”®</td><td></td></tr><tr><td>GROUP<em>ID</em></td><td>ç»„ç¼–å·</td><td></td></tr><tr><td>TYPE_</td><td>ç±»å‹</td><td></td></tr><tr><td>USER<em>ID</em></td><td>ç”¨æˆ·ç¼–å·</td><td></td></tr><tr><td>TASK<em>ID</em></td><td>ä»»åŠ¡ç¼–å·</td><td></td></tr><tr><td>CREATE<em>TIME</em></td><td>åˆ›å»ºæ—¶é—´</td><td></td></tr><tr><td>PROC<em>INST_ID</em></td><td>æµç¨‹å®ä¾‹ç¼–å·</td><td></td></tr><tr><td>SCOPE<em>ID</em></td><td></td><td></td></tr><tr><td>SCOPE<em>TYPE</em></td><td></td><td></td></tr><tr><td>SCOPE<em>DEFINITION_ID</em></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><p><img src="'+ps+'" alt="image-20220322141717826"></p><p>ACT_HI_PROCINST å†å²çš„æµç¨‹å®ä¾‹</p><table><thead><tr><th>å­—æ®µ</th><th>åç§°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ID_</td><td>ä¸»é”®</td><td></td></tr><tr><td>PROC<em>INST_ID</em></td><td>æµç¨‹å®ä¾‹ ID</td><td></td></tr><tr><td>BUSINESS<em>KEY</em></td><td>ä¸šåŠ¡ä¸»é”®</td><td></td></tr><tr><td>PROC<em>DEF_ID</em></td><td>å±æ€§ ID</td><td></td></tr><tr><td>START<em>TIME</em></td><td>å¼€å§‹æ—¶é—´</td><td></td></tr><tr><td>END<em>TIME</em></td><td>ç»“æŸæ—¶é—´</td><td></td></tr><tr><td>DURATION_</td><td>è€—æ—¶</td><td></td></tr><tr><td>START<em>USER_ID</em></td><td>èµ·å§‹äºº</td><td></td></tr><tr><td>START<em>ACT_ID</em></td><td>èµ·å§‹èŠ‚ç‚¹</td><td></td></tr><tr><td>END<em>ACT_ID</em></td><td>ç»“æŸèŠ‚ç‚¹</td><td></td></tr><tr><td>SUPER<em>PROCESS_INSTANCE_ID</em></td><td>çˆ¶æµç¨‹å®ä¾‹ ID</td><td></td></tr><tr><td>DELETE<em>REASON</em></td><td>åˆ é™¤åŸå› </td><td></td></tr><tr><td>TENANT<em>ID</em></td><td>ç§Ÿæˆ·ç¼–å·</td><td></td></tr><tr><td>NAME_</td><td>åç§°</td><td></td></tr></tbody></table><p><img src="'+es+'" alt="image-20220322141855401"></p><p><img src="'+os+'" alt="image-20220322141912602"></p><p>ACT_HI_TASKINST å†å²çš„ä»»åŠ¡å®ä¾‹</p><table><thead><tr><th>å­—æ®µ</th><th>åç§°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ID_</td><td>ä¸»é”®</td><td></td></tr><tr><td>PROC<em>DEF_ID</em></td><td>æµç¨‹å®šä¹‰ ID</td><td></td></tr><tr><td>TASK<em>DEF_KEY</em></td><td>ä»»åŠ¡å®šä¹‰çš„ ID å€¼</td><td></td></tr><tr><td>PROC<em>INST_ID</em></td><td>æµç¨‹å®ä¾‹ ID</td><td></td></tr><tr><td>EXECUTION<em>ID</em></td><td>æ‰§è¡Œ ID</td><td></td></tr><tr><td>PARENT<em>TASK_ID</em></td><td>çˆ¶ä»»åŠ¡ ID</td><td></td></tr><tr><td>NAME_</td><td>åç§°</td><td></td></tr><tr><td>DESCRIPTION_</td><td>è¯´æ˜</td><td></td></tr><tr><td>OWNER_</td><td>å®é™…ç­¾æ”¶äºº ä»»åŠ¡çš„æ‹¥æœ‰è€…</td><td>ç­¾æ”¶äººï¼ˆé»˜è®¤ä¸ºç©ºï¼Œåªæœ‰åœ¨å§”æ‰˜æ—¶æ‰æœ‰å€¼ï¼‰</td></tr><tr><td>ASSIGNEE_</td><td>è¢«æŒ‡æ´¾æ‰§è¡Œè¯¥ä»»åŠ¡çš„äºº</td><td></td></tr><tr><td>START<em>TIME</em></td><td>å¼€å§‹æ—¶é—´</td><td></td></tr><tr><td>CLAIM<em>TIME</em></td><td>ä»»åŠ¡æ‹¾å–æ—¶é—´</td><td></td></tr><tr><td>END<em>TIME</em></td><td>ç»“æŸæ—¶é—´</td><td></td></tr><tr><td>DURATION_</td><td>è€—æ—¶</td><td></td></tr><tr><td>DELETE<em>REASON</em></td><td>åˆ é™¤åŸå› </td><td></td></tr><tr><td>PRIORITY_</td><td>ä¼˜å…ˆçº§åˆ«</td><td></td></tr><tr><td>DUE<em>DATE</em></td><td>è¿‡æœŸæ—¶é—´</td><td></td></tr><tr><td>FORM<em>KEY</em></td><td>èŠ‚ç‚¹å®šä¹‰çš„ formkey</td><td></td></tr><tr><td>CATEGORY_</td><td>ç±»åˆ«</td><td></td></tr><tr><td>TENANT<em>ID</em></td><td>ç§Ÿæˆ·</td><td></td></tr></tbody></table><p><img src="'+cs+'" alt="image-20220322142609163"></p><p><img src="'+is+'" alt="image-20220322142650699"></p><p>ACT_HI_VARINST å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯ï¼šæµç¨‹å˜é‡è™½ç„¶åœ¨ä»»åŠ¡å®Œæˆååœ¨æµç¨‹å®ä¾‹è¡¨ä¸­ä¼šåˆ é™¤ï¼Œä½†æ˜¯åœ¨å†å²è¡¨ä¸­è¿˜æ˜¯ä¼šè®°å½•çš„</p><table><thead><tr><th>å­—æ®µ</th><th>åç§°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ID_</td><td>ä¸»é”®</td><td></td></tr><tr><td>PROC<em>INST_ID</em></td><td>æµç¨‹å®ä¾‹ ID</td><td></td></tr><tr><td>EXECUTION<em>ID</em></td><td>æŒ‡å®š ID</td><td></td></tr><tr><td>TASK<em>ID</em></td><td>ä»»åŠ¡ ID</td><td></td></tr><tr><td>NAME_</td><td>åç§°</td><td></td></tr><tr><td>VAR<em>TYPE</em></td><td>å‚æ•°ç±»å‹</td><td></td></tr><tr><td>REV_</td><td>æ•°æ®ç‰ˆæœ¬</td><td></td></tr><tr><td>BYTEARRAY<em>ID</em></td><td>å­—èŠ‚è¡¨ ID</td><td></td></tr><tr><td>DOUBLE_</td><td>å­˜å‚¨ double ç±»å‹æ•°æ®</td><td></td></tr><tr><td>LONG_</td><td>å­˜å‚¨ long ç±»å‹æ•°æ®</td><td></td></tr><tr><td>.....</td><td></td><td></td></tr></tbody></table><p><img src="'+ls+'" alt="image-20220322142756867"></p><p>å¥½äº†ä¸€ä¸ªç›¸å¯¹ç®€å•çš„æµç¨‹å¤„ç†æ¶‰åŠåˆ°çš„ç›¸å…³è¡¨ç»“æ„å†…å®¹å°±ä»‹ç»å®Œäº†</p>',383);function bs(fs,_s){const t=e("router-link"),c=e("ExternalLinkIcon");return l(),u("div",null,[rs,ds,n("nav",ks,[n("ul",null,[n("li",null,[a(t,{to:"#_1-åˆ›å»º-processengine"},{default:p(()=>[s("1.åˆ›å»º ProcessEngine")]),_:1})]),n("li",null,[a(t,{to:"#_2-éƒ¨ç½²æµç¨‹å®šä¹‰"},{default:p(()=>[s("2.éƒ¨ç½²æµç¨‹å®šä¹‰")]),_:1})]),n("li",null,[a(t,{to:"#_3-å¯åŠ¨æµç¨‹å®ä¾‹"},{default:p(()=>[s("3.å¯åŠ¨æµç¨‹å®ä¾‹")]),_:1})]),n("li",null,[a(t,{to:"#_4-æŸ¥çœ‹ä»»åŠ¡"},{default:p(()=>[s("4.æŸ¥çœ‹ä»»åŠ¡")]),_:1})]),n("li",null,[a(t,{to:"#_5-å®Œæˆä»»åŠ¡"},{default:p(()=>[s("5.å®Œæˆä»»åŠ¡")]),_:1})]),n("li",null,[a(t,{to:"#_6-æµç¨‹çš„åˆ é™¤"},{default:p(()=>[s("6.æµç¨‹çš„åˆ é™¤")]),_:1})]),n("li",null,[a(t,{to:"#_7-æŸ¥çœ‹å†å²ä¿¡æ¯"},{default:p(()=>[s("7.æŸ¥çœ‹å†å²ä¿¡æ¯")]),_:1})]),n("li",null,[a(t,{to:"#_1-eclipse-designer"},{default:p(()=>[s("1.Eclipse Designer")]),_:1}),n("ul",null,[n("li",null,[a(t,{to:"#_1-1-ä¸‹è½½å®‰è£…-eclipse"},{default:p(()=>[s("1.1 ä¸‹è½½å®‰è£… Eclipse")]),_:1})]),n("li",null,[a(t,{to:"#_1-2-å®‰è£…-flowable-æ’ä»¶"},{default:p(()=>[s("1.2 å®‰è£… Flowable æ’ä»¶")]),_:1})]),n("li",null,[a(t,{to:"#_1-3-åˆ›å»ºé¡¹ç›®"},{default:p(()=>[s("1.3 åˆ›å»ºé¡¹ç›®")]),_:1})]),n("li",null,[a(t,{to:"#_1-4-åˆ›å»ºæµç¨‹å›¾"},{default:p(()=>[s("1.4 åˆ›å»ºæµç¨‹å›¾")]),_:1})]),n("li",null,[a(t,{to:"#_1-5-éƒ¨ç½²æµç¨‹"},{default:p(()=>[s("1.5 éƒ¨ç½²æµç¨‹")]),_:1})])])]),n("li",null,[a(t,{to:"#_2-flowable-ui-åº”ç”¨"},{default:p(()=>[s("2.Flowable UI åº”ç”¨")]),_:1}),n("ul",null,[n("li",null,[a(t,{to:"#_2-1-å®‰è£…éƒ¨ç½²"},{default:p(()=>[s("2.1 å®‰è£…éƒ¨ç½²")]),_:1})]),n("li",null,[a(t,{to:"#_2-2-å¯åŠ¨æœåŠ¡"},{default:p(()=>[s("2.2 å¯åŠ¨æœåŠ¡")]),_:1})]),n("li",null,[a(t,{to:"#_2-3-ç”¨æˆ·ç®¡ç†"},{default:p(()=>[s("2.3 ç”¨æˆ·ç®¡ç†")]),_:1})]),n("li",null,[a(t,{to:"#_2-4-ç»˜åˆ¶æµç¨‹"},{default:p(()=>[s("2.4 ç»˜åˆ¶æµç¨‹")]),_:1})]),n("li",null,[a(t,{to:"#_2-5-éƒ¨ç½²æµç¨‹"},{default:p(()=>[s("2.5 éƒ¨ç½²æµç¨‹")]),_:1})]),n("li",null,[a(t,{to:"#_2-6-flowableui-æ¼”ç¤º"},{default:p(()=>[s("2.6 FlowableUI æ¼”ç¤º")]),_:1})])])]),n("li",null,[a(t,{to:"#_1-è¡¨ç»“æ„è®²è§£"},{default:p(()=>[s("1.è¡¨ç»“æ„è®²è§£")]),_:1})]),n("li",null,[a(t,{to:"#_2-processengine-è®²è§£-processenginetest"},{default:p(()=>[s("2.ProcessEngine è®²è§£ï¼ˆProcessEngineTestï¼‰")]),_:1}),n("ul",null,[n("li",null,[a(t,{to:"#_2-1-ç¡¬ç¼–ç çš„æ–¹å¼"},{default:p(()=>[s("2.1 ç¡¬ç¼–ç çš„æ–¹å¼")]),_:1})]),n("li",null,[a(t,{to:"#_2-2-é…ç½®æ–‡ä»¶"},{default:p(()=>[s("2.2 é…ç½®æ–‡ä»¶")]),_:1})]),n("li",null,[a(t,{to:"#_2-3-è‡ªå®šä¹‰é…ç½®æ–‡ä»¶"},{default:p(()=>[s("2.3 è‡ªå®šä¹‰é…ç½®æ–‡ä»¶")]),_:1})])])]),n("li",null,[a(t,{to:"#_3-servcie-æœåŠ¡æ¥å£"},{default:p(()=>[s("3. Servcie æœåŠ¡æ¥å£")]),_:1}),n("ul",null,[n("li",null,[a(t,{to:"#_3-1-service-åˆ›å»ºæ–¹å¼"},{default:p(()=>[s("3.1 Service åˆ›å»ºæ–¹å¼")]),_:1})]),n("li",null,[a(t,{to:"#_3-2-service-æ€»è§ˆ"},{default:p(()=>[s("3.2 Service æ€»è§ˆ")]),_:1})])])]),n("li",null,[a(t,{to:"#_4-å›¾æ ‡ä»‹ç»"},{default:p(()=>[s("4.å›¾æ ‡ä»‹ç»")]),_:1}),n("ul",null,[n("li",null,[a(t,{to:"#_4-1-äº‹ä»¶å›¾æ ‡"},{default:p(()=>[s("4.1 äº‹ä»¶å›¾æ ‡")]),_:1})]),n("li",null,[a(t,{to:"#_4-2-æ´»åŠ¨-ä»»åŠ¡-å›¾æ ‡"},{default:p(()=>[s("4.2 æ´»åŠ¨(ä»»åŠ¡)å›¾æ ‡")]),_:1})]),n("li",null,[a(t,{to:"#_4-3-ç»“æ„å›¾æ ‡"},{default:p(()=>[s("4.3 ç»“æ„å›¾æ ‡")]),_:1})]),n("li",null,[a(t,{to:"#_4-4-ç½‘å…³å›¾æ ‡"},{default:p(()=>[s("4.4 ç½‘å…³å›¾æ ‡")]),_:1})])])]),n("li",null,[a(t,{to:"#_5-æµç¨‹éƒ¨ç½²è¯¦è§£"},{default:p(()=>[s("5.æµç¨‹éƒ¨ç½²è¯¦è§£")]),_:1}),n("ul",null,[n("li",null,[a(t,{to:"#_5-1-éƒ¨ç½²å®ç°"},{default:p(()=>[s("5.1 éƒ¨ç½²å®ç°")]),_:1})]),n("li",null,[a(t,{to:"#_5-2-éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„"},{default:p(()=>[s("5.2 éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„")]),_:1})]),n("li",null,[a(t,{to:"#_5-3-æŒ‚èµ·å’Œæ¿€æ´»"},{default:p(()=>[s("5.3 æŒ‚èµ·å’Œæ¿€æ´»")]),_:1})])])]),n("li",null,[a(t,{to:"#_6-å¯åŠ¨æµç¨‹å®ä¾‹"},{default:p(()=>[s("6.å¯åŠ¨æµç¨‹å®ä¾‹")]),_:1})]),n("li",null,[a(t,{to:"#_7-å¤„ç†æµç¨‹"},{default:p(()=>[s("7.å¤„ç†æµç¨‹")]),_:1})]),n("li",null,[a(t,{to:"#_8-å®Œæˆä¸€ä¸ªæµç¨‹"},{default:p(()=>[s("8.å®Œæˆä¸€ä¸ªæµç¨‹")]),_:1})])])]),ms,n("p",null,[s("â€ƒâ€ƒç„¶ååº”ç”¨è¿è¡Œæ²¡æœ‰é—®é¢˜ï¼Œä½†ä¹Ÿæ²¡æœ‰åœ¨æ§åˆ¶å°æä¾›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œåªæœ‰ä¸€æ¡æ¶ˆæ¯æç¤ºæ—¥å¿—æ²¡æœ‰æ­£ç¡®é…ç½®ã€‚Flowable ä½¿ç”¨"),n("a",vs,[s("SLF4J"),a(c)]),s("ä½œä¸ºå†…éƒ¨æ—¥å¿—æ¡†æ¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ log4j ä½œä¸º SLF4J çš„å®ç°ã€‚å› æ­¤åœ¨ pom.xml æ–‡ä»¶ä¸­æ·»åŠ ä¸‹åˆ—ä¾èµ–ï¼š")]),gs])}const hs=i(us,[["render",bs],["__file","index.html.vue"]]);export{hs as default};
